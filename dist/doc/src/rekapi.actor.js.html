<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width" charset="utf-8"><title>Rekapi</title><!-- Foundation CSS--><link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/css/foundation.min.css"><!-- Prism CSS--><style type="text/css">/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', monospace;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0,0%,100%,.5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}


.token.regex,
.token.important {
	color: #e90;
}

.token.important {
	font-weight: bold;
}

.token.entity {
	cursor: help;
}
</style><!-- Custom Styles--><style type="text/css">h1.page-title small {
  font-weight: 400;
}
/*.section-container, .section-container .section .title
  border-color #e6e6e6*/
#nav .section.active {
  padding-top: 0 !important;
}
#nav .section.active .title {
  background: #ddd;
}
#nav .section .title {
  background-color: #eee;
}
#nav .section .title a {
  font-weight: 700;
  padding: 0.6em;
}
#nav .section .title a small {
  font-size: 0.8em;
  line-height: 1em;
  display: block;
  color: #888;
  margin: 2px 0 -2px;
}
#nav .section .title:hover {
  background: #ddd;
}
code {
  background: transparent;
  line-height: 1.3em;
}
.comment {
  position: relative;
  padding-bottom: 1.5em;
  margin-bottom: 2em;
  border-bottom: 1px solid #ddd;
}
.comment ol,
.comment ul {
  margin-left: 2.25em;
}
.comment ol.no-bullet,
.comment ul.no-bullet {
  margin-left: 0;
}
.comment header {
  margin-bottom: 1.5em;
}
.comment header h1 {
  font-size: 2rem;
  margin-bottom: 0.2em;
}
.comment .section-container,
.comment .section-container > .section > .content {
  border: none;
}
.comment .section-container > .section > .title {
  padding: auto;
  background: none !important;
  border: none !important;
}
.comment .section-container > .section > .title a {
  border-radius: 4px;
  font-weight: 700;
  padding: 1px 10px 1px 0;
  margin-right: 5px;
  color: #ccc;
}
.comment .section-container > .section:hover .title a {
  color: #999;
}
.comment .section-container > .section.active .title a {
  color: #2ba6cb;
}
.comment .section-container > .section > .content {
  padding: 0.9em 0 0;
}
.comment div.description h2 {
  font-size: 1.2em;
}
.comment .tags span {
  margin-right: 4px;
}
.comment .tags .name,
.comment .tags .type {
  font-weight: 700;
}
.comment .tags .types {
  color: #666;
}
.comment .tags .description {
  margin-left: 15px;
}
.ctx-type {
  margin-right: 6px;
  font-size: 0.7em;
}
</style><script srr="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/vendor/custom.modernizr.js"></script></head><body><div class="row"><div class="small-12 columns"><h1 class="page-title">Rekapi<small> src/rekapi.actor.js</small></h1></div></div><div class="row"><div id="nav" class="large-3 columns"><div data-section="accordian" data-options="" class="section-container accordian"><div class="section"><p data-section-title class="title"><a href="../../../dist/doc/src/rekapi.core.js.html"><small>src/</small>rekapi.core.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../../dist/doc/src/rekapi.core.js.html#Kapi">Kapi</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#addActor">addActor</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#getActor">getActor</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#getActorIds">getActorIds</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#getAllActors">getAllActors</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#removeActor">removeActor</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#play">play</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#playFrom">playFrom</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#playFromCurrent">playFromCurrent</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#pause">pause</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#stop">stop</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#isPlaying">isPlaying</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#animationLength">animationLength</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#lastPositionUpdated">lastPositionUpdated</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#actorCount">actorCount</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#framerate">framerate</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#update">update</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#on">on</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#off">off</a></li><li><a href="../../../dist/doc/src/rekapi.core.js.html#exportTimeline">exportTimeline</a></li></ul></div></div><div class="section active"><p data-section-title class="title"><a href="../../../dist/doc/src/rekapi.actor.js.html"><small>src/</small>rekapi.actor.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../../dist/doc/src/rekapi.actor.js.html#Actor">Actor</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#context">context</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#keyframe">keyframe</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#getKeyframeProperty">getKeyframeProperty</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#modifyKeyframeProperty">modifyKeyframeProperty</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#getTrackNames">getTrackNames</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#getTrackLength">getTrackLength</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#copyProperties">copyProperties</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#wait">wait</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#getStart">getStart</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#getEnd">getEnd</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#getLength">getLength</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#hasKeyframeAt">hasKeyframeAt</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#moveKeyframe">moveKeyframe</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#modifyKeyframe">modifyKeyframe</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#removeKeyframe">removeKeyframe</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#removeAllKeyframeProperties">removeAllKeyframeProperties</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#updateState">updateState</a></li><li><a href="../../../dist/doc/src/rekapi.actor.js.html#exportTimeline">exportTimeline</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../../dist/doc/src/rekapi.keyframeprops.js.html"><small>src/</small>rekapi.keyframeprops.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../../dist/doc/src/rekapi.keyframeprops.js.html#KeyframeProperty">KeyframeProperty</a></li><li><a href="../../../dist/doc/src/rekapi.keyframeprops.js.html#modifyWith">modifyWith</a></li><li><a href="../../../dist/doc/src/rekapi.keyframeprops.js.html#linkToNext">linkToNext</a></li><li><a href="../../../dist/doc/src/rekapi.keyframeprops.js.html#getValueAt">getValueAt</a></li><li><a href="../../../dist/doc/src/rekapi.keyframeprops.js.html#exportPropertyData">exportPropertyData</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../../dist/doc/ext/canvas/rekapi.canvas.context.js.html"><small>ext/canvas/</small>rekapi.canvas.context.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../../dist/doc/ext/canvas/rekapi.canvas.context.js.html#CanvasRenderer">CanvasRenderer</a></li><li><a href="../../../dist/doc/ext/canvas/rekapi.canvas.context.js.html#height">height</a></li><li><a href="../../../dist/doc/ext/canvas/rekapi.canvas.context.js.html#width">width</a></li><li><a href="../../../dist/doc/ext/canvas/rekapi.canvas.context.js.html#clear">clear</a></li><li><a href="../../../dist/doc/ext/canvas/rekapi.canvas.context.js.html#context">context</a></li><li><a href="../../../dist/doc/ext/canvas/rekapi.canvas.context.js.html#moveActorToLayer">moveActorToLayer</a></li><li><a href="../../../dist/doc/ext/canvas/rekapi.canvas.context.js.html#setOrderFunction">setOrderFunction</a></li><li><a href="../../../dist/doc/ext/canvas/rekapi.canvas.context.js.html#unsetOrderFunction">unsetOrderFunction</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../../dist/doc/ext/canvas/rekapi.canvas.actor.js.html"><small>ext/canvas/</small>rekapi.canvas.actor.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../../dist/doc/ext/canvas/rekapi.canvas.actor.js.html#CanvasActor">CanvasActor</a></li><li><a href="../../../dist/doc/ext/canvas/rekapi.canvas.actor.js.html#moveToLayer">moveToLayer</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../../dist/doc/ext/dom/rekapi.dom.actor.js.html"><small>ext/dom/</small>rekapi.dom.actor.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../../dist/doc/ext/dom/rekapi.dom.actor.js.html#DOMActor">DOMActor</a></li><li><a href="../../../dist/doc/ext/dom/rekapi.dom.actor.js.html#getCSSName">getCSSName</a></li><li><a href="../../../dist/doc/ext/dom/rekapi.dom.actor.js.html#setTransformOrder">setTransformOrder</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../../dist/doc/ext/to-css/rekapi.to-css.js.html"><small>ext/to-css/</small>rekapi.to-css.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../../dist/doc/ext/to-css/rekapi.to-css.js.html#toCSS">toCSS</a></li></ul></div></div><div class="section"><p data-section-title class="title"><a href="../../../dist/doc/ext/css-animate/rekapi.css-animate.context.js.html"><small>ext/css-animate/</small>rekapi.css-animate.context.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../../dist/doc/ext/css-animate/rekapi.css-animate.context.js.html#CSSRenderer">CSSRenderer</a></li><li><a href="../../../dist/doc/ext/css-animate/rekapi.css-animate.context.js.html#canAnimateWithCSS">canAnimateWithCSS</a></li><li><a href="../../../dist/doc/ext/css-animate/rekapi.css-animate.context.js.html#play">play</a></li><li><a href="../../../dist/doc/ext/css-animate/rekapi.css-animate.context.js.html#stop">stop</a></li><li><a href="../../../dist/doc/ext/css-animate/rekapi.css-animate.context.js.html#isPlaying">isPlaying</a></li></ul></div></div></div></div><div class="small-12 large-9 columns"><article class="comment"><header><h1 id="Actor">Actor</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Kapi.Actor()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">opt_config</span><span class="description"></span></li><li class="tag"><span class="type">@constructor: </span><span class="string"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Create a <code>Kapi.Actor</code> instance.  Note that the rest of the API docs for <code>Kapi.Actor</code> will simply refer to this Object as <code>Actor</code>.</p>

<p>Valid properties of <code>opt_config</code> (you can omit the ones you don't need):</p>

<ul>
<li><strong>context</strong> (<em>Object</em>): The context that this Actor is associated with. If omitted, this Actor gets the <code>Kapi</code> instance's context when it is added with <a href="rekapi.core.js.html#addActor"><code>Kapi#addActor</code></a>.</li>
<li><strong>setup</strong> (<em>Function</em>): A function that gets called when the <code>Actor</code> is added with <a href="rekapi.core.js.html#addActor"><code>Kapi#addActor</code></a>.</li>
<li><strong>update</strong> (<em>Function(Object, Object)</em>): A function that gets called every time that the <code>Actor</code>'s state is updated. It receives two parameters: A reference to the <code>Actor</code>'s context and an Object containing the current state properties.</li>
<li><strong>teardown</strong> (<em>Function</em>): A function that gets called when the <code>Actor</code> is removed with <a href="rekapi.core.js.html#removeActor"><code>Kapi#removeActor</code></a>.</li>
</ul>

<p><code>Kapi.Actor</code> does <em>not</em> render to any context.  It is a base class.  Use the <a href="../ext/canvas/rekapi.canvas.actor.js.html"><code>Kapi.CanvasActor</code></a> or <a href="../ext/dom/rekapi.dom.actor.js.html"><code>Kapi.DOMActor</code></a> subclasses to render to the screen.  You can also make your own rendering subclass - see the source code for the aforementioned examples.</p>

<p><strong><a href="../../../../docs/examples/actor.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Kapi.Actor = function (opt_config) {

    opt_config = opt_config || {};

    // Steal the `Tweenable` constructor.
    Tweenable.call(this);

    _.extend(this, {
      '_propertyTracks': {}
      ,'_timelinePropertyCaches': {}
      ,'_timelinePropertyCacheIndex': []
      ,'_keyframeProperties': {}
      ,'id': _.uniqueId()
      ,'setup': opt_config.setup || noop
      ,'update': opt_config.update || noop
      ,'teardown': opt_config.teardown || noop
      ,'data': {}
    });

    if (opt_config.context) {
      this.context(opt_config.context);
    }

    return this;
  };
  var Actor = Kapi.Actor;


  // Kind of a fun way to set up an inheritance chain.  `ActorMethods` prevents
  // methods on `Actor.prototype` from polluting `Tweenable`'s prototype with
  // `Actor` specific methods.
  var ActorMethods = function () {};
  ActorMethods.prototype = Tweenable.prototype;
  Actor.prototype = new ActorMethods();
  // But the magic doesn't stop here!  `Actor`'s constructor steals the
  // `Tweenable` constructor.</code></pre></div></div></div></article><article class="comment"><header><h1 id="context">context</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.context()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">opt_context</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{Object}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get and optionally set the <code>Actor</code>'s context.</p>

<p><strong><a href="../../../../docs/examples/actor_context.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.context = function (opt_context) {
    if (opt_context) {
      this._context = opt_context;
    }

    return this._context;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="keyframe">keyframe</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.keyframe()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">millisecond</span><span class="description">Where on the timeline to set the keyframe.</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">properties</span><span class="description">Keyframe properties to set for the keyframe.</span></li><li class="tag"><span class="type">@param: </span><span class="types">{string,Object}</span><span class="name">opt_easing</span><span class="description">Optional easing string or configuration object.</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Kapi.Actor}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Create a keyframe for the <code>Actor</code>.  <code>millisecond</code> defines where in the animation to place the keyframe, in milliseconds (assumes that <code>0</code> is when the animation began).  The animation length will automatically "grow" to accommodate any keyframe position.</p>

<p><code>properties</code> should contain all of the properties that define the keyframe's state.  These properties can be any value that can be tweened by <a href="https://github.com/jeremyckahn/shifty">Shifty</a> (numbers, color strings, CSS properties).</p>

<p><strong>Note:</strong> Internally, this creates <a href="rekapi.keyframeprops.js.html"><code>Kapi.KeyframeProperty</code></a>s and places them on a "track."  These <a href="rekapi.keyframeprops.js.html"><code>Kapi.KeyframeProperty</code></a>s are managed for you by the <code>Actor</code> APIs.</p>

<h2>Easing</h2>

<p><code>opt_easing</code>, if specified, can be a string or an Object.  If it's a string, all properties in <code>properties</code> will have the same easing formula applied to them. For example:</p>

<div class="highlight"><pre lang="javascript">actor.keyframe(1000, {
    'x': 100,
    'y': 100
  }, 'easeOutSine');
</pre></div>

<p>Both <code>x</code> and <code>y</code> will have <code>easeOutSine</code> applied to them.  You can also specify multiple easing formulas with an Object:</p>

<div class="highlight"><pre lang="javascript">actor.keyframe(1000, {
    'x': 100,
    'y': 100
  }, {
    'x': 'easeinSine',
    'y': 'easeOutSine'
  });
</pre></div>

<p><code>x</code> will ease with <code>easeInSine</code>, and <code>y</code> will ease with <code>easeOutSine</code>.  Any unspecified properties will ease with <code>linear</code>.  If <code>opt_easing</code> is omitted, all properties will default to <code>linear</code>.</p>

<h2>Keyframe inheritance</h2>

<p>Keyframes always inherit missing properties from the keyframes that came before them.  For example:</p>

<div class="highlight"><pre lang="javascript">actor.keyframe(0, {
  'x': 100
}).keyframe(1000{
  // Inheriting the `x` from above!
  'y': 50
});
</pre></div>

<p>Keyframe <code>1000</code> will have a <code>y</code> of <code>50</code>, and an <code>x</code> of <code>100</code>, because <code>x</code> was inherited from keyframe <code>0</code>.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.keyframe = function keyframe (
      millisecond, properties, opt_easing) {

    var originalEasingString;

    // TODO:  The opt_easing logic seems way overcomplicated, it's probably out
    // of date.  Multiple eases landed first in Rekapi, then were pushed
    // upstream into Shifty.  There's likely some redundant logic here.
    opt_easing = opt_easing || DEFAULT_EASING;

    if (typeof opt_easing === 'string') {
      originalEasingString = opt_easing;
      opt_easing = {};
      _.each(properties, function (property, propertyName) {
        opt_easing[propertyName] = originalEasingString;
      });
    }

    // If `opt_easing` was passed as an Object, this will fill in any missing
    // opt_easing properties with the default equation.
    _.each(properties, function (property, propertyName) {
      opt_easing[propertyName] = opt_easing[propertyName] || DEFAULT_EASING;
    });

    _.each(properties, function (value, name) {
      var newKeyframeProperty = new Kapi.KeyframeProperty(
          this, millisecond, name, value, opt_easing[name]);

      this._keyframeProperties[newKeyframeProperty.id] = newKeyframeProperty;

      if (!this._propertyTracks[name]) {
        this._propertyTracks[name] = [];
      }

      this._propertyTracks[name].push(newKeyframeProperty);
      sortPropertyTracks(this);
    }, this);

    if (this.kapi) {
      recalculateAnimationLength(this.kapi, _);
    }

    invalidatePropertyCache(this);

    return this;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="getKeyframeProperty">getKeyframeProperty</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.getKeyframeProperty()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{string}</span><span class="name">property</span><span class="description">The name of the property.</span></li><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">index</span><span class="description">The 0-based index of the KeyframeProperty in the Actor's KeyframeProperty track.</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Kapi.KeyframeProperty,undefined}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Gets the <a href="rekapi.keyframeprops.js.html"><code>Kapi.KeyframeProperty</code></a> from an <code>Actor</code>'s <a href="rekapi.keyframeprops.js.html"><code>Kapi.KeyframeProperty</code></a> track. Returns <code>undefined</code> if there were no properties found with the specified parameters.</p>

<p><strong><a href="../../../../docs/examples/actor_get_keyframe_property.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.getKeyframeProperty = function (property, index) {
    if (this._propertyTracks[property]
        &amp;&amp; this._propertyTracks[property][index]) {
      return this._propertyTracks[property][index];
    }
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="modifyKeyframeProperty">modifyKeyframeProperty</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.modifyKeyframeProperty()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{string}</span><span class="name">property</span><span class="description">The name of the property to modify</span></li><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">index</span><span class="description">The property track index of the KeyframeProperty to modify</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">newProperties</span><span class="description">The properties to augment the KeyframeProperty with</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Kapi.Actor}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Modify a specified <a href="rekapi.keyframeprops.js.html"><code>Kapi.KeyframeProperty</code></a> stored on an <code>Actor</code>.  Essentially, this calls <a href="rekapi.keyframeprops.js.html#modifyWith"><code>KeyframeProperty#modifyWith</code></a> (passing along <code>newProperties</code>) and then performs some cleanup.</p>

<p><strong><a href="../../../../docs/examples/actor_modify_keyframe_property.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.modifyKeyframeProperty = function (
      property, index, newProperties) {

    if (this._propertyTracks[property]
        &amp;&amp; this._propertyTracks[property][index]) {
      this._propertyTracks[property][index].modifyWith(newProperties);
    }

    cleanupAfterKeyframeModification(this);

    return this;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="getTrackNames">getTrackNames</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.getTrackNames()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Array.&lt;string&gt;}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get a list of all the track names for an <code>Actor</code>.</p>

<p><strong><a href="../../../../docs/examples/actor_get_track_names.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.getTrackNames = function () {
    return _.keys(this._propertyTracks);
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="getTrackLength">getTrackLength</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.getTrackLength()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{string}</span><span class="name">trackName</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{number}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the property track length for an <code>Actor</code> (how many <code>KeyframeProperty</code>s are in a given property track).</p>

<p><strong><a href="../../../../docs/examples/actor_get_track_length.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.getTrackLength = function (trackName) {
    if (!this._propertyTracks[trackName]) {
      return;
    }

    return this._propertyTracks[trackName].length;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="copyProperties">copyProperties</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.copyProperties()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">copyTo</span><span class="description">The millisecond to copy KeyframeProperties to</span></li><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">copyFrom</span><span class="description">The millisecond to copy KeyframeProperties from</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Kapi.Actor}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Copy all of the properties that at one point in the timeline to another point. This is useful for many things, particularly for bringing a <code>Kapi.Actor</code> back to its original position.</p>

<p><strong><a href="../../../../docs/examples/actor_copy_properties.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.copyProperties = function (copyTo, copyFrom) {
    var sourcePositions = {};
    var sourceEasings = {};

    _.each(this._propertyTracks, function (propertyTrack, trackName) {
      var foundProperty = findPropertyAtMillisecondInTrack(this, trackName,
          copyFrom);

      if (foundProperty) {
        sourcePositions[trackName] = foundProperty.value;
        sourceEasings[trackName] = foundProperty.easing;
      }
    }, this);

    this.keyframe(copyTo, sourcePositions, sourceEasings);
    return this;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="wait">wait</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.wait()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">until</span><span class="description">At what point in the animation the Actor should wait until (relative to the start of the animation)</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Kapi.Actor}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Extend the last state on this <code>Actor</code>'s timeline to create a animation wait. The state does not change during this time.</p>

<p><strong><a href="../../../../docs/examples/actor_wait.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.wait = function (until) {
    var length = this.getEnd();

    if (until &lt;= length) {
      return this;
    }

    var end = this.getEnd();
    var latestProps = getLatestPropeties(this, this.getEnd());
    var serializedProps = {};
    var serializedEasings = {};

    _.each(latestProps, function (latestProp, propName) {
      serializedProps[propName] = latestProp.value;
      serializedEasings[propName] = latestProp.easing;
    });

    this.removeKeyframe(end);
    this.keyframe(end, serializedProps, serializedEasings);
    this.keyframe(until, serializedProps, serializedEasings);

    return this;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="getStart">getStart</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.getStart()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{string}</span><span class="name">opt_trackName</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{number}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the millisecond of the first state of an <code>Actor</code> (when it first starts animating).  You can get the start time of a specific track with <code>opt_trackName</code>.</p>

<p><strong><a href="../../../../docs/examples/actor_get_start.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.getStart = function (opt_trackName) {
    var starts = [];

    if (opt_trackName) {
      starts.push(this._propertyTracks[opt_trackName][0].millisecond);
    } else {
      _.each(this._propertyTracks, function (propertyTrack) {
        if (propertyTrack.length) {
          starts.push(propertyTrack[0].millisecond);
        }
      });
    }

    if (starts.length === 0) {
      starts = [0];
    }

    return Math.min.apply(Math, starts);
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="getEnd">getEnd</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.getEnd()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{string}</span><span class="name">opt_trackName</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{number}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the millisecond of the last state of an <code>Actor</code> (when it is done animating).  You can get the last state for a specific track with <code>opt_trackName</code>.</p>

<p><strong><a href="../../../../docs/examples/actor_get_end.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.getEnd = function (opt_trackName) {
    var latest = 0;
    var tracksToInspect = this._propertyTracks;

    if (opt_trackName) {
      tracksToInspect = {};
      tracksToInspect[opt_trackName] = this._propertyTracks[opt_trackName];
    }

    _.each(tracksToInspect, function (propertyTrack) {
      if (propertyTrack.length) {
        var trackLength = _.last(propertyTrack).millisecond;

        if (trackLength &gt; latest) {
          latest = trackLength;
        }
      }
    }, this);

    return latest;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="getLength">getLength</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.getLength()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{string}</span><span class="name">opt_trackName</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{number}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the length of time in milliseconds that an <code>Actor</code> animates for.  You can get the length of time that a specific track animates for with <code>opt_trackName</code>.</p>

<p><strong><a href="../../../../docs/examples/actor_get_length.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.getLength = function (opt_trackName) {
    return this.getEnd(opt_trackName) - this.getStart(opt_trackName);
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="hasKeyframeAt">hasKeyframeAt</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.hasKeyframeAt()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">millisecond</span><span class="description">Point on the timeline to query.</span></li><li class="tag"><span class="type">@param: </span><span class="types">{string}</span><span class="name">opt_trackName</span><span class="description">Optional name of a property track.</span></li><li class="tag"><span class="type">@return: </span><span class="types">{boolean}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Determines if an actor has a keyframe set at a given millisecond.  Can optionally scope the lookup to a specific property name.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.hasKeyframeAt = function(millisecond, opt_trackName) {
    var tracks = this._propertyTracks;

    if (opt_trackName) {
      if (!_.has(tracks, opt_trackName)) {
        return false;
      }
      tracks = _.pick(tracks, opt_trackName);
    }

    return _.find(tracks, function (propertyTrack, trackName) {
      var retrievedProperty =
          findPropertyAtMillisecondInTrack(this, trackName, millisecond);
      return retrievedProperty !== undefined;
    }, this) !== undefined;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="moveKeyframe">moveKeyframe</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.moveKeyframe()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">from</span><span class="description">The millisecond of the keyframe to be moved.</span></li><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">to</span><span class="description">The millisecond of where the keyframe should be moved to.</span></li><li class="tag"><span class="type">@return: </span><span class="types">{boolean}</span><span class="description">Whether or not the keyframe was successfully moved.</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Moves a Keyframe from one point on the timeline to another.  Although this method does error checking for you to make sure the operation can be safely performed, an effective pattern is to use <a href="#hasKeyframeAt"><code>hasKeyframeAt</code></a> to see if there is already a keyframe at the requested <code>to</code> destination.</p>

<p><strong><a href="../../../../docs/examples/actor_move_keyframe.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.moveKeyframe = function (from, to) {
    if (!this.hasKeyframeAt(from) || this.hasKeyframeAt(to)) {
      return false;
    }

    _.each(this._propertyTracks, function (propertyTrack, trackName) {
      var property = findPropertyAtMillisecondInTrack(this, trackName, from);

      if (property) {
        property.modifyWith({
          'millisecond': to
        });
      }
    }, this);

    cleanupAfterKeyframeModification(this);

    return true;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="modifyKeyframe">modifyKeyframe</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.modifyKeyframe()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">millisecond</span><span class="description"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">stateModification</span><span class="description"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">opt_easingModification</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{Kapi.Actor}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Augment the <code>value</code> or <code>easing</code> of the <a href="rekapi.keyframeprops.js.html"><code>Kapi.KeyframeProperty</code></a>s at a given millisecond.  Any <a href="rekapi.keyframeprops.js.html"><code>Kapi.KeyframeProperty</code></a>s omitted in <code>stateModification</code> or <code>opt_easing</code> are not modified.  Here's how you might use it:</p>

<div class="highlight"><pre lang="javascript">actor.keyframe(0, {
  'x': 10,
  'y': 20
}).keyframe(1000, {
  'x': 20,
  'y': 40
}).keyframe(2000, {
  'x': 30,
  'y': 60
})

// Changes the state of the keyframe at millisecond 1000.
// Modifies the value of 'y' and the easing of 'x.'
actor.modifyKeyframe(1000, {
  'y': 150
}, {
  'x': 'easeFrom'
});
</pre></div>

<p><strong><a href="../../../../docs/examples/actor_modify_keyframe.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.modifyKeyframe = function (
      millisecond, stateModification, opt_easingModification) {
    opt_easingModification = opt_easingModification || {};

    _.each(this._propertyTracks, function (propertyTrack, trackName) {
      var property = findPropertyAtMillisecondInTrack(
          this, trackName, millisecond);

      if (property) {
        property.modifyWith({
          'value': stateModification[trackName]
          ,'easing': opt_easingModification[trackName]
        });
      }
    }, this);

    return this;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="removeKeyframe">removeKeyframe</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.removeKeyframe()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">millisecond</span><span class="description">The location on the timeline of the keyframe to remove.</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Kapi.Actor}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Remove all <a href="rekapi.keyframeprops.js.html"><code>Kapi.KeyframeProperty</code></a>s at a given millisecond in the animation.</p>

<p><strong><a href="../../../../docs/examples/actor_remove_keyframe.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.removeKeyframe = function (millisecond) {
    _.each(this._propertyTracks, function (propertyTrack, propertyName) {
      var i = -1;
      var foundProperty = false;

      _.find(propertyTrack, function (keyframeProperty) {
        i++;
        foundProperty = (millisecond === keyframeProperty.millisecond);
        return foundProperty;
      });

      if (foundProperty) {
        var removedProperty = propertyTrack.splice(i, 1)[0];

        if (removedProperty) {
          delete this._keyframeProperties[removedProperty.id];
        }
      }
    }, this);

    if (this.kapi) {
      recalculateAnimationLength(this.kapi, _);
    }

    invalidatePropertyCache(this);

    return this;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="removeAllKeyframeProperties">removeAllKeyframeProperties</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.removeAllKeyframeProperties()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Kapi.Actor}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Remove all <code>KeyframeProperty</code>s set on the <code>Actor</code>.</p>

<p><strong><a href="../../../../docs/examples/actor_remove_all_keyframe_properties.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.removeAllKeyframeProperties = function () {
    _.each(this._propertyTracks, function (propertyTrack, propertyName) {
      propertyTrack.length = 0;
    }, this);

    this._keyframeProperties = {};
    return this.removeKeyframe(0);
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="updateState">updateState</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.updateState()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{number}</span><span class="name">millisecond</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{Kapi.Actor}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Calculate and set the <code>Actor</code>'s position at <code>millisecond</code> in the animation.</p>

<p><strong><a href="../../../../docs/examples/actor_update_state.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.updateState = function (millisecond) {
    var startMs = this.getStart();
    var endMs = this.getEnd();

    millisecond = Math.min(endMs, millisecond);

    if (startMs &lt;= millisecond) {
      var latestCacheId = getPropertyCacheIdForMillisecond(this, millisecond);
      var propertiesToInterpolate =
          this._timelinePropertyCaches[this._timelinePropertyCacheIndex[
          latestCacheId]];
      var interpolatedObject = {};

      _.each(propertiesToInterpolate, function (keyframeProperty, propName) {
        if (keyframeProperty) {
          interpolatedObject[propName] =
              keyframeProperty.getValueAt(millisecond);
        }
      });

      this.set(interpolatedObject);
    }

    return this;
  };</code></pre></div></div></div></article><article class="comment"><header><h1 id="exportTimeline">exportTimeline</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Actor.prototype.exportTimeline()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Object}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Export a serializable <code>Object</code> of this <code>Actor</code>'s timeline property tracks and <a href="rekapi.keyframeprops.js.html"><code>Kapi.KeyframeProperty</code></a>s.</p>

<p><strong><a href="../../../../docs/examples/actor_export_timeline.html">Example</a></strong></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Actor.prototype.exportTimeline = function () {
    var exportData = {
      'start': this.getStart()
      ,'end': this.getEnd()
      ,'trackNames': this.getTrackNames()
      ,'propertyTracks': {}
    };

    _.each(this._propertyTracks, function (propertyTrack, trackName) {
      var trackAlias = exportData.propertyTracks[trackName] = [];
      _.each(propertyTrack, function (keyframeProperty) {
        trackAlias.push(keyframeProperty.exportPropertyData());
      });
    });

    return exportData;
  };

};</code></pre></div></div></div></article></div></div><!-- Foundation JS--><script type="text/javascript">document.write('<script src=' +
('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min' : 'http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min') +
'.js><\/script>')
</script><script src="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/foundation.min.js"></script><script src="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/foundation/foundation.reveal.min.js"></script><!-- Prism js--><script type="text/javascript">
/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 * MIT license http://www.opensource.org/licenses/mit-license.php/
 * @author Lea Verou http://lea.verou.me
 */(function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.util.clone(e[i]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var s=i[e],o={};for(var u in s)if(s.hasOwnProperty(u)){if(u==n)for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);o[u]=s[u]}return i[e]=o},DFS:function(e,n){for(var r in e){n.call(e,r,e[r]);t.util.type(e)==="Object"&&t.languages.DFS(e[r],n)}}},highlightAll:function(e,n){var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,s;s=r[i++];)t.highlightElement(s,e===!0,n)},highlightElement:function(r,i,s){var o,u,a=r;while(a&&!e.test(a.className))a=a.parentNode;if(a){o=(a.className.match(e)||[,""])[1];u=t.languages[o]}if(!u)return;r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;a=r.parentNode;/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var f=r.textContent;if(!f)return;f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ");var l={element:r,language:o,grammar:u,code:f};t.hooks.run("before-highlight",l);if(i&&self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){l.highlightedCode=n.stringify(JSON.parse(e.data),o);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(l.element);t.hooks.run("after-highlight",l)};c.postMessage(JSON.stringify({language:l.language,code:l.code}))}else{l.highlightedCode=t.highlight(l.code,l.grammar,l.language);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(r);t.hooks.run("after-highlight",l)}},highlight:function(e,r,i){return n.stringify(t.tokenize(e,r),i)},tokenize:function(e,n,r){var i=t.Token,s=[e],o=n.rest;if(o){for(var u in o)n[u]=o[u];delete n.rest}e:for(var u in n){if(!n.hasOwnProperty(u)||!n[u])continue;var a=n[u],f=a.inside,l=!!a.lookbehind,c=0;a=a.pattern||a;for(var h=0;h<s.length;h++){var p=s[h];if(s.length>e.length)break e;if(p instanceof i)continue;a.lastIndex=0;var d=a.exec(p);if(d){l&&(c=d[1].length);var v=d.index-1+c,d=d[0].slice(c),m=d.length,g=v+m,y=p.slice(0,v+1),b=p.slice(g+1),w=[h,1];y&&w.push(y);var E=new i(u,f?t.tokenize(d,f):d);w.push(E);b&&w.push(b);Array.prototype.splice.apply(s,w)}}}return s},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[];r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(!r||!r.length)return;for(var i=0,s;s=r[i++];)s(n)}}},n=t.Token=function(e,t){this.type=e;this.content=t};n.stringify=function(e,r,i){if(typeof e=="string")return e;if(Object.prototype.toString.call(e)=="[object Array]")return e.map(function(t){return n.stringify(t,r,e)}).join("");var s={type:e.type,content:n.stringify(e.content,r,i),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:i};s.type=="comment"&&(s.attributes.spellcheck="true");t.hooks.run("wrap",s);var o="";for(var u in s.attributes)o+=u+'="'+(s.attributes[u]||"")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'" '+o+">"+s.content+"</"+s.tag+">"};if(!self.document){self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(t.tokenize(i,t.languages[r])));self.close()},!1);return}var r=document.getElementsByTagName("script");r=r[r.length-1];if(r){t.filename=r.src;document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)}})();;
Prism.languages.markup={comment:/&lt;!--[\w\W]*?-->/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});;
Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});;
Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/ig,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/ig,inside:{punctuation:/\(/}}, number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|&lt;=?|>=?|={1,3}|(&amp;){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};;
Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g});Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});;
Prism.languages.coffeescript=Prism.languages.extend("javascript",{"block-comment":/([#]{3}\s*\r?\n(.*\s*\r*\n*)\s*?\r?\n[#]{3})/g,comment:/(\s|^)([#]{1}[^#^\r^\n]{2,}?(\r?\n|$))/g,keyword:/\b(this|window|delete|class|extends|namespace|extend|ar|let|if|else|while|do|for|each|of|return|in|instanceof|new|with|typeof|try|catch|finally|null|undefined|break|continue)\b/g});Prism.languages.insertBefore("coffeescript","keyword",{"function":{pattern:/[a-z|A-z]+\s*[:|=]\s*(\([.|a-z\s|,|:|{|}|\"|\'|=]*\))?\s*-&gt;/gi,inside:{"function-name":/[_?a-z-|A-Z-]+(\s*[:|=])| @[_?$?a-z-|A-Z-]+(\s*)| /g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g}},"attr-name":/[_?a-z-|A-Z-]+(\s*:)| @[_?$?a-z-|A-Z-]+(\s*)| /g});;
Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},atrule:/@[\w-]+(?=\s+(\(|\{|;))/gi,url:/([-a-z]+-)*url(?=\()/gi,selector:/([^@;\{\}\(\)]?([^@;\{\}\(\)]|&amp;|\#\{\$[-_\w]+\})+)(?=\s*\{(\}|\s|[^\}]+(:|\{)[^\}]+))/gm});Prism.languages.insertBefore("scss","atrule",{keyword:/@(if|else if|else|for|each|while|import|extend|debug|warn|mixin|include|function|return)|(?=@for\s+\$[-_\w]+\s)+from/i});Prism.languages.insertBefore("scss","property",{variable:/((\$[-_\w]+)|(#\{\$[-_\w]+\}))/i});Prism.languages.insertBefore("scss","ignore",{placeholder:/%[-_\w]+/i,statement:/\B!(default|optional)\b/gi,"boolean":/\b(true|false)\b/g,"null":/\b(null)\b/g,operator:/\s+([-+]{1,2}|={1,2}|!=|\|?\||\?|\*|\/|\%)\s+/g});
;
</script><script type="text/javascript">
  var headerHeight = 64;

  $(document).foundation();

  $(function(){
    $('pre').addClass('language-javascript');
  //   $('#nav > ul > li > a[href$="'+location.pathname.substring(location.pathname.lastIndexOf('/')+1, location.pathname.length)+'"]').parent().addClass('active');
  })</script></body></html>