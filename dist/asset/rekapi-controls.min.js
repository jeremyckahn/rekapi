/**
 * Rekapi Controls - UI controls for Rekapi animations. v0.3.10
 *   By Jeremy Kahn - jeremyckahn@gmail.com
 *   https://github.com/jeremyckahn/rekapi-controls
 *
 * Make Rekapi animations interactive and fun.
 * Dependencies: Rekapi (https://github.com/jeremyckahn/rekapi), Underscore.js (https://github.com/documentcloud/underscore), Shifty.js (https://github.com/jeremyckahn/shifty), jQuery (https://github.com/jquery/jquery)
 * MIT Lincense.  This code free to use, modify, distribute and enjoy.
 */
(function(g){function h(a){var c,d,f,b;c=a.kapi;d=a.$container.find(".rekapi-scrubber-play");f=a.$container.find(".rekapi-scrubber-pause");b=a.$container.find(".rekapi-scrubber-stop");d.on("click",function(a){a.preventDefault();c.play()});f.on("click",function(a){a.preventDefault();c.pause()});b.on("click",function(a){a.preventDefault();c.stop(!0)});c.on("playStateChange",function(){a.syncPlayStateButtons()});c.on("stop",function(){a.resetScrubber()});c.on("afterUpdate",function(){a.updateScrubber()})}
function b(a,c){var d,b;this.kapi=a;this.$contextEl=e(c);d=e(a.context);b=e(k);d.after(b);this.$container=b=d.next();d=b.find(".rekapi-scrubber-timeline");d.dragonSlider({drag:e.proxy(function(c){a.pause();this.syncAnimationToPercent(c)},this)});this.$timeline=d;b.width(this.$contextEl.width());this.syncPlayStateButtons();h(this);return this}var k='<div class="rekapi-scrubber-wrapper"><div class="rekapi-scrubber"><a class="rekapi-scrubber-button rekapi-scrubber-play" href="#"><span class="icon icon-play"></span></a><a class="rekapi-scrubber-button rekapi-scrubber-pause" href="#"><span class="icon icon-pause"></span></a><div class="rekapi-scrubber-timeline"></div><a class="rekapi-scrubber-button rekapi-scrubber-stop" href="#"><span class="icon icon-stop"></span></a></div></div>',
e=jQuery;b.prototype.syncPlayStateButtons=function(){var a,c,b;a=this.kapi;c=this.$container.find(".rekapi-scrubber-play");b=this.$container.find(".rekapi-scrubber-pause");a.isPlaying()?(c.css({display:"none"}),b.css({display:"block"})):(c.css({display:"block"}),b.css({display:"none"}));return this};b.prototype.updateScrubber=function(){this.$timeline.dragonSliderSet(this.kapi.lastPositionUpdated(),!1)};b.prototype.resetScrubber=function(){this.$timeline.dragonSliderSet(0,!1)};b.prototype.syncAnimationToScrubber=
function(){this.syncAnimationToPercent(this.$timeline.dragonSliderGet())};b.prototype.syncAnimationToPercent=function(a){this.syncAnimationToMillisecond(a*this.kapi.animationLength())};b.prototype.syncAnimationToMillisecond=function(a){var b;b=Tweenable.now();this.kapi.update(a);this.kapi._loopTimestamp=b-a;this.kapi._pausedAtTime=b};g.RekapiScrubber=b})(this);
