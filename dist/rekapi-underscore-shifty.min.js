/*! Rekapi - v0.16.4 - 2013-10-23 - http://rekapi.com */
(function(){var t=this,e=t._,n={},r=Array.prototype,i=Object.prototype,o=Function.prototype,a=r.push,s=r.slice,u=r.concat,c=i.toString,p=i.hasOwnProperty,h=r.forEach,f=r.map,l=r.reduce,m=r.reduceRight,d=r.filter,y=r.every,v=r.some,_=r.indexOf,g=r.lastIndexOf,k=Array.isArray,w=Object.keys,T=o.bind,x=function(t){return t instanceof x?t:this instanceof x?(this._wrapped=t,void 0):new x(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):t._=x,x.VERSION="1.5.1";var S=x.each=x.forEach=function(t,e,r){if(null!=t)if(h&&t.forEach===h)t.forEach(e,r);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(e.call(r,t[i],i,t)===n)return}else for(var a in t)if(x.has(t,a)&&e.call(r,t[a],a,t)===n)return};x.map=x.collect=function(t,e,n){var r=[];return null==t?r:f&&t.map===f?t.map(e,n):(S(t,function(t,i,o){r.push(e.call(n,t,i,o))}),r)};var A="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),l&&t.reduce===l)return r&&(e=x.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(S(t,function(t,o,a){i?n=e.call(r,n,t,o,a):(n=t,i=!0)}),!i)throw new TypeError(A);return n},x.reduceRight=x.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return r&&(e=x.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var a=x.keys(t);o=a.length}if(S(t,function(s,u,c){u=a?a[--o]:--o,i?n=e.call(r,n,t[u],u,c):(n=t[u],i=!0)}),!i)throw new TypeError(A);return n},x.find=x.detect=function(t,e,n){var r;return P(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},x.filter=x.select=function(t,e,n){var r=[];return null==t?r:d&&t.filter===d?t.filter(e,n):(S(t,function(t,i,o){e.call(n,t,i,o)&&r.push(t)}),r)},x.reject=function(t,e,n){return x.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},x.every=x.all=function(t,e,r){e||(e=x.identity);var i=!0;return null==t?i:y&&t.every===y?t.every(e,r):(S(t,function(t,o,a){return(i=i&&e.call(r,t,o,a))?void 0:n}),!!i)};var P=x.some=x.any=function(t,e,r){e||(e=x.identity);var i=!1;return null==t?i:v&&t.some===v?t.some(e,r):(S(t,function(t,o,a){return i||(i=e.call(r,t,o,a))?n:void 0}),!!i)};x.contains=x.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):P(t,function(t){return t===e})},x.invoke=function(t,e){var n=s.call(arguments,2),r=x.isFunction(e);return x.map(t,function(t){return(r?e:t[e]).apply(t,n)})},x.pluck=function(t,e){return x.map(t,function(t){return t[e]})},x.where=function(t,e,n){return x.isEmpty(e)?n?void 0:[]:x[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},x.findWhere=function(t,e){return x.where(t,e,!0)},x.max=function(t,e,n){if(!e&&x.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&x.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return S(t,function(t,i,o){var a=e?e.call(n,t,i,o):t;a>r.computed&&(r={value:t,computed:a})}),r.value},x.min=function(t,e,n){if(!e&&x.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&x.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return S(t,function(t,i,o){var a=e?e.call(n,t,i,o):t;r.computed>a&&(r={value:t,computed:a})}),r.value},x.shuffle=function(t){var e,n=0,r=[];return S(t,function(t){e=x.random(n++),r[n-1]=r[e],r[e]=t}),r};var C=function(t){return x.isFunction(t)?t:function(e){return e[t]}};x.sortBy=function(t,e,n){var r=C(e);return x.pluck(x.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index<e.index?-1:1}),"value")};var O=function(t,e,n,r){var i={},o=C(null==e?x.identity:e);return S(t,function(e,a){var s=o.call(n,e,a,t);r(i,s,e)}),i};x.groupBy=function(t,e,n){return O(t,e,n,function(t,e,n){(x.has(t,e)?t[e]:t[e]=[]).push(n)})},x.countBy=function(t,e,n){return O(t,e,n,function(t,e){x.has(t,e)||(t[e]=0),t[e]++})},x.sortedIndex=function(t,e,n,r){n=null==n?x.identity:C(n);for(var i=n.call(r,e),o=0,a=t.length;a>o;){var s=o+a>>>1;i>n.call(r,t[s])?o=s+1:a=s}return o},x.toArray=function(t){return t?x.isArray(t)?s.call(t):t.length===+t.length?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:t.length===+t.length?t.length:x.keys(t).length},x.first=x.head=x.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:s.call(t,0,e)},x.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},x.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},x.rest=x.tail=x.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var b=function(t,e,n){return e&&x.every(t,x.isArray)?u.apply(n,t):(S(t,function(t){x.isArray(t)||x.isArguments(t)?e?a.apply(n,t):b(t,e,n):n.push(t)}),n)};x.flatten=function(t,e){return b(t,e,[])},x.without=function(t){return x.difference(t,s.call(arguments,1))},x.uniq=x.unique=function(t,e,n,r){x.isFunction(e)&&(r=n,n=e,e=!1);var i=n?x.map(t,n,r):t,o=[],a=[];return S(i,function(n,r){(e?r&&a[a.length-1]===n:x.contains(a,n))||(a.push(n),o.push(t[r]))}),o},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(t){var e=s.call(arguments,1);return x.filter(x.uniq(t),function(t){return x.every(e,function(e){return x.indexOf(e,t)>=0})})},x.difference=function(t){var e=u.apply(r,s.call(arguments,1));return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){for(var t=x.max(x.pluck(arguments,"length").concat(0)),e=Array(t),n=0;t>n;n++)e[n]=x.pluck(arguments,""+n);return e},x.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},x.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(_&&t.indexOf===_)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},x.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(g&&t.lastIndexOf===g)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},x.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=Array(r);r>i;)o[i++]=t,t+=n;return o};var I=function(){};x.bind=function(t,e){var n,r;if(T&&t.bind===T)return T.apply(t,s.call(arguments,1));if(!x.isFunction(t))throw new TypeError;return n=s.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(s.call(arguments)));I.prototype=t.prototype;var i=new I;I.prototype=null;var o=t.apply(i,n.concat(s.call(arguments)));return Object(o)===o?o:i}},x.partial=function(t){var e=s.call(arguments,1);return function(){return t.apply(this,e.concat(s.call(arguments)))}},x.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw Error("bindAll must be passed function names");return S(e,function(e){t[e]=x.bind(t[e],t)}),t},x.memoize=function(t,e){var n={};return e||(e=x.identity),function(){var r=e.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},x.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},x.defer=function(t){return x.delay.apply(x,[t,1].concat(s.call(arguments,1)))},x.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:new Date,a=null,o=t.apply(r,i)};return function(){var c=new Date;s||n.leading!==!1||(s=c);var p=e-(c-s);return r=this,i=arguments,0>=p?(clearTimeout(a),a=null,s=c,o=t.apply(r,i)):a||n.trailing===!1||(a=setTimeout(u,p)),o}},x.debounce=function(t,e,n){var r,i=null;return function(){var o=this,a=arguments,s=function(){i=null,n||(r=t.apply(o,a))},u=n&&!i;return clearTimeout(i),i=setTimeout(s,e),u&&(r=t.apply(o,a)),r}},x.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},x.wrap=function(t,e){return function(){var n=[t];return a.apply(n,arguments),e.apply(this,n)}},x.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},x.after=function(t,e){return function(){return 1>--t?e.apply(this,arguments):void 0}},x.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)x.has(t,n)&&e.push(n);return e},x.values=function(t){var e=[];for(var n in t)x.has(t,n)&&e.push(t[n]);return e},x.pairs=function(t){var e=[];for(var n in t)x.has(t,n)&&e.push([n,t[n]]);return e},x.invert=function(t){var e={};for(var n in t)x.has(t,n)&&(e[t[n]]=n);return e},x.functions=x.methods=function(t){var e=[];for(var n in t)x.isFunction(t[n])&&e.push(n);return e.sort()},x.extend=function(t){return S(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},x.pick=function(t){var e={},n=u.apply(r,s.call(arguments,1));return S(n,function(n){n in t&&(e[n]=t[n])}),e},x.omit=function(t){var e={},n=u.apply(r,s.call(arguments,1));for(var i in t)x.contains(n,i)||(e[i]=t[i]);return e},x.defaults=function(t){return S(s.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t};var E=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var i=c.call(t);if(i!=c.call(e))return!1;switch(i){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var a=t.constructor,s=e.constructor;if(a!==s&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(s)&&s instanceof s))return!1;n.push(t),r.push(e);var u=0,p=!0;if("[object Array]"==i){if(u=t.length,p=u==e.length)for(;u--&&(p=E(t[u],e[u],n,r)););}else{for(var h in t)if(x.has(t,h)&&(u++,!(p=x.has(e,h)&&E(t[h],e[h],n,r))))break;if(p){for(h in e)if(x.has(e,h)&&!u--)break;p=!u}}return n.pop(),r.pop(),p};x.isEqual=function(t,e){return E(t,e,[],[])},x.isEmpty=function(t){if(null==t)return!0;if(x.isArray(t)||x.isString(t))return 0===t.length;for(var e in t)if(x.has(t,e))return!1;return!0},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=k||function(t){return"[object Array]"==c.call(t)},x.isObject=function(t){return t===Object(t)},S(["Arguments","Function","String","Number","Date","RegExp"],function(t){x["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return!(!t||!x.has(t,"callee"))}),x.isFunction=function(t){return"function"==typeof t},x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!=+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return p.call(t,e)},x.noConflict=function(){return t._=e,this},x.identity=function(t){return t},x.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var F={escape:RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(t){x[t]=function(e){return null==e?"":(""+e).replace(F[t],function(e){return M[t][e]})}}),x.result=function(t,e){if(null==t)return void 0;var n=t[e];return x.isFunction(n)?n.call(t):n},x.mixin=function(t){S(x.functions(t),function(e){var n=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),N.call(this,n.apply(x,t))}})};var j=0;x.uniqueId=function(t){var e=++j+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(t,e,n){var r;n=x.defaults({},n,x.templateSettings);var i=RegExp([(n.escape||D).source,(n.interpolate||D).source,(n.evaluate||D).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(e,n,r,i,s){return a+=t.slice(o,s).replace(K,function(t){return"\\"+R[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(e)return r(e,x);var u=function(t){return r.call(this,t,x)};return u.source="function("+(n.variable||"obj")+"){\n"+a+"}",u},x.chain=function(t){return x(t).chain()};var N=function(t){return this._chain?x(t).chain():t};x.mixin(x),S(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];x.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],N.call(this,n)}}),S(["concat","join","slice"],function(t){var e=r[t];x.prototype[t]=function(){return N.call(this,e.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),function(t){var e=function(){"use strict";function e(){}function n(t,e){var n;for(n in t)Object.hasOwnProperty.call(t,n)&&e(n)}function r(t,e){return n(e,function(n){t[n]=e[n]}),t}function i(t,e){return n(e,function(n){void 0===t[n]&&(t[n]=e[n])}),t}function o(t,e,n,r,i,o,s){var u,c=(t-o)/i;for(u in e)e.hasOwnProperty(u)&&(e[u]=a(n[u],r[u],w[s[u]],c));return e}function a(t,e,n,r){return t+(e-t)*n(r)}function s(t,e,r){var i=p.prototype.filter;n(i,function(n){i[n][e]&&i[n][e].apply(t,r)})}function u(t,e,n,r,i,a,u,c){h=e+n,f=Math.min(_(),h),l=f>=h,t.isPlaying()&&!l?(g(t._timeoutHandler,y),k.length=0,k.push(r),k.push(i),k.push(a),k.push(u),s(t,"beforeTween",k),o(f,r,i,a,n,e,u),s(t,"afterTween",k),c(r)):l&&(c(a),t.stop(!0))}function c(t,e){var r={};return"string"==typeof e?n(t,function(t){r[t]=e}):n(t,function(t){r[t]||(r[t]=e[t]||m)}),r}function p(t){var e=t||{};return this.data={},this._currentState=e.initialState||{},this._timeoutHandler=null,this}var h,f,l,m="linear",d=500,y=1e3/60,v=Date.now?Date.now:function(){return+new Date},_=v,g=function(){var t;return t="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout}(),k=[];p.prototype.tween=function(t){if(!this._isTweening){this._pausedAtTime=null,this._step=t.step||e,this._callback=t.callback||e,this._targetState=t.to||{},this._duration=t.duration||d,this._currentState=t.from||this.get(),this._timestamp=_();var n=this._currentState,o=this._targetState;i(n,o),i(o,n),this._easing=c(n,t.easing||m);var a=this._originalState=r({},n);return s(this,"tweenCreated",[n,a,o,this._easing]),this.resume()}},p.prototype.get=function(){return r({},this._currentState)},p.prototype.set=function(t){this._currentState=t},p.prototype.stop=function(t){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=null,t&&(r(this._currentState,this._targetState),s(this,"afterTweenEnd",[this._currentState,this._originalState,this._targetState,this._easing]),this._callback.call(this._currentState,this._currentState)),this},p.prototype.pause=function(){return this._pausedAtTime=_(),this._isPaused=!0,this},p.prototype.resume=function(){this._isPaused&&(this._timestamp+=_()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0;var t=this;return this._timeoutHandler=function(){u(t,t._timestamp,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step)},this._timeoutHandler(),this},p.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},p.prototype.filter={},r(p,{now:_,each:n,tweenProps:o,tweenProp:a,applyFilter:s,shallowCopy:r,defaults:i,composeEasingObject:c}),p.prototype.formula={linear:function(t){return t}};var w=p.prototype.formula;return"object"==typeof exports?module.exports=p:"function"==typeof define&&define.amd?define(function(){return p}):void 0===t.Tweenable&&(t.Tweenable=p),p}();(function(){e.shallowCopy(e.prototype.formula,{easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return 1>(t/=.5)?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return 1>(t/=.5)?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return 1>(t/=.5)?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInQuint:function(t){return Math.pow(t,5)},easeOutQuint:function(t){return Math.pow(t-1,5)+1},easeInOutQuint:function(t){return 1>(t/=.5)?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){return 0===t?0:1===t?1:1>(t/=.5)?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return 1>(t/=.5)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return 1>(t/=.5)?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin(2*(6*t-1)*Math.PI/2)+1},swingFromTo:function(t){var e=1.70158;return 1>(t/=.5)?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?2-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},easeFromTo:function(t){return 1>(t/=.5)?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)}})})(),function(){function t(t,n,r,i,o){return e.tweenProps(i,n,t,r,1,0,o)}var n=[];e.interpolate=function(r,i,o,a){var s=new e,u=e.shallowCopy({},r),c=e.composeEasingObject(r,a||"linear");return n[0]=u,n[1]=r,n[2]=i,n[3]=c,e.applyFilter(s,"tweenCreated",n),e.applyFilter(s,"beforeTween",n),n[0]=t(r,u,i,o,c),e.applyFilter(s,"afterTween",n),n[0]}}(),function(t){function e(t,e){P.length=0;var n,r=t.length;for(n=0;r>n;n++)P.push("_"+e+"_"+n);return P}function n(t){var e=t.match(k);return 1===e.length&&e.unshift(""),e.join(A)}function r(e){t.each(e,function(t){var n=e[t];"string"==typeof n&&n.match(S)&&(e[t]=i(n))})}function i(t){return u(S,t,o)}function o(t){var e=a(t);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function a(t){return t=t.replace(/#/,""),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),C[0]=s(t.substr(0,2)),C[1]=s(t.substr(2,2)),C[2]=s(t.substr(4,2)),C}function s(t){return parseInt(t,16)}function u(t,e,n){var r=e.match(t),i=e.replace(t,A);if(r)for(var o,a=r.length,s=0;a>s;s++)o=r.shift(),i=i.replace(A,n(o));return i}function c(t){return u(T,t,p)}function p(t){for(var e=t.match(w),n=e.length,r=t.match(x)[0],i=0;n>i;i++)r+=parseInt(e[i],10)+",";return r=r.slice(0,-1)+")"}function h(r){var i={};return t.each(r,function(t){var o=r[t];if("string"==typeof o){var a=v(o);i[t]={formatString:n(o),chunkNames:e(a,t)}}}),i}function f(e,n){t.each(n,function(t){for(var r=e[t],i=v(r),o=i.length,a=0;o>a;a++)e[n[t].chunkNames[a]]=+i[a];delete e[t]})}function l(e,n){t.each(n,function(t){var r=e[t],i=m(e,n[t].chunkNames),o=d(i,n[t].chunkNames);r=y(n[t].formatString,o),e[t]=c(r)})}function m(t,e){for(var n,r={},i=e.length,o=0;i>o;o++)n=e[o],r[n]=t[n],delete t[n];return r}function d(t,e){O.length=0;for(var n=e.length,r=0;n>r;r++)O.push(t[e[r]]);return O}function y(t,e){for(var n=t,r=e.length,i=0;r>i;i++)n=n.replace(A,+e[i].toFixed(4));return n}function v(t){return t.match(w)}function _(e,n){t.each(n,function(t){for(var r=n[t],i=r.chunkNames,o=i.length,a=e[t].split(" "),s=a[a.length-1],u=0;o>u;u++)e[i[u]]=a[u]||s;delete e[t]})}function g(e,n){t.each(n,function(t){for(var r=n[t],i=r.chunkNames,o=i.length,a="",s=0;o>s;s++)a+=" "+e[i[s]],delete e[i[s]];e[t]=a.substr(1)})}var k=/([^\-0-9\.]+)/g,w=/[0-9.\-]+/g,T=RegExp("rgb\\("+w.source+/,\s*/.source+w.source+/,\s*/.source+w.source+"\\)","g"),x=/^.*\(/,S=/#([0-9]|[a-f]){3,6}/g,A="VAL",P=[],C=[],O=[];t.prototype.filter.token={tweenCreated:function(t,e,n){r(t),r(e),r(n),this._tokenData=h(t)},beforeTween:function(t,e,n,r){_(r,this._tokenData),f(t,this._tokenData),f(e,this._tokenData),f(n,this._tokenData)},afterTween:function(t,e,n,r){l(t,this._tokenData),l(e,this._tokenData),l(n,this._tokenData),g(r,this._tokenData)}}}(e)}(this),function(){function t(t,e,n,r){n.each(t._events[e],function(e){e(t,r)})}function e(t,e){var n=[];e.each(t._actors,function(t){n.push(t.getEnd())}),t._animationLength=Math.max.apply(Math,n)}function n(){}var r=[],i=function(n,r,i){"use strict";function o(t,e){var n=Math.floor(e/t._animationLength);return n}function a(t){return k()-t._loopTimestamp}function s(t,e){return e>=t._timesToIterate&&-1!==t._timesToIterate}function u(e,n){s(e,n)&&(e.stop(),t(e,"animationComplete",r))}function c(t,e,n){var r;return r=s(t,n)?t._animationLength:e%t._animationLength}function p(t,e){var n=o(t,e),r=c(t,e,n);t.update(r),u(t,n)}function h(t){p(t,a(t))}function f(t){var e=function(){f(t),h(t)};t._loopId=t._scheduleUpdate.call?t._scheduleUpdate.call(_,e,g):setTimeout(e,g)}function l(){return _.requestAnimationFrame||_.webkitRequestAnimationFrame||_.oRequestAnimationFrame||_.msRequestAnimationFrame||_.mozCancelRequestAnimationFrame&&_.mozRequestAnimationFrame||_.setTimeout}function m(){return _.cancelAnimationFrame||_.webkitCancelAnimationFrame||_.oCancelAnimationFrame||_.msCancelAnimationFrame||_.mozCancelRequestAnimationFrame||_.clearTimeout}function d(t){t._cancelUpdate.call?t._cancelUpdate.call(_,t._loopId):clearTimeout(t._loopId)}function y(t){return this.config=t||{},this.context=this.config.context||{},this._actors={},this._playState=w.STOPPED,this._events={animationComplete:[],playStateChange:[],play:[],pause:[],stop:[],beforeUpdate:[],afterUpdate:[],addActor:[],removeActor:[]},this._timesToIterate=-1,this._animationLength=0,this._loopId=null,this._loopTimestamp=null,this._pausedAtTime=null,this._lastUpdatedMillisecond=0,r.extend(this.config,t),this._scheduleUpdate=l(),this._cancelUpdate=m(),r.each(this._contextInitHook,function(t){t.call(this)},this),this}var v=Function,_=new v("return this")(),g=1e3/60,k=i.now,w={STOPPED:"stopped",PAUSED:"paused",PLAYING:"playing"};y.Tweenable=i,y._=r,y.prototype._contextInitHook={},y.prototype.addActor=function(n){return r.contains(this._actors,n)||(n.context()||n.context(this.context),n.kapi=this,this._actors[n.id]=n,e(this,r),n.setup(),t(this,"addActor",r,n)),this},y.prototype.getActor=function(t){return this._actors[t]},y.prototype.getActorIds=function(){return r.pluck(this._actors,"id")},y.prototype.getAllActors=function(){return r.clone(this._actors)},y.prototype.removeActor=function(n){return delete this._actors[n.id],delete n.kapi,n.teardown(),e(this,r),t(this,"removeActor",r,n),this},y.prototype.play=function(e){return d(this),this._playState===w.PAUSED?this._loopTimestamp+=k()-this._pausedAtTime:this._loopTimestamp=k(),this._timesToIterate=e||-1,this._playState=w.PLAYING,f(this),t(this,"playStateChange",r),t(this,"play",r),this},y.prototype.playFrom=function(t,e){return this.play(e),this._loopTimestamp=k()-t,this},y.prototype.playFromCurrent=function(t){return this.playFrom(this._lastUpdatedMillisecond,t)},y.prototype.pause=function(){return this._playState===w.PAUSED?this:(this._playState=w.PAUSED,d(this),this._pausedAtTime=k(),t(this,"playStateChange",r),t(this,"pause",r),this)},y.prototype.stop=function(){return this._playState=w.STOPPED,d(this),r.each(this._actors,function(t){t.stop()}),t(this,"playStateChange",r),t(this,"stop",r),this},y.prototype.isPlaying=function(){return this._playState===w.PLAYING},y.prototype.animationLength=function(){return this._animationLength},y.prototype.lastPositionUpdated=function(){return this._lastUpdatedMillisecond/this._animationLength},y.prototype.actorCount=function(){return r.size(this._actors)},y.prototype.update=function(e){return void 0===e&&(e=this._lastUpdatedMillisecond),t(this,"beforeUpdate",r),r.each(this._actors,function(t){t.updateState(e),"function"==typeof t.update&&t.update(t.context(),t.get())}),this._lastUpdatedMillisecond=e,t(this,"afterUpdate",r),this},y.prototype.on=function(t,e){return this._events[t]?(this._events[t].push(e),this):void 0},y.prototype.off=function(t,e){return this._events[t]?(this._events[t]=e?r.without(this._events[t],e):[],this):void 0},y.prototype.exportTimeline=function(){var t={duration:this._animationLength,actors:[]};return r.each(this._actors,function(e){t.actors.push(e.exportTimeline())},this),t},y.prototype.importTimeline=function(t){r.each(t.actors,function(t){var e=new y.Actor;e.importTimeline(t),this.addActor(e)},this)},y.util={},n.Kapi=y};r.push(function(r){"use strict";function i(t){return t.sort(function(t,e){return t-e})}function o(t,e){var n,r=t._timelinePropertyCacheIndex,i=r.length;for(n=1;i>n;n++)if(r[n]>=e)return n-1;return-1}function a(t){y.each(t._propertyTracks,function(e,n){t._propertyTracks[n]=y.sortBy(t._propertyTracks[n],function(t){return t.millisecond})})}function s(t){y.each(t._timelinePropertyCaches,function(e,n){var r=u(t,+n);y.defaults(e,r)})}function u(t,e){var n={};return y.each(t._propertyTracks,function(t,r){var i=null;if(y.find(t,function(t){return t.millisecond>e?n[r]=i:t.millisecond===e&&(n[r]=t),i=t,!!n[r]}),!n[r]){var o=y.last(t);o&&e>=o.millisecond&&(n[r]=o)}}),n}function c(t){y.each(t._propertyTracks,function(t){y.each(t,function(e,n){e.linkToNext(t[n+1])})})}function p(t,e,n){return y.find(t._propertyTracks[e],function(t){return t.millisecond===n})}function h(e){e._timelinePropertyCaches={},y.each(e._keyframeProperties,function(t){e._timelinePropertyCaches[t.millisecond]||(e._timelinePropertyCaches[t.millisecond]={}),e._timelinePropertyCaches[t.millisecond][t.name]=t},e),e._timelinePropertyCacheIndex=y.keys(e._timelinePropertyCaches),y.each(e._timelinePropertyCacheIndex,function(t,n){e._timelinePropertyCacheIndex[n]=+t},e),i(e._timelinePropertyCacheIndex),s(e),c(e),e.kapi&&t(e.kapi,"timelineModified",y)}function f(t){a(t),h(t),e(t.kapi,y)}var l="linear",m=r.Kapi,d=m.Tweenable,y=m._;m.Actor=function(t){return t=t||{},d.call(this),y.extend(this,{_propertyTracks:{},_timelinePropertyCaches:{},_timelinePropertyCacheIndex:[],_keyframeProperties:{},id:y.uniqueId(),setup:t.setup||n,update:t.update||n,teardown:t.teardown||n,data:{}}),t.context&&this.context(t.context),this};var v=m.Actor,_=function(){};_.prototype=d.prototype,v.prototype=new _,v.prototype.context=function(t){return t&&(this._context=t),this._context},v.prototype.keyframe=function(t,n,r){var i;return r=r||l,"string"==typeof r&&(i=r,r={},y.each(n,function(t,e){r[e]=i})),y.each(n,function(t,e){r[e]=r[e]||l}),y.each(n,function(e,n){var i=new m.KeyframeProperty(this,t,n,e,r[n]);this._keyframeProperties[i.id]=i,this._propertyTracks[n]||(this._propertyTracks[n]=[]),this._propertyTracks[n].push(i),a(this)},this),this.kapi&&e(this.kapi,y),h(this),this},v.prototype.getKeyframeProperty=function(t,e){return this._propertyTracks[t]&&this._propertyTracks[t][e]?this._propertyTracks[t][e]:void 0},v.prototype.modifyKeyframeProperty=function(t,e,n){return this._propertyTracks[t]&&this._propertyTracks[t][e]&&this._propertyTracks[t][e].modifyWith(n),f(this),this},v.prototype.getTrackNames=function(){return y.keys(this._propertyTracks)},v.prototype.getTrackLength=function(t){return this._propertyTracks[t]?this._propertyTracks[t].length:void 0},v.prototype.copyProperties=function(t,e){var n={},r={};return y.each(this._propertyTracks,function(t,i){var o=p(this,i,e);o&&(n[i]=o.value,r[i]=o.easing)},this),this.keyframe(t,n,r),this},v.prototype.wait=function(t){var e=this.getEnd();if(e>=t)return this;var n=this.getEnd(),r=u(this,this.getEnd()),i={},o={};return y.each(r,function(t,e){i[e]=t.value,o[e]=t.easing}),this.removeKeyframe(n),this.keyframe(n,i,o),this.keyframe(t,i,o),this},v.prototype.getStart=function(t){var e=[];return t?e.push(this._propertyTracks[t][0].millisecond):y.each(this._propertyTracks,function(t){t.length&&e.push(t[0].millisecond)}),0===e.length&&(e=[0]),Math.min.apply(Math,e)},v.prototype.getEnd=function(t){var e=0,n=this._propertyTracks;return t&&(n={},n[t]=this._propertyTracks[t]),y.each(n,function(t){if(t.length){var n=y.last(t).millisecond;n>e&&(e=n)}},this),e},v.prototype.getLength=function(t){return this.getEnd(t)-this.getStart(t)},v.prototype.hasKeyframeAt=function(t,e){var n=this._propertyTracks;if(e){if(!y.has(n,e))return!1;n=y.pick(n,e)}return void 0!==y.find(n,function(e,n){var r=p(this,n,t);return void 0!==r},this)},v.prototype.moveKeyframe=function(t,e){return!this.hasKeyframeAt(t)||this.hasKeyframeAt(e)?!1:(y.each(this._propertyTracks,function(n,r){var i=p(this,r,t);i&&i.modifyWith({millisecond:e})},this),f(this),!0)},v.prototype.modifyKeyframe=function(t,e,n){return n=n||{},y.each(this._propertyTracks,function(r,i){var o=p(this,i,t);o&&o.modifyWith({value:e[i],easing:n[i]})},this),this},v.prototype.removeKeyframe=function(t){return y.each(this._propertyTracks,function(e){var n=-1,r=!1;if(y.find(e,function(e){return n++,r=t===e.millisecond}),r){var i=e.splice(n,1)[0];i&&delete this._keyframeProperties[i.id]}},this),this.kapi&&e(this.kapi,y),h(this),this},v.prototype.removeAllKeyframeProperties=function(){return y.each(this._propertyTracks,function(t){t.length=0},this),this._keyframeProperties={},this.removeKeyframe(0)},v.prototype.updateState=function(t){var e=this.getStart(),r=this.getEnd();if(t=Math.min(r,t),t>=e){var i=o(this,t),a=this._timelinePropertyCaches[this._timelinePropertyCacheIndex[i]],s={};y.each(a,function(e,r){e&&(this._beforeKeyframePropertyInterpolate!==n&&this._beforeKeyframePropertyInterpolate(e),s[r]=e.getValueAt(t),this._afterKeyframePropertyInterpolate!==n&&this._afterKeyframePropertyInterpolate(e,s))},this),this.set(s)}return this},v.prototype._beforeKeyframePropertyInterpolate=n,v.prototype._afterKeyframePropertyInterpolate=n,v.prototype.exportTimeline=function(){var t={start:this.getStart(),end:this.getEnd(),trackNames:this.getTrackNames(),propertyTracks:{}};return y.each(this._propertyTracks,function(e,n){var r=t.propertyTracks[n]=[];y.each(e,function(t){r.push(t.exportPropertyData())
})}),t},v.prototype.importTimeline=function(t){y.each(t.propertyTracks,function(t){y.each(t,function(t){var e={};e[t.name]=t.value,this.keyframe(t.millisecond,e,t.easing)},this)},this)}}),r.push(function(t){"use strict";var e="linear",n=t.Kapi,r=n.Tweenable,i=n._,o=r.interpolate;n.KeyframeProperty=function(t,n,r,o,a){return this.id=i.uniqueId("keyframeProperty_"),this.ownerActor=t,this.millisecond=n,this.name=r,this.value=o,this.easing=a||e,this.nextProperty=null,this};var a=n.KeyframeProperty;a.prototype.modifyWith=function(t){var e={};i.each(["millisecond","easing","value"],function(n){e[n]=t[n]===void 0?this[n]:t[n]},this),i.extend(this,e)},a.prototype.linkToNext=function(t){this.nextProperty=t||null},a.prototype.getValueAt=function(t){var e,n={},r={};if(this.nextProperty){n[this.name]=this.value,r[this.name]=this.nextProperty.value;var i=this.nextProperty.millisecond-this.millisecond,a=(t-this.millisecond)/i;e=o(n,r,a,this.nextProperty.easing)[this.name]}else e=this.value;return e},a.prototype.exportPropertyData=function(){return{millisecond:this.millisecond,name:this.name,value:this.value,easing:this.easing}}}),r.push(function(e){"use strict";function n(t,e,n){return n!==void 0&&(t[e]=n,t.style[e]=n+"px"),t[e]}function r(t){t.config.clearOnUpdate&&t.canvas.clear()}function i(e){t(e,"beforeDraw",u);var n,r=e.canvas._drawOrder.length;if(e.canvas._drawOrderSorter){var i=u.sortBy(e.canvas._canvasActors,e.canvas._drawOrderSorter);n=u.pluck(i,"id")}else n=e.canvas._drawOrder;var o,a,s;for(s=0;r>s;s++)o=e.canvas._canvasActors[n[s]],a=o.context(),o.draw(a,o.get());return t(e,"afterDraw",u),e}function o(t,e){e instanceof s.CanvasActor&&(t.canvas._drawOrder.push(e.id),t.canvas._canvasActors[e.id]=e)}function a(t,e){e instanceof s.CanvasActor&&(t.canvas._drawOrder=u.without(t.canvas._drawOrder,e.id),delete t.canvas._canvasActors[e.id])}var s=e.Kapi,u=s._;s.prototype._contextInitHook.canvas=function(){this.context.getContext&&(this.canvas=new c(this),this.config.clearOnUpdate=!0,u.extend(this._events,{beforeDraw:[],afterDraw:[]}),u.each(["Height","Width"],function(t){var e=t.toLowerCase();this.config[e]&&(this.canvas[e](this.config[e]),delete this.config[t])},this),this.on("afterUpdate",i),this.on("addActor",o),this.on("removeActor",a),this.on("beforeDraw",r))},s.CanvasRenderer=function(t){return this.kapi=t,this._drawOrder=[],this._drawOrderSorter=null,this._canvasActors={},this};var c=s.CanvasRenderer;c.prototype.height=function(t){return n(this.kapi.context,"height",t)},c.prototype.width=function(t){return n(this.kapi.context,"width",t)},c.prototype.clear=function(){return this.kapi.context.getContext&&this.context().clearRect(0,0,this.width(),this.height()),this.kapi},c.prototype.context=function(){return this.kapi.context.getContext("2d")},c.prototype.moveActorToLayer=function(t,e){return this._drawOrder.length>e?(this._drawOrder=u.without(this._drawOrder,t.id),this._drawOrder.splice(e,0,t.id),t):void 0},c.prototype.setOrderFunction=function(t){return this._drawOrderSorter=t,this.kapi},c.prototype.unsetOrderFunction=function(){return this._drawOrderSorter=null,this.kapi}}),r.push(function(t){"use strict";function e(){}var r=t.Kapi;r._,r.CanvasActor=function(t){return r.Actor.call(this,t),t=t||{},this.draw=t.draw||n,this};var i=r.CanvasActor;e.prototype=r.Actor.prototype,i.prototype=new e,i.prototype.context=function(t){return t&&(this._context=t),this._context&&this._context.getContext("2d")},i.prototype.moveToLayer=function(t){return this.kapi.canvas.moveActorToLayer(this,t)}}),r.push(function(t){"use strict";function e(t,e,n){t.style[e]=n}function n(t){return s.contains(c,t)}function r(t,e){var n=[];return s.each(t,function(t){e[t]&&n.push(t+"("+e[t]+")")}),n.join(" ")}function i(t,n){s.each(u,function(r){e(t,r,n)})}function o(){}var a=t.Kapi,s=a._,u=["transform","webkitTransform","MozTransform","oTransform","msTransform"],c=["translateX","translateY","scale","scaleX","scaleY","rotate","skewX","skewY"];a.DOMActor=function(t,e){a.Actor.call(this,e),this._context=t;var n=this.getCSSName();return this._context.className.match(n)||(this._context.className+=" "+n),this._transformOrder=c.slice(0),delete this.update,delete this.teardown,this};var p=a.DOMActor;o.prototype=a.Actor.prototype,p.prototype=new o,p.prototype.update=function(t,o){var a=s.keys(o),u=s.filter(a,n),c=s.reject(a,n),p=s.pick(o,c);if(u.length){var h=s.pick(o,u),f=r(this._transformOrder,h);i(t,f)}else o.transform&&i(t,o.transform);s.each(p,function(n,r){e(t,r,n)},this)},p.prototype._beforeKeyframePropertyInterpolate=function(t){if("transform"===t.name){var e=t.value,n=t.nextProperty;n&&e.match(/3d\(/g)&&(t.value=e.replace(/3d\(/g,"__THREED__"),n.value=n.value.replace(/3d\(/g,"__THREED__"))}},p.prototype._afterKeyframePropertyInterpolate=function(t,e){if("transform"===t.name){var n=t.value,r=t.nextProperty;if(r&&n.match(/__THREED__/g)){t.value=n.replace(/__THREED__/g,"3d("),r.value=r.value.replace(/__THREED__/g,"3d(");var i=t.name;e[i]=e[i].replace(/__THREED__/g,"3d(")}}},p.prototype.teardown=function(){var t=this._context.className.match(/\S+/g),e=s.without(t,this.getCSSName());this._context.className=e},p.prototype.getCSSName=function(){return"actor-"+this.id},p.prototype.setTransformOrder=function(t){var e=s.reject(t,n);if(e.length)throw"Unknown or unsupported transform functions: "+e.join(", ");return this._transformOrder=s.uniq(t),this}}),r.push(function(t){"use strict";function e(t){return 0===t%1}function n(t,e,n,i,o){var a=t.getTrackNames(),s=[];i?s.push(_(t,n)):A.each(a,function(e){s.push(v(t,n,e))});var u=[];return i?u.push(r(s[0],e,o)):A.each(a,function(t,n){u.push(r(s[n],e+"-"+t,o))}),u=u.join("\n")}function r(t,e,n){n=n||["w3"];var r=[];return A.each(n,function(n){var o=F(E,[b[n],e,t]),a=i(o,n);r.push(a)}),r.join("\n")}function i(t,e){var n=RegExp(C,"g"),r=b[e]+"transform",i=RegExp(O,"g"),o=b[e],a=t.replace(i,o).replace(n,r);return a}function o(t,e,n,r,i,o){r=r||["w3"];var s,u=[];A.each(r,function(r){s=a(t,e,r,n,i,o),u.push(s)});var c=F(M,[e,u.join("\n")]);return c}function a(t,e,n,r,i,o){var a=[],m=b[n];return a.push(s(t,e,m,r)),a.push(u(t,m)),a.push(c(t,m)),a.push(p(m)),a.push(h(m)),a.push(f(t.kapi,m,i)),o&&a.push(l(m)),a.join("\n")}function s(t,e,n,r){var i=F("  %sanimation-name:",[n]),o=t.getTrackNames();return r?i+=F(" %s-keyframes;",[e]):(A.each(o,function(t){i+=F(" %s-%s-keyframes,",[e,t])}),i=i.slice(0,i.length-1),i+=";"),i}function u(t,e){return F("  %sanimation-duration: %sms;",[e,t.getEnd()-t.getStart()])}function c(t,e){return F("  %sanimation-delay: %sms;",[e,t.getStart()])}function p(t){return F("  %sanimation-fill-mode: forwards;",[t])}function h(t){return F("  %sanimation-timing-function: linear;",[t])}function f(t,e,n){var r;r=n?n:-1===t._timesToIterate?"infinite":t._timesToIterate;var i="  %sanimation-iteration-count: %s;";return F(i,[e,r])}function l(t){return F("  %stransform-origin: 0 0;",[t])}function m(t){var e=!1;if(t.nextProperty){var n,r=t.nextProperty.easing.split(" "),i=0,o=r.length,a=r[0];for(i;o>i;i++){if(n=r[i],!I[n]||a!==n){e=!1;break}e=!0,a=n}}return e}function d(t){return A.any(t._keyframeProperties,m)}function y(t,n,r){var i=[],o=t.name;"transform"===t.name&&(o=C);var a=I[t.nextProperty.easing.split(" ")[0]],s=F("cubic-bezier(%s)",[a]),u=e(n)?n:n.toFixed(2),c=e(r)?r:r.toFixed(2);return i.push(F("  %s% {%s:%s;%sanimation-timing-function: %s;}",[u,o,t.value,O,s])),i.push(F("  %s% {%s:%s;}",[c,o,t.nextProperty.value])),i.join("\n")}function v(t,e,n){var r=[],i=t.getEnd(),o=t.getStart(),a=t.getLength(),s=g(t,n,o);s&&r.push(s);var u=!1;A.each(t._propertyTracks[n],function(n){var i,s,c,p=w(n,o,a),h=n.nextProperty;if(h){i=w(h,o,a);var f=i-p;s=Math.floor(f/100*e)||1,c=f/s}else i=100,s=1,c=1;var l;if(m(n)){if(l=y(n,p,i),u){var d=r.length,v=r[d-1],_=v.split("\n")[0];r[d-1]=_}u=!0}else l=T(t,s,c,o,p,n),u&&l.shift(),l.length&&(l=l.join("\n")),u=!1;l.length&&r.push(l)});var c=k(t,n,o,i);return c&&r.push(c),r.join("\n")}function _(t,e){return T(t,e+1,100/e,0,0).join("\n")}function g(t,e,n){var r=t._propertyTracks[e][0];if(r.millisecond!==n){var i=T(t,1,1,r.millisecond,0,r);return i.join("\n")}}function k(t,e,n,r){var i=A.last(t._propertyTracks[e]);if(i.millisecond!==r){var o=T(t,1,1,n,100,i);return o.join("\n")}}function w(t,e,n){return 100*((t.millisecond-e)/n)}function T(t,e,n,r,i,o){var a,s,u,c=[],p=t.getLength();for(a=0;e>a;a++)s=i+a*n,t.updateState(s/100*p+r),u=+s.toFixed(2)+"% ",o?c.push("  "+u+x(t,o.name)):c.push("  "+u+x(t));return c}function x(t,e){var n,r=["{"];if(e){n={};var i=t.get()[e];i!==void 0&&(n[e]=i)}else n=t.get();var o;return A.each(n,function(t,e){o=t;var n=e;"transform"===e&&(n=C),r.push(n+":"+o+";")}),r.push("}"),r.join("")}var S=t.Kapi,A=S._,P=30,C="TRANSFORM",O="VENDOR",b=S.util.VENDOR_PREFIXES={microsoft:"-ms-",mozilla:"-moz-",opera:"-o-",w3:"",webkit:"-webkit-"},I={linear:".25,.25,.75,.75",easeInQuad:".55,.085,.68,.53",easeInCubic:".55,.055,.675,.19",easeInQuart:".895,.03,.685,.22",easeInQuint:".755,.05,.855,.06",easeInSine:".47,0,.745,.715",easeInExpo:".95,.05,.795,.035",easeInCirc:".6,.04,.98, .335",easeOutQuad:".25,.46,.45,.94",easeOutCubic:".215,.61,.355,1",easeOutQuart:".165,.84,.44,1",easeOutQuint:".23,1,.32,1",easeOutSine:".39,.575,.565,1",easeOutExpo:".19,1,.22,1",easeOutCirc:".075,.82,.165,1",easeInOutQuad:".455,.03,.515,.955",easeInOutCubic:".645,.045,.355,1",easeInOutQuart:".77,0,.175,1",easeInOutQuint:".86,0.07,1",easeInOutSine:".445,.05,.55,.95",easeInOutExpo:"1,0,0,1",easeInOutCirc:".785,.135,.15,.86"},E=["@%skeyframes %s-keyframes {","%s","}"].join("\n"),M=[".%s {","%s","}"].join("\n");S.prototype.toCSS=function(t){t=t||{};var e=[];return A.each(this.getAllActors(),function(n){n instanceof S.DOMActor&&e.push(n.toCSS(t))}),e.join("\n")},S.Actor.prototype.toCSS=function(t){t=t||{};var e=[],r=t.name||this.getCSSName(),i=t.fps||P,a=Math.ceil(this.kapi.animationLength()/1e3*i),s=!d(this),u=o(this,r,s,t.vendors,t.iterations,t.isCentered),c=n(this,r,a,s,t.vendors);return e.push(u),e.push(c),e.join("\n")};var F=S.util.printf=function(t,e){var n=t;return A.each(e,function(t){n=n.replace("%s",t)}),n}}),r.push(function(e){"use strict";function n(){var t=document.body.style;return"-webkit-animation"in t?"webkit":"-moz-animation"in t?"mozilla":"-ms-animation"in t?"microsoft":"-o-animation"in t?"opera":"animation"in t?"w3":""}function r(t){var e=document.createElement("style"),n="rekapi-"+c++;return e.id=n,e.innerHTML=t,document.head.appendChild(e),e}function i(t){var e=document.createElement("div");a.each(t.getAllActors(),function(t){if(t instanceof o.DOMActor){var n=t._context,r=n.parentElement;r.replaceChild(e,n),r.replaceChild(n,e)}}),e=null}var o=e.Kapi,a=o._,s=o.Tweenable.now,u=250;o.prototype._contextInitHook.cssAnimate=function(){this.css=new p(this)};var c=0;o.CSSRenderer=function(t){if(!o.DOMActor&&!o.prototype.toCSS)throw"CSSRenderer requires the DOMActor and toCSS modules.";return this.kapi=t,this._playTimestamp=null,this._cachedCSS=null,this._styleElement=null,this._stopSetTimeoutHandle=null,t.on("timelineModified",a.bind(function(){this._cachedCSS=null},this)),this};var p=o.CSSRenderer;p.prototype.canAnimateWithCSS=function(){return!!n()},p.prototype.prerender=function(t,e){return this._cachedCSS=this.kapi.toCSS({vendors:[n()],fps:e,iterations:t})},p.prototype.play=function(e){this.isPlaying()&&this.stop();var n=this._cachedCSS||this.prerender.apply(this,arguments);if(this._styleElement=r(n),this._playTimestamp=s(),navigator.userAgent.match(/Presto/)&&i(this.kapi),e){var o=e*this.kapi.animationLength();this._stopSetTimeoutHandle=setTimeout(a.bind(this.stop,this,!0),o+u)}t(this.kapi,"play",a)},p.prototype.stop=function(e){if(this.isPlaying()){clearTimeout(this._stopSetTimeoutHandle),this._styleElement.innerHTML="",document.head.removeChild(this._styleElement),this._styleElement=null;var n;n=e?this.kapi.animationLength():(s()-this._playTimestamp)%this.kapi.animationLength(),this.kapi.update(n),t(this.kapi,"stop",a)}},p.prototype.isPlaying=function(){return!!this._styleElement}});var o=function(t,e){"use strict";var n=e?{}:t,o=e&&e.underscore?e.underscore:n._,a=e&&e.Tweenable?e.Tweenable:n.Tweenable;return i(n,o,a),o.each(r,function(t){t(n)}),n.Kapi};if("function"==typeof define&&define.amd){var a="undefined"!=typeof _;define(["shifty","underscore"],function(t,e){var n=null!=e,r={Tweenable:t,underscore:n?e:_},i=o({},r);return!a&&n&&(this._=void 0),i})}else o(this)}(this);