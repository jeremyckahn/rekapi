{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fb4ffbf442e869119c41","webpack:///./src/rekapi.js","webpack:///./~/lodash/dist/lodash.js","webpack:///../shifty/dist/shifty.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/actor.js","webpack:///./src/keyframe-property.js","webpack:///(webpack)/buildin/module.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./src/renderers/canvas.js","webpack:///./src/renderers/dom.js","webpack:///./src/main.js","webpack:///../shifty/~/object-assign/index.js","webpack:///../shifty/src/easing-functions.js","webpack:///../shifty/src/tweenable.js"],"names":["UPDATE_TIME","DEFAULT_EASING","fireEvent","rekapi","eventName","data","_events","forEach","handler","invalidateAnimationLength","_animationLengthValid","determineCurrentLoopIteration","timeSinceStart","animationLength","getAnimationLength","Math","floor","calculateTimeSinceStart","now","_loopTimestamp","isAnimationComplete","currentLoopIteration","_timesToIterate","updatePlayState","stop","calculateLoopPosition","forMillisecond","updateToMillisecond","currentIteration","loopPosition","_loopPosition","keyframeResetList","_latestIteration","lookupObject","name","_actors","fnKeyframes","where","actor","_keyframeProperties","lastFnKeyframe","last","hasFired","invoke","concat","update","each","fnKeyframe","updateToCurrentMillisecond","tick","_loopId","_scheduleUpdate","call","global","_updateFn","setTimeout","getUpdateMethod","requestAnimationFrame","webkitRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","mozCancelRequestAnimationFrame","mozRequestAnimationFrame","getCancelMethod","cancelAnimationFrame","webkitCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","cancelLoop","_cancelUpdate","STOPPED","PAUSED","PLAYING","rendererBootstrappers","Rekapi","context","_playState","sort","animationComplete","playStateChange","play","pause","beforeUpdate","afterUpdate","addActor","removeActor","beforeAddKeyframeProperty","addKeyframeProperty","removeKeyframeProperty","removeKeyframePropertyComplete","beforeRemoveKeyframeProperty","addKeyframePropertyTrack","removeKeyframePropertyTrack","timelineModified","animationLooped","_animationLength","_pausedAtTime","_lastUpdatedMillisecond","renderers","map","renderer","filter","_","rekapiActor","contains","push","setup","actorId","id","slice","length","without","teardown","getAllActors","iterations","millisecond","_resetFnKeyframesFromMillisecond","playFrom","doResetLaterFnKeyframes","renderOrder","sortBy","_updateState","wasActive","render","get","max","apply","getEnd","exportData","duration","actors","exportTimeline","curves","chain","formulas","formula","x1","curve","displayName","pick","value","rekapiData","curveName","y1","x2","y2","importTimeline","actorData","Object","keys","rendererConstructor","position","splice","undefined","arrayPool","objectPool","idCounter","keyPrefix","Date","largeArraySize","maxPoolSize","whitespace","reEmptyStringLeading","reEmptyStringMiddle","reEmptyStringTrailing","reEsTemplate","reFlags","reFuncName","reInterpolate","reLeadingSpacesAndZeros","RegExp","reNoMatch","reThis","reUnescapedString","contextProps","templateCounter","argsClass","arrayClass","boolClass","dateClass","funcClass","numberClass","objectClass","regexpClass","stringClass","cloneableClasses","debounceOptions","descriptor","objectTypes","stringEscapes","root","window","freeExports","exports","nodeType","freeModule","module","moduleExports","freeGlobal","baseIndexOf","array","fromIndex","index","cacheIndexOf","cache","type","key","cachePush","typeCache","charAtCallback","charCodeAt","compareAscending","a","b","ac","criteria","bc","other","createCache","first","mid","getObject","result","escapeStringChar","match","getArray","pop","releaseArray","releaseObject","object","number","string","start","end","Array","runInContext","defaults","Boolean","Function","Number","String","TypeError","arrayRef","objectProto","prototype","oldDash","toString","reNative","replace","ceil","fnToString","getPrototypeOf","isNative","hasOwnProperty","unshift","defineProperty","o","func","e","nativeCreate","create","nativeIsArray","isArray","nativeIsFinite","isFinite","nativeIsNaN","isNaN","nativeKeys","nativeMax","nativeMin","min","nativeParseInt","parseInt","nativeRandom","random","ctorByClass","lodash","lodashWrapper","chainAll","__chain__","__wrapped__","support","funcDecomp","WinRTError","test","funcNames","templateSettings","baseBind","bindData","partialArgs","thisArg","bound","args","arguments","thisBinding","baseCreate","isObject","setBindData","baseClone","isDeep","callback","stackA","stackB","isObj","className","ctor","source","exec","lastIndex","isArr","initedStack","assign","input","forOwn","objValue","properties","baseCreateCallback","argCount","identity","__bindData__","collection","accumulator","bind","baseCreateWrapper","bitmask","partialRightArgs","arity","isBind","isBindKey","isCurry","isCurryBound","baseDifference","values","indexOf","getIndexOf","isLarge","baseFlatten","isShallow","isStrict","isArguments","valIndex","valLength","resIndex","baseIsEqual","isWhere","otherType","otherClass","aWrapped","bWrapped","ctorA","constructor","ctorB","isFunction","size","forIn","baseMerge","found","isPlainObject","stackLength","baseRandom","baseUniq","isSorted","seen","computed","createAggregator","setter","createCallback","createWrapper","isPartial","isPartialRight","creater","escapeHtmlChar","htmlEscapes","noop","shimIsPlainObject","unescapeHtmlChar","htmlUnescapes","shimKeys","iterable","invert","reEscapedHtml","join","reUnescapedHtml","guard","argsIndex","argsLength","ownIndex","ownProps","clone","cloneDeep","findKey","findLastKey","forOwnRight","forInRight","pairs","props","functions","has","isBoolean","isDate","isElement","isEmpty","isEqual","parseFloat","isNumber","isNull","valueOf","objProto","isRegExp","isString","isUndefined","mapValues","merge","sources","omit","transform","proto","at","target","countBy","every","find","findLast","forEachRight","groupBy","indexBy","methodName","isFunc","Infinity","current","pluck","reduce","noaccum","reduceRight","reject","sample","n","shuffle","rand","some","toArray","compact","difference","findIndex","findLastIndex","flatten","sortedIndex","initial","intersection","caches","trustIndexOf","outer","lastIndexOf","pull","range","step","remove","rest","low","high","union","uniq","xor","zip","zipObject","after","bindAll","funcs","bindKey","compose","curry","debounce","wait","options","maxTimeoutId","stamp","timeoutId","trailingCall","lastCalled","maxWait","trailing","leading","delayed","remaining","isCalled","maxDelayed","leadingCall","defer","delay","memoize","resolver","memoized","once","ran","partial","partialRight","throttle","wrap","wrapper","constant","property","escape","mixin","methodNames","noConflict","getTime","radix","floating","noMin","noMax","template","text","settings","imports","importsKeys","importsValues","isEvaluating","interpolate","reDelimiters","evaluate","escapeValue","interpolateValue","esTemplateValue","evaluateValue","offset","variable","hasVariable","sourceURL","times","unescape","uniqueId","prefix","tap","interceptor","wrapperChain","wrapperToString","wrapperValueOf","collect","drop","eachRight","extend","methods","select","tail","unique","unzip","all","any","detect","findWhere","foldl","foldr","include","inject","take","head","callbackable","VERSION","define","t","shifty","r","i","l","m","c","d","configurable","enumerable","__esModule","default","p","s","g","tween","tweenable","Tweenable","composeEasingObject","tweenProps","writable","u","Symbol","iterator","f","h","v","y","w","_currentState","_configured","_scheduleFunction","setConfig","filters","_filterArgs","_delay","_timestamp","_duration","_targetState","_step","isPlaying","_attachment","_scheduleId","_timeoutHandler","_applyFilter","_originalState","_easing","_isTweening","_start","resume","attachment","from","to","easing","promise","Promise","_promise","_resolve","_reject","catch","_isPaused","getOwnPropertySymbols","propertyIsEnumerable","getOwnPropertyNames","fromCharCode","split","unsetBezierFunction","setBezierFunction","set","_tokenData","S","F","k","tweenCreated","beforeTween","afterTween","charAt","substr","formatString","chunkNames","M","O","j","toFixed","eval","linear","easeInQuad","pow","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeOutBounce","easeInBack","easeOutBack","easeInOutBack","elastic","swingFromTo","swingFrom","swingTo","bounce","bouncePast","easeFromTo","easeFrom","easeTo","token","getMillisecond","obj","fire","event","getPropertyCacheEntryForMillisecond","_timelinePropertyCache","_millisecond","insertionPointInTrack","track","getLatestProperties","latestProperties","_propertyTracks","propertyTrack","propertyName","propertyIndexInTrack","invalidateCache","_timelinePropertyCacheValid","ensurePropertyCacheValid","_timelineFunctionCache","curCacheEntry","removeEmptyPropertyTracks","trackName","sortPropertyTracks","keyframeProperty","linkToNext","cleanupAfterKeyframeModification","Actor","config","state","easingObject","propertyTracks","getKeyframeProperty","copyFrom","copyTo","sourcePositions","sourceEasings","keyframe","hasKeyframeAt","oldIndex","modifyWith","_deleteKeyframePropertyAt","detach","removeKeyframe","newProperties","Error","starts","firstKeyframeProperty","endingTracks","tracksToInspect","getStart","until","latestProps","serializedProps","serializedEasings","latestProp","propName","modifyKeyframe","newMillisecond","targetMillisecond","_warnOnOutOfOrderKeyframes","console","warn","_insertKeyframePropertyAt","isActive","hasActiveTrack","_active","activeProperty","resetLaterFnKeyframes","interpolatedObject","propertyCacheEntry","getValueAt","shouldInvokeForMillisecond","_beforeKeyframePropertyInterpolate","_afterKeyframePropertyInterpolate","trackNames","getTrackNames","exportPropertyData","KeyframeProperty","nextProperty","boundedMillisecond","delta","interpolatePosition","drift","returnValue","webpackPolyfill","deprecate","paths","children","dimension","canvas","heightOrWidth","newSize","style","CanvasRenderer","canvasContext","on","clear","height","width","clearRect","CanvasRenderingContext2D","vendorTransforms","transformFunctions","DEFAULT_FPS","TRANSFORM_TOKEN","VENDOR_TOKEN","R_TRANSFORM_TOKEN","R_VENDOR_TOKEN","VENDOR_PREFIXES","microsoft","mozilla","opera","w3","webkit","BEZIERS","INJECTED_STYLE_REMOVAL_BUFFER_MS","R_3D_RULE","_3D_RULE","_3D_TOKEN","isInt","vendorPrefix","document","body","getActorClassName","forceStyleReset","dummyDiv","createElement","parentElement","replaceChild","styleID","injectStyle","css","innerHTML","appendChild","setStyle","element","styleName","styleValue","isTransformFunction","buildTransformValue","orderedTransforms","transformProperties","transformComponents","functionName","setTransformStyles","transformValue","prefixedTransform","actorRender","propertyNames","transformFunctionNames","otherProperties","_transformOrder","actorTeardown","classList","sanitizedClassList","onAddActor","applyVendorPropertyPrefixes","keyframes","vendor","applyVendorBoilerplates","toKeyframes","animName","vendors","generateOptimizedKeyframeSegment","fromPercent","toPercent","bezier","combineTranfromProperties","propsToSerialize","transformNames","combinedProperties","transformFunction","serializeActorStep","targetProp","val","generateActorTrackSegment","increments","incrementSize","actorStart","fromProp","getLength","percent","generateCombinedActorKeyframes","steps","simulateLeadingWait","firstProp","simulateTrailingWait","actorEnd","lastProp","calculateStepPercent","actorLength","generateActorTrackWaitSegment","toProp","isSegmentAWait","canOptimizeKeyframeProperty","easings","generateActorKeyframes","leadingWait","previousSegmentWasOptimized","prop","trackSegment","shift","trailingWait","generateBoilerplatedKeyframes","doCombineProperties","generateAnimationNameProperty","animationName","renderedName","trackNamesToPrint","generateAnimationIterationProperty","generateCSSAnimationProperties","isCentered","generatedProperties","generateCSSClass","canOptimizeAnyKeyframeProperties","getActorCSS","getActorCount","fps","DOMRenderer","_playTimestamp","_cachedCSS","_styleElement","_stopSetTimeoutHandle","prerender","goToEnd","removeChild","getCss","unrecognizedTransforms","animationCSS","propIsEnumerable","toObject","shouldUseNative","test1","test2","order2","test3","letter","err","symbols","pos","easingFunctions","DEFAULT_DURATION","DEFAULT_SCHEDULE_FUNCTION","fn","tweenProp","easingFunc","forPosition","currentState","originalState","targetState","timestamp","normalizedPosition","easingObjectProp","easingFn","fromTweenParams","composedEasing","typeofEasing","initialState","filterName","currentTimeOverride","endTime","currentTime","hasEnded","Promised","resolve","gotoEnd","scheduleFunction"],"mappings":"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","file":"rekapi.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"rekapi\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rekapi\"] = factory();\n\telse\n\t\troot[\"rekapi\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fb4ffbf442e869119c41","import _ from 'lodash';\nimport { Tweenable, setBezierFunction } from 'shifty';\nimport { Actor } from './actor';\n\nconst UPDATE_TIME = 1000 / 60;\n\nexport const DEFAULT_EASING = 'linear';\n\n/*!\n * Fire an event bound to a Rekapi.\n * @param {Rekapi} rekapi\n * @param {string} eventName\n * @param {Object} [data={}] Optional event-specific data\n */\nexport const fireEvent = (rekapi, eventName, data = {}) =>\n  rekapi._events[eventName].forEach(handler => handler(rekapi, data));\n\n/*!\n * @param {Rekapi} rekapi\n */\nexport const invalidateAnimationLength = rekapi =>\n  rekapi._animationLengthValid = false;\n\n/*!\n * Determines which iteration of the loop the animation is currently in.\n * @param {Rekapi} rekapi\n * @param {number} timeSinceStart\n */\nexport const determineCurrentLoopIteration = (rekapi, timeSinceStart) => {\n  const animationLength = rekapi.getAnimationLength();\n\n  if (animationLength === 0) {\n    return timeSinceStart;\n  }\n\n  return Math.floor(timeSinceStart / animationLength);\n};\n\n/*!\n * Calculate how many milliseconds since the animation began.\n * @param {Rekapi} rekapi\n * @return {number}\n */\nexport const calculateTimeSinceStart = rekapi =>\n  Tweenable.now() - rekapi._loopTimestamp;\n\n/*!\n * Determines if the animation is complete or not.\n * @param {Rekapi} rekapi\n * @param {number} currentLoopIteration\n * @return {boolean}\n */\nexport const isAnimationComplete = (rekapi, currentLoopIteration) =>\n  currentLoopIteration >= rekapi._timesToIterate\n    && rekapi._timesToIterate !== -1;\n\n/*!\n * Stops the animation if it is complete.\n * @param {Rekapi} rekapi\n * @param {number} currentLoopIteration\n */\nexport const updatePlayState = (rekapi, currentLoopIteration) => {\n  if (isAnimationComplete(rekapi, currentLoopIteration)) {\n    rekapi.stop();\n    fireEvent(rekapi, 'animationComplete');\n  }\n};\n\n/*!\n * Calculate how far in the animation loop `rekapi` is, in milliseconds,\n * based on the current time.  Also overflows into a new loop if necessary.\n * @param {Rekapi} rekapi\n * @param {number} forMillisecond\n * @param {number} currentLoopIteration\n * @return {number}\n */\nexport const calculateLoopPosition = (rekapi, forMillisecond, currentLoopIteration) => {\n  const animationLength = rekapi.getAnimationLength();\n\n  return animationLength === 0 ?\n    0 :\n    isAnimationComplete(rekapi, currentLoopIteration) ?\n      animationLength :\n      forMillisecond % animationLength;\n};\n\n/*!\n * Calculate the timeline position and state for a given millisecond.\n * Updates the `rekapi` state internally and accounts for how many loop\n * iterations the animation runs for.\n * @param {Rekapi} rekapi\n * @param {number} forMillisecond\n */\nexport const updateToMillisecond = (rekapi, forMillisecond) => {\n  const currentIteration = determineCurrentLoopIteration(rekapi, forMillisecond);\n  const loopPosition = calculateLoopPosition(\n    rekapi, forMillisecond, currentIteration\n  );\n\n  rekapi._loopPosition = loopPosition;\n\n  let keyframeResetList = [];\n\n  if (currentIteration > rekapi._latestIteration) {\n    fireEvent(rekapi, 'animationLooped');\n\n    // Reset function keyframes\n    const lookupObject = { name: 'function' };\n\n    rekapi._actors.forEach(actor => {\n      const fnKeyframes = _.where(actor._keyframeProperties, lookupObject);\n      const lastFnKeyframe = _.last(fnKeyframes);\n\n      if (lastFnKeyframe && !lastFnKeyframe.hasFired) {\n        lastFnKeyframe.invoke();\n      }\n\n      keyframeResetList = keyframeResetList.concat(fnKeyframes);\n    });\n  }\n\n  rekapi._latestIteration = currentIteration;\n  rekapi.update(loopPosition, true);\n  updatePlayState(rekapi, currentIteration);\n\n  _.each(keyframeResetList, fnKeyframe => {\n    fnKeyframe.hasFired = false;\n  });\n};\n\n/*!\n * Calculate how far into the animation loop `rekapi` is, in milliseconds,\n * and update based on that time.\n * @param {Rekapi} rekapi\n */\nexport const updateToCurrentMillisecond = rekapi =>\n  updateToMillisecond(rekapi, calculateTimeSinceStart(rekapi));\n\n/*!\n * This is the heartbeat of an animation.  This updates `rekapi`'s state and\n * then calls itself continuously.\n * @param {Rekapi} rekapi\n */\nconst tick = rekapi =>\n  // Need to check for .call presence to get around an IE limitation.  See\n  // annotation for cancelLoop for more info.\n  rekapi._loopId = rekapi._scheduleUpdate.call ?\n    rekapi._scheduleUpdate.call(global, rekapi._updateFn, UPDATE_TIME) :\n    setTimeout(rekapi._updateFn, UPDATE_TIME);\n\n/*!\n * @return {Function}\n */\nconst getUpdateMethod = () =>\n  // requestAnimationFrame() shim by Paul Irish (modified for Rekapi)\n  // http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n  global.requestAnimationFrame       ||\n  global.webkitRequestAnimationFrame ||\n  global.oRequestAnimationFrame      ||\n  global.msRequestAnimationFrame     ||\n  (global.mozCancelRequestAnimationFrame && global.mozRequestAnimationFrame) ||\n  global.setTimeout;\n\n/*!\n * @return {Function}\n */\nconst getCancelMethod = () =>\n  global.cancelAnimationFrame           ||\n  global.webkitCancelAnimationFrame     ||\n  global.oCancelAnimationFrame          ||\n  global.msCancelAnimationFrame         ||\n  global.mozCancelRequestAnimationFrame ||\n  global.clearTimeout;\n\n/*!\n * Cancels an update loop.  This abstraction is needed to get around the fact\n * that in IE, clearTimeout is not technically a function\n * (https://twitter.com/kitcambridge/status/206655060342603777) and thus\n * Function.prototype.call cannot be used upon it.\n * @param {Rekapi} rekapi\n */\nconst cancelLoop = rekapi =>\n  rekapi._cancelUpdate.call ?\n    rekapi._cancelUpdate.call(global, rekapi._loopId) :\n    clearTimeout(rekapi._loopId);\n\nconst STOPPED = 'stopped';\nconst PAUSED = 'paused';\nconst PLAYING = 'playing';\n\n/*!\n * @type {Object.<function>} Contains the context init function to be called in\n * the Rekapi constructor.  This array is populated by modules in the\n * renderers/ directory.\n */\nexport const rendererBootstrappers = [];\n\n/**\n * If this is a rendered animation, the appropriate renderer is accessible as\n * `this.renderer`.  If provided, a reference to `context` is accessible\n * as `this.context`.\n * @param {(Object|CanvasRenderingContext2D|HTMLElement)} [context={}] Sets\n * {@link rekapi.Rekapi#context}. This determines how to render the animation.\n * {@link rekapi.Rekapi} will also automatically set up all necessary {@link\n * rekapi.Rekapi#renderers} based on this value:\n *\n * * If this is not provided or is a plain object (`{}`), the animation will\n * not render anything and {@link rekapi.Rekapi#renderers} will be empty.\n * * If this is a\n * [`CanvasRenderingContext2D`](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D),\n * {@link rekapi.Rekapi#renderers} will contain a {@link\n * rekapi.CanvasRenderer}.\n * * If this is a DOM element, {@link rekapi.Rekapi#renderers} will contain a\n * {@link rekapi.DOMRenderer}.\n * @constructs rekapi.Rekapi\n */\nexport class Rekapi {\n  constructor (context = {}) {\n    /**\n     * @member {(Object|CanvasRenderingContext2D|HTMLElement)}\n     * rekapi.Rekapi#context The rendering context for an animation.\n     * @default {}\n     */\n    this.context = context;\n    this._actors = [];\n    this._playState = STOPPED;\n\n    /**\n     * @member {(rekapi.actorSortFunction|null)} rekapi.Rekapi#sort Optional\n     * function for sorting the render order of {@link rekapi.Actor}s.  If set,\n     * this is called each frame before the {@link rekapi.Actor}s are rendered.\n     * If not set, {@link rekapi.Actor}s will render in the order they were\n     * added via {@link rekapi.Rekapi#addActor}.\n     *\n     * The following example assumes that all {@link rekapi.Actor}s are circles\n     * that have a `radius` {@link rekapi.KeyframeProperty}.  The circles will\n     * be rendered in order of the value of their `radius`, from smallest to\n     * largest.  This has the effect of layering larger circles on top of\n     * smaller circles, thus giving a sense of perspective.\n     *\n     *     const rekapi = new Rekapi();\n     *     rekapi.sort = actor => actor.get().radius;\n     * @default null\n     */\n    this.sort = null;\n\n    this._events = {\n      animationComplete: [],\n      playStateChange: [],\n      play: [],\n      pause: [],\n      stop: [],\n      beforeUpdate: [],\n      afterUpdate: [],\n      addActor: [],\n      removeActor: [],\n      beforeAddKeyframeProperty: [],\n      addKeyframeProperty: [],\n      removeKeyframeProperty: [],\n      removeKeyframePropertyComplete: [],\n      beforeRemoveKeyframeProperty: [],\n      addKeyframePropertyTrack: [],\n      removeKeyframePropertyTrack: [],\n      timelineModified: [],\n      animationLooped: []\n    };\n\n    // How many times to loop the animation before stopping\n    this._timesToIterate = -1;\n\n    // Millisecond duration of the animation\n    this._animationLength = 0;\n    this._animationLengthValid = false;\n\n    // The setTimeout ID of `tick`\n    this._loopId = null;\n\n    // The UNIX time at which the animation loop started\n    this._loopTimestamp = null;\n\n    // Used for maintaining position when the animation is paused\n    this._pausedAtTime = null;\n\n    // The last millisecond position that was updated\n    this._lastUpdatedMillisecond = 0;\n\n    // The most recent loop iteration a frame was calculated for\n    this._latestIteration = 0;\n\n    // The most recent millisecond position within the loop that the animation\n    // was updated to\n    this._loopPosition = null;\n\n    this._scheduleUpdate = getUpdateMethod();\n    this._cancelUpdate = getCancelMethod();\n\n    this._updateFn = () => {\n      tick(this);\n      updateToCurrentMillisecond(this);\n    };\n\n    /**\n     * @member {Array.<rekapi.renderer>} rekapi.Rekapi#renderers Instances of\n     * {@link rekapi.renderer} classes, as inferred by the `context`\n     * parameter provided to the {@link rekapi.Rekapi} constructor.  You can\n     * add more renderers to this list manually; see the {@tutorial\n     * multiple-renderers} tutorial for an example.\n     */\n    this.renderers = rendererBootstrappers\n      .map(renderer => renderer(this))\n      .filter(_ => _);\n  }\n\n  /**\n   * Add a {@link rekapi.Actor} to the animation.  Decorates the added {@link\n   * rekapi.Actor} with a reference to this {@link rekapi.Rekapi} instance as\n   * {@link rekapi.Actor#rekapi}.\n   *\n   * @method rekapi.Rekapi#addActor\n   * @param {(rekapi.Actor|Object)} [actor={}] If this is an `Object`, it is used to as\n   * the constructor parameters for a new {@link rekapi.Actor} instance that\n   * is created by this method.\n   * @return {rekapi.Actor} The {@link rekapi.Actor} that was added.\n   */\n  addActor (actor = {}) {\n    const rekapiActor = actor instanceof Actor ?\n      actor :\n      new Actor(actor);\n\n    // You can't add an actor more than once.\n    if (_.contains(this._actors, rekapiActor)) {\n      return rekapiActor;\n    }\n\n    rekapiActor.context = rekapiActor.context || this.context;\n    rekapiActor.rekapi = this;\n\n    // Store a reference to the actor internally\n    this._actors.push(rekapiActor);\n\n    invalidateAnimationLength(this);\n    rekapiActor.setup();\n\n    fireEvent(this, 'addActor', rekapiActor);\n\n    return rekapiActor;\n  }\n\n  /**\n   * @method rekapi.Rekapi#getActor\n   * @param {number} actorId\n   * @return {rekapi.Actor} A reference to an actor from the animation by its\n   * `id`.  You can use {@link rekapi.Rekapi#getActorIds} to get a list of IDs\n   * for all actors in the animation.\n   */\n  getActor (actorId) {\n    return this._actors.filter(actor => actor.id === actorId)[0];\n  }\n\n  /**\n   * @method rekapi.Rekapi#getActorIds\n   * @return {Array.<number>} The `id`s of all {@link rekapi.Actor}`s in the\n   * animation.\n   */\n  getActorIds () {\n    return this._actors.map(actor => actor.id);\n  }\n\n  /**\n   * @method rekapi.Rekapi#getAllActors\n   * @return {Array.<rekapi.Actor>} All {@link rekapi.Actor}s in the animation.\n   */\n  getAllActors () {\n    return this._actors.slice();\n  }\n\n  /**\n   * @method rekapi.Rekapi#getActorCount\n   * @return {number} The number of {@link rekapi.Actor}s in the animation.\n   */\n  getActorCount () {\n    return this._actors.length;\n  }\n\n  /**\n   * Remove an actor from the animation.  This does not destroy the actor, it\n   * only removes the link between it and this {@link rekapi.Rekapi} instance.\n   * This method calls the actor's {@link rekapi.Actor#teardown} method, if\n   * defined.\n   * @method rekapi.Rekapi#removeActor\n   * @param {rekapi.Actor} actor\n   * @return {rekapi.Actor} The {@link rekapi.Actor} that was removed.\n   */\n  removeActor (actor) {\n    // Remove the link between Rekapi and actor\n    this._actors = _.without(this._actors, actor);\n    delete actor.rekapi;\n\n    actor.teardown();\n    invalidateAnimationLength(this);\n\n    fireEvent(this, 'removeActor', actor);\n\n    return actor;\n  }\n\n  /**\n   * Remove all {@link rekapi.Actor}s from the animation.\n   * @method rekapi.Rekapi#removeAllActors\n   * @return {Array.<rekapi.Actor>} The {@link rekapi.Actor}s that were\n   * removed.\n   */\n  removeAllActors () {\n    return this.getAllActors().map(actor => this.removeActor(actor));\n  }\n\n  /**\n   * Play the animation.\n   *\n   * @method rekapi.Rekapi#play\n   * @param {number} [iterations=-1] If omitted, the animation will loop\n   * endlessly.\n   * @return {rekapi.Rekapi}\n   */\n  play (iterations = -1) {\n    cancelLoop(this);\n\n    if (this._playState === PAUSED) {\n      // Move the playhead to the correct position in the timeline if resuming\n      // from a pause\n      this._loopTimestamp += Tweenable.now() - this._pausedAtTime;\n    } else {\n      this._loopTimestamp = Tweenable.now();\n    }\n\n    this._timesToIterate = iterations;\n    this._playState = PLAYING;\n\n    // Start the update loop\n    tick(this);\n\n    fireEvent(this, 'playStateChange');\n    fireEvent(this, 'play');\n\n    return this;\n  }\n\n  /**\n   * Move to a specific millisecond on the timeline and play from there.\n   *\n   * @method rekapi.Rekapi#playFrom\n   * @param {number} millisecond\n   * @param {number} [iterations] Works as it does in {@link\n   * rekapi.Rekapi#play}.\n   * @return {rekapi.Rekapi}\n   */\n  playFrom (millisecond, iterations) {\n    this.play(iterations);\n    this._loopTimestamp = Tweenable.now() - millisecond;\n\n    this._actors.forEach(\n      actor => actor._resetFnKeyframesFromMillisecond(millisecond)\n    );\n\n    return this;\n  }\n\n  /**\n   * Play from the last frame that was rendered with {@link\n   * rekapi.Rekapi#update}.\n   *\n   * @method rekapi.Rekapi#playFromCurrent\n   * @param {number} [iterations] Works as it does in {@link\n   * rekapi.Rekapi#play}.\n   * @return {rekapi.Rekapi}\n   */\n  playFromCurrent (iterations) {\n    return this.playFrom(this._lastUpdatedMillisecond, iterations);\n  }\n\n  /**\n   * Pause the animation.  A \"paused\" animation can be resumed from where it\n   * left off with {@link rekapi.Rekapi#play}.\n   *\n   * @method rekapi.Rekapi#pause\n   * @return {rekapi.Rekapi}\n   */\n  pause () {\n    if (this._playState === PAUSED) {\n      return this;\n    }\n\n    this._playState = PAUSED;\n    cancelLoop(this);\n    this._pausedAtTime = Tweenable.now();\n\n    fireEvent(this, 'playStateChange');\n    fireEvent(this, 'pause');\n\n    return this;\n  }\n\n  /**\n   * Stop the animation.  A \"stopped\" animation will start from the beginning\n   * if {@link rekapi.Rekapi#play} is called.\n   *\n   * @method rekapi.Rekapi#stop\n   * @return {rekapi.Rekapi}\n   */\n  stop () {\n    this._playState = STOPPED;\n    cancelLoop(this);\n\n    // Also kill any shifty tweens that are running.\n    this._actors.forEach(actor =>\n      actor._resetFnKeyframesFromMillisecond(0)\n    );\n\n    fireEvent(this, 'playStateChange');\n    fireEvent(this, 'stop');\n\n    return this;\n  }\n\n  /**\n   * @method rekapi.Rekapi#isPlaying\n   * @return {boolean} Whether or not the animation is playing (meaning not paused or\n   * stopped).\n   */\n  isPlaying () {\n    return this._playState === PLAYING;\n  }\n\n  /**\n   * @method rekapi.Rekapi#isPaused\n   * @return {boolean} Whether or not the animation is paused (meaning not playing or\n   * stopped).\n   */\n  isPaused () {\n    return this._playState === PAUSED;\n  }\n\n  /**\n   * @method rekapi.Rekapi#isStopped\n   * @return {boolean} Whether or not the animation is stopped (meaning not playing or\n   * paused).\n   */\n  isStopped () {\n    return this._playState === STOPPED;\n  }\n\n  /**\n   * Render an animation frame at a specific point in the timeline.\n   *\n   * @method rekapi.Rekapi#update\n   * @param {number} [millisecond=this._lastUpdatedMillisecond] The point in\n   * the timeline at which to render.  If omitted, this renders the last\n   * millisecond that was rendered (it's a re-render).\n   * @param {boolean} [doResetLaterFnKeyframes=false] If `true`, allow all\n   * {@link rekapi.keyframeFunction}s later in the timeline to be run again.\n   * This is a low-level feature, it should not be `true` (or even provided)\n   * for most use cases.\n   * @return {rekapi.Rekapi}\n   */\n  update (\n    millisecond = this._lastUpdatedMillisecond,\n    doResetLaterFnKeyframes = false\n  ) {\n    fireEvent(this, 'beforeUpdate');\n\n    const renderOrder = this.sort ?\n      _.sortBy(this._actors, this.sort) :\n      this._actors;\n\n    // Update and render each of the actors\n    renderOrder.forEach(actor => {\n      actor._updateState(millisecond, doResetLaterFnKeyframes);\n\n      if (actor.wasActive) {\n        actor.render(actor.context, actor.get());\n      }\n    });\n\n    this._lastUpdatedMillisecond = millisecond;\n    fireEvent(this, 'afterUpdate');\n\n    return this;\n  }\n\n  /**\n   * @method rekapi.Rekapi#getLastPositionUpdated\n   * @return {number} The normalized timeline position (between 0 and 1) that\n   * was last rendered.\n   */\n  getLastPositionUpdated () {\n    return (this._lastUpdatedMillisecond / this.getAnimationLength());\n  }\n\n  /**\n   * @method rekapi.Rekapi#getLastMillisecondUpdated\n   * @return {number} The millisecond that was last rendered.\n   */\n  getLastMillisecondUpdated () {\n    return this._lastUpdatedMillisecond;\n  }\n\n  /**\n   * @method rekapi.Rekapi#getAnimationLength\n   * @return {number} The length of the animation timeline, in milliseconds.\n   */\n  getAnimationLength () {\n    if (!this._animationLengthValid) {\n      this._animationLength = Math.max.apply(\n        Math,\n        this._actors.map(actor => actor.getEnd())\n      );\n\n      this._animationLengthValid = true;\n    }\n\n    return this._animationLength;\n  }\n\n  /**\n   * Bind a {@link rekapi.eventHandler} function to a Rekapi event.\n   * @method rekapi.Rekapi#on\n   * @param {string} eventName Valid values are:\n   *\n   * - `\"animationComplete\"`: Fires when all animation loops have completed.\n   * - `\"playStateChange\"`: Fires when the animation is played, paused, or\n   *   stopped.\n   * - `\"play\"`: Fires when the animation is {@link rekapi.Rekapi#play}ed.\n   * - `\"pause\"`: Fires when the animation is {@link rekapi.Rekapi#pause}d.\n   * - `\"stop\"`: Fires when the animation is {@link rekapi.Rekapi#stop}ped.\n   * - `\"beforeUpdate\"`: Fires each frame before all actors are rendered.\n   * - `\"afterUpdate\"`: Fires each frame after all actors are rendered.\n   * - `\"addActor\"`: Fires when an actor is added.  `data` is the\n   *   {@link rekapi.Actor} that was added.\n   * - `\"removeActor\"`: Fires when an actor is removed.  `data` is the {@link\n   *   rekapi.Actor} that was removed.\n   * - `\"beforeAddKeyframeProperty\"`: Fires just before the point where a\n   *   {@link rekapi.KeyframeProperty} is added to the timeline.  This event is\n   *   called before any modifications to the timeline are done.\n   * - `\"addKeyframeProperty\"`: Fires when a keyframe property is added.\n   *   `data` is the {@link rekapi.KeyframeProperty} that was added.\n   * - `\"beforeRemoveKeyframeProperty\"`: Fires just before the point where a\n   *   {@link rekapi.KeyframeProperty} is removed.  This\n   *   event is called before any modifications to the timeline are done.\n   * - `\"removeKeyframeProperty\"`: Fires when a {@link rekapi.KeyframeProperty}\n   *   is removed.  This event is fired _before_ the internal state of the\n   *   keyframe (but not the timeline, in contrast to the\n   *   `beforeRemoveKeyframeProperty` event) has been updated to reflect the\n   *   keyframe property removal (this is in contrast to\n   *   `removeKeyframePropertyComplete`).  `data` is the {@link\n   *   rekapi.KeyframeProperty} that was removed.\n   * - `\"removeKeyframePropertyComplete\"`: Fires when a {@link\n   *   rekapi.KeyframeProperty} has finished being removed from the timeline.\n   *   Unlike `removeKeyframeProperty`, this is fired _after_ the internal\n   *   state of Rekapi has been updated to reflect the removal of the keyframe\n   *   property. `data` is the {@link rekapi.KeyframeProperty} that was\n   *   removed.\n   * - `\"addKeyframePropertyTrack\"`: Fires when the a keyframe is added to an\n   *   actor that creates a new keyframe property track.  `data` is the {@link\n   *   rekapi.KeyframeProperty} that was added to create the property track.  A\n   *   reference to the actor that the keyframe property is associated with can\n   *   be accessed via `data.actor` and the track name that was added can be\n   *   determined via `data.name`.\n   * - `\"removeKeyframePropertyTrack\"`: Fires when the last keyframe property\n   *   in an actor's keyframe property track is removed.  Rekapi automatically\n   *   removes property tracks when they are emptied out, which causes this\n   *   event to be fired.  `data` is the name of the track that was\n   *   removed.\n   * - `\"timelineModified\"`: Fires when a keyframe is added, modified or\n   *   removed.\n   * - `\"animationLooped\"`: Fires when an animation loop ends and a new one\n   *   begins.\n   * @param {rekapi.eventHandler} handler The event handler function.\n   * @return {rekapi.Rekapi}\n   */\n  on (eventName, handler) {\n    if (!this._events[eventName]) {\n      return this;\n    }\n\n    this._events[eventName].push(handler);\n\n    return this;\n  }\n\n  /**\n   * Manually fire a Rekapi event, thereby calling all {@link\n   * rekapi.eventHandler}s bound to that event.\n   * @param {string} eventName The name of the event to trigger.\n   * @param {any} [data] Optional data to provide to the `eventName` {@link\n   * rekapi.eventHandler}s.\n   * @method rekapi.Rekapi#trigger\n   * @return {rekapi.Rekapi}\n   */\n  trigger (eventName, data) {\n    fireEvent(this, eventName, data);\n\n    return this;\n  }\n\n  /**\n   * Unbind one or more handlers from a Rekapi event.\n   * @method rekapi.Rekapi#off\n   * @param {string} eventName Valid values correspond to the list under\n   * {@link rekapi.Rekapi#on}.\n   * @param {rekapi.eventHandler} [handler] A reference to the {@link\n   * rekapi.eventHandler} to unbind.  If omitted, all {@link\n   * rekapi.eventHandler}s bound to `eventName` are unbound.\n   * @return {rekapi.Rekapi}\n   */\n  off (eventName, handler) {\n    if (!this._events[eventName]) {\n      return this;\n    }\n\n    this._events[eventName] = handler ?\n      _.without(this._events[eventName], handler) :\n      [];\n\n    return this;\n  }\n\n  /**\n   * Export the timeline to a `JSON.stringify`-friendly `Object`.\n   *\n   * @method rekapi.Rekapi#exportTimeline\n   * @return {Object} This data can later be consumed by {@link\n   * rekapi.Rekapi#importTimeline}.\n   */\n  exportTimeline () {\n    const exportData = {\n      duration: this.getAnimationLength(),\n      actors: this._actors.map(actor => actor.exportTimeline())\n    };\n\n\n    const curves = {};\n\n    _.chain(Tweenable.formulas)\n      .filter(formula => typeof formula.x1 === 'number')\n      .each(curve =>\n        curves[curve.displayName] =\n          _.pick(curve, 'displayName', 'x1', 'y1', 'x2', 'y2')\n      )\n      .value();\n\n    exportData.curves = curves;\n\n    return exportData;\n  }\n\n  /**\n   * Import data that was created by {@link rekapi.Rekapi#exportTimeline}.\n   * This sets up all actors, keyframes, and custom easing curves specified in\n   * the `rekapiData` parameter.  These two methods collectively allow you\n   * serialize an animation (for sending to a server for persistence, for\n   * example) and later recreating an identical animation.\n   *\n   * @method rekapi.Rekapi#importTimeline\n   * @param {Object} rekapiData Any object that has the same data format as the\n   * object generated from {@link rekapi.Rekapi#exportTimeline}.\n   */\n  importTimeline (rekapiData) {\n    _.each(rekapiData.curves, (curve, curveName) =>\n      setBezierFunction(\n        curveName,\n        curve.x1,\n        curve.y1,\n        curve.x2,\n        curve.y2\n      )\n    );\n\n    _.each(rekapiData.actors, actorData => {\n      const actor = new Actor();\n      actor.importTimeline(actorData);\n      this.addActor(actor);\n    });\n  }\n\n  /**\n   * @method rekapi.Rekapi#getEventNames\n   * @return {Array.<string>} The list of event names that this Rekapi instance\n   * supports.\n   */\n  getEventNames () {\n    return Object.keys(this._events);\n  }\n\n  /**\n   * Get a reference to a {@link rekapi.renderer} that was initialized for this\n   * animation.\n   * @method rekapi.Rekapi#getRendererInstance\n   * @param {rekapi.renderer} rendererConstructor The type of {@link\n   * rekapi.renderer} subclass (such as {@link rekapi.CanvasRenderer} or {@link\n   * rekapi.DOMRenderer}) to look up an instance of.\n   * @return {rekapi.renderer|undefined} The matching {@link rekapi.renderer},\n   * if any.\n   */\n  getRendererInstance (rendererConstructor) {\n    return this.renderers.filter(renderer =>\n      renderer instanceof rendererConstructor\n    )[0];\n  }\n\n  /**\n   * Move a {@link rekapi.Actor} around within the internal render order list.\n   * By default, a {@link rekapi.Actor} is rendered in the order it was added\n   * with {@link rekapi.Rekapi#addActor}.\n   *\n   * This method has no effect if {@link rekapi.Rekapi#sort} is set.\n   *\n   * @method rekapi.Rekapi#moveActorToPosition\n   * @param {rekapi.Actor} actor\n   * @param {number} layer This should be within `0` and the total number of\n   * {@link rekapi.Actor}s in the animation.  That number can be found with\n   * {@link rekapi.Rekapi#getActorCount}.\n   * @return {rekapi.Rekapi}\n   */\n  moveActorToPosition (actor, position) {\n    if (position < this._actors.length && position > -1) {\n      this._actors = _.without(this._actors, actor);\n      this._actors.splice(position, 0, actor);\n    }\n\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/rekapi.js","/**\n * @license\n * Lo-Dash 2.4.2 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern -o ./dist/lodash.js`\n * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre ES5 environments */\n  var undefined;\n\n  /** Used to pool arrays and objects used internally */\n  var arrayPool = [],\n      objectPool = [];\n\n  /** Used to generate unique IDs */\n  var idCounter = 0;\n\n  /** Used to prefix keys to avoid issues with `__proto__` and properties on `Object.prototype` */\n  var keyPrefix = +new Date + '';\n\n  /** Used as the size when optimizations are enabled for large arrays */\n  var largeArraySize = 75;\n\n  /** Used as the max size of the `arrayPool` and `objectPool` */\n  var maxPoolSize = 40;\n\n  /** Used to detect and test whitespace */\n  var whitespace = (\n    // whitespace\n    ' \\t\\x0B\\f\\xA0\\ufeff' +\n\n    // line terminators\n    '\\n\\r\\u2028\\u2029' +\n\n    // unicode category \"Zs\" space separators\n    '\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000'\n  );\n\n  /** Used to match empty string literals in compiled template source */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /**\n   * Used to match ES6 template delimiters\n   * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-literals-string-literals\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match regexp flags from their coerced string values */\n  var reFlags = /\\w*$/;\n\n  /** Used to detected named functions */\n  var reFuncName = /^\\s*function[ \\n\\r\\t]+\\w/;\n\n  /** Used to match \"interpolate\" template delimiters */\n  var reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match leading whitespace and zeros to be removed */\n  var reLeadingSpacesAndZeros = RegExp('^[' + whitespace + ']*0+(?=.$)');\n\n  /** Used to ensure capturing order of template delimiters */\n  var reNoMatch = /($^)/;\n\n  /** Used to detect functions containing a `this` reference */\n  var reThis = /\\bthis\\b/;\n\n  /** Used to match unescaped characters in compiled string literals */\n  var reUnescapedString = /['\\n\\r\\t\\u2028\\u2029\\\\]/g;\n\n  /** Used to assign default `context` object properties */\n  var contextProps = [\n    'Array', 'Boolean', 'Date', 'Function', 'Math', 'Number', 'Object',\n    'RegExp', 'String', '_', 'attachEvent', 'clearTimeout', 'isFinite', 'isNaN',\n    'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify */\n  var templateCounter = 0;\n\n  /** `Object#toString` result shortcuts */\n  var argsClass = '[object Arguments]',\n      arrayClass = '[object Array]',\n      boolClass = '[object Boolean]',\n      dateClass = '[object Date]',\n      funcClass = '[object Function]',\n      numberClass = '[object Number]',\n      objectClass = '[object Object]',\n      regexpClass = '[object RegExp]',\n      stringClass = '[object String]';\n\n  /** Used to identify object classifications that `_.clone` supports */\n  var cloneableClasses = {};\n  cloneableClasses[funcClass] = false;\n  cloneableClasses[argsClass] = cloneableClasses[arrayClass] =\n  cloneableClasses[boolClass] = cloneableClasses[dateClass] =\n  cloneableClasses[numberClass] = cloneableClasses[objectClass] =\n  cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;\n\n  /** Used as an internal `_.debounce` options object */\n  var debounceOptions = {\n    'leading': false,\n    'maxWait': 0,\n    'trailing': false\n  };\n\n  /** Used as the property descriptor for `__bindData__` */\n  var descriptor = {\n    'configurable': false,\n    'enumerable': false,\n    'value': null,\n    'writable': false\n  };\n\n  /** Used to determine if values are of the language type Object */\n  var objectTypes = {\n    'boolean': false,\n    'function': true,\n    'object': true,\n    'number': false,\n    'string': false,\n    'undefined': false\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Used as a reference to the global object */\n  var root = (objectTypes[typeof window] && window) || this;\n\n  /** Detect free variable `exports` */\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module` */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports` */\n  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;\n\n  /** Detect free variable `global` from Node.js or Browserified code and use it as `root` */\n  var freeGlobal = objectTypes[typeof global] && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * The base implementation of `_.indexOf` without support for binary searches\n   * or `fromIndex` constraints.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {*} value The value to search for.\n   * @param {number} [fromIndex=0] The index to search from.\n   * @returns {number} Returns the index of the matched value or `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    var index = (fromIndex || 0) - 1,\n        length = array ? array.length : 0;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * An implementation of `_.contains` for cache objects that mimics the return\n   * signature of `_.indexOf` by returning `0` if the value is found, else `-1`.\n   *\n   * @private\n   * @param {Object} cache The cache object to inspect.\n   * @param {*} value The value to search for.\n   * @returns {number} Returns `0` if `value` is found, else `-1`.\n   */\n  function cacheIndexOf(cache, value) {\n    var type = typeof value;\n    cache = cache.cache;\n\n    if (type == 'boolean' || value == null) {\n      return cache[value] ? 0 : -1;\n    }\n    if (type != 'number' && type != 'string') {\n      type = 'object';\n    }\n    var key = type == 'number' ? value : keyPrefix + value;\n    cache = (cache = cache[type]) && cache[key];\n\n    return type == 'object'\n      ? (cache && baseIndexOf(cache, value) > -1 ? 0 : -1)\n      : (cache ? 0 : -1);\n  }\n\n  /**\n   * Adds a given value to the corresponding cache object.\n   *\n   * @private\n   * @param {*} value The value to add to the cache.\n   */\n  function cachePush(value) {\n    var cache = this.cache,\n        type = typeof value;\n\n    if (type == 'boolean' || value == null) {\n      cache[value] = true;\n    } else {\n      if (type != 'number' && type != 'string') {\n        type = 'object';\n      }\n      var key = type == 'number' ? value : keyPrefix + value,\n          typeCache = cache[type] || (cache[type] = {});\n\n      if (type == 'object') {\n        (typeCache[key] || (typeCache[key] = [])).push(value);\n      } else {\n        typeCache[key] = true;\n      }\n    }\n  }\n\n  /**\n   * Used by `_.max` and `_.min` as the default callback when a given\n   * collection is a string value.\n   *\n   * @private\n   * @param {string} value The character to inspect.\n   * @returns {number} Returns the code unit of given character.\n   */\n  function charAtCallback(value) {\n    return value.charCodeAt(0);\n  }\n\n  /**\n   * Used by `sortBy` to compare transformed `collection` elements, stable sorting\n   * them in ascending order.\n   *\n   * @private\n   * @param {Object} a The object to compare to `b`.\n   * @param {Object} b The object to compare to `a`.\n   * @returns {number} Returns the sort order indicator of `1` or `-1`.\n   */\n  function compareAscending(a, b) {\n    var ac = a.criteria,\n        bc = b.criteria,\n        index = -1,\n        length = ac.length;\n\n    while (++index < length) {\n      var value = ac[index],\n          other = bc[index];\n\n      if (value !== other) {\n        if (value > other || typeof value == 'undefined') {\n          return 1;\n        }\n        if (value < other || typeof other == 'undefined') {\n          return -1;\n        }\n      }\n    }\n    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n    // that causes it, under certain circumstances, to return the same value for\n    // `a` and `b`. See https://github.com/jashkenas/underscore/pull/1247\n    //\n    // This also ensures a stable sort in V8 and other engines.\n    // See http://code.google.com/p/v8/issues/detail?id=90\n    return a.index - b.index;\n  }\n\n  /**\n   * Creates a cache object to optimize linear searches of large arrays.\n   *\n   * @private\n   * @param {Array} [array=[]] The array to search.\n   * @returns {null|Object} Returns the cache object or `null` if caching should not be used.\n   */\n  function createCache(array) {\n    var index = -1,\n        length = array.length,\n        first = array[0],\n        mid = array[(length / 2) | 0],\n        last = array[length - 1];\n\n    if (first && typeof first == 'object' &&\n        mid && typeof mid == 'object' && last && typeof last == 'object') {\n      return false;\n    }\n    var cache = getObject();\n    cache['false'] = cache['null'] = cache['true'] = cache['undefined'] = false;\n\n    var result = getObject();\n    result.array = array;\n    result.cache = cache;\n    result.push = cachePush;\n\n    while (++index < length) {\n      result.push(array[index]);\n    }\n    return result;\n  }\n\n  /**\n   * Used by `template` to escape characters for inclusion in compiled\n   * string literals.\n   *\n   * @private\n   * @param {string} match The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(match) {\n    return '\\\\' + stringEscapes[match];\n  }\n\n  /**\n   * Gets an array from the array pool or creates a new one if the pool is empty.\n   *\n   * @private\n   * @returns {Array} The array from the pool.\n   */\n  function getArray() {\n    return arrayPool.pop() || [];\n  }\n\n  /**\n   * Gets an object from the object pool or creates a new one if the pool is empty.\n   *\n   * @private\n   * @returns {Object} The object from the pool.\n   */\n  function getObject() {\n    return objectPool.pop() || {\n      'array': null,\n      'cache': null,\n      'criteria': null,\n      'false': false,\n      'index': 0,\n      'null': false,\n      'number': null,\n      'object': null,\n      'push': null,\n      'string': null,\n      'true': false,\n      'undefined': false,\n      'value': null\n    };\n  }\n\n  /**\n   * Releases the given array back to the array pool.\n   *\n   * @private\n   * @param {Array} [array] The array to release.\n   */\n  function releaseArray(array) {\n    array.length = 0;\n    if (arrayPool.length < maxPoolSize) {\n      arrayPool.push(array);\n    }\n  }\n\n  /**\n   * Releases the given object back to the object pool.\n   *\n   * @private\n   * @param {Object} [object] The object to release.\n   */\n  function releaseObject(object) {\n    var cache = object.cache;\n    if (cache) {\n      releaseObject(cache);\n    }\n    object.array = object.cache = object.criteria = object.object = object.number = object.string = object.value = null;\n    if (objectPool.length < maxPoolSize) {\n      objectPool.push(object);\n    }\n  }\n\n  /**\n   * Slices the `collection` from the `start` index up to, but not including,\n   * the `end` index.\n   *\n   * Note: This function is used instead of `Array#slice` to support node lists\n   * in IE < 9 and to ensure dense arrays are returned.\n   *\n   * @private\n   * @param {Array|Object|string} collection The collection to slice.\n   * @param {number} start The start index.\n   * @param {number} end The end index.\n   * @returns {Array} Returns the new array.\n   */\n  function slice(array, start, end) {\n    start || (start = 0);\n    if (typeof end == 'undefined') {\n      end = array ? array.length : 0;\n    }\n    var index = -1,\n        length = end - start || 0,\n        result = Array(length < 0 ? 0 : length);\n\n    while (++index < length) {\n      result[index] = array[start + index];\n    }\n    return result;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new `lodash` function using the given context object.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns the `lodash` function.\n   */\n  function runInContext(context) {\n    // Avoid issues with some ES3 environments that attempt to use values, named\n    // after built-in constructors like `Object`, for the creation of literals.\n    // ES5 clears this up by stating that literals must use built-in constructors.\n    // See http://es5.github.io/#x11.1.5.\n    context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;\n\n    /** Native constructor references */\n    var Array = context.Array,\n        Boolean = context.Boolean,\n        Date = context.Date,\n        Function = context.Function,\n        Math = context.Math,\n        Number = context.Number,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /**\n     * Used for `Array` method references.\n     *\n     * Normally `Array.prototype` would suffice, however, using an array literal\n     * avoids issues in Narwhal.\n     */\n    var arrayRef = [];\n\n    /** Used for native method references */\n    var objectProto = Object.prototype;\n\n    /** Used to restore the original `_` reference in `noConflict` */\n    var oldDash = context._;\n\n    /** Used to resolve the internal [[Class]] of values */\n    var toString = objectProto.toString;\n\n    /** Used to detect if a method is native */\n    var reNative = RegExp('^' +\n      String(toString)\n        .replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n        .replace(/toString| for [^\\]]+/g, '.*?') + '$'\n    );\n\n    /** Native method shortcuts */\n    var ceil = Math.ceil,\n        clearTimeout = context.clearTimeout,\n        floor = Math.floor,\n        fnToString = Function.prototype.toString,\n        getPrototypeOf = isNative(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,\n        hasOwnProperty = objectProto.hasOwnProperty,\n        push = arrayRef.push,\n        setTimeout = context.setTimeout,\n        splice = arrayRef.splice,\n        unshift = arrayRef.unshift;\n\n    /** Used to set meta data on functions */\n    var defineProperty = (function() {\n      // IE 8 only accepts DOM elements\n      try {\n        var o = {},\n            func = isNative(func = Object.defineProperty) && func,\n            result = func(o, o, o) && func;\n      } catch(e) { }\n      return result;\n    }());\n\n    /* Native method shortcuts for methods with the same name as other `lodash` methods */\n    var nativeCreate = isNative(nativeCreate = Object.create) && nativeCreate,\n        nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray,\n        nativeIsFinite = context.isFinite,\n        nativeIsNaN = context.isNaN,\n        nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys,\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random;\n\n    /** Used to lookup a built-in constructor by [[Class]] */\n    var ctorByClass = {};\n    ctorByClass[arrayClass] = Array;\n    ctorByClass[boolClass] = Boolean;\n    ctorByClass[dateClass] = Date;\n    ctorByClass[funcClass] = Function;\n    ctorByClass[objectClass] = Object;\n    ctorByClass[numberClass] = Number;\n    ctorByClass[regexpClass] = RegExp;\n    ctorByClass[stringClass] = String;\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps the given value to enable intuitive\n     * method chaining.\n     *\n     * In addition to Lo-Dash methods, wrappers also have the following `Array` methods:\n     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`, `splice`,\n     * and `unshift`\n     *\n     * Chaining is supported in custom builds as long as the `value` method is\n     * implicitly or explicitly included in the build.\n     *\n     * The chainable wrapper functions are:\n     * `after`, `assign`, `bind`, `bindAll`, `bindKey`, `chain`, `compact`,\n     * `compose`, `concat`, `countBy`, `create`, `createCallback`, `curry`,\n     * `debounce`, `defaults`, `defer`, `delay`, `difference`, `filter`, `flatten`,\n     * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,\n     * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,\n     * `invoke`, `keys`, `map`, `max`, `memoize`, `merge`, `min`, `object`, `omit`,\n     * `once`, `pairs`, `partial`, `partialRight`, `pick`, `pluck`, `pull`, `push`,\n     * `range`, `reject`, `remove`, `rest`, `reverse`, `shuffle`, `slice`, `sort`,\n     * `sortBy`, `splice`, `tap`, `throttle`, `times`, `toArray`, `transform`,\n     * `union`, `uniq`, `unshift`, `unzip`, `values`, `where`, `without`, `wrap`,\n     * and `zip`\n     *\n     * The non-chainable wrapper functions are:\n     * `clone`, `cloneDeep`, `contains`, `escape`, `every`, `find`, `findIndex`,\n     * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `has`, `identity`,\n     * `indexOf`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,\n     * `isEmpty`, `isEqual`, `isFinite`, `isFunction`, `isNaN`, `isNull`, `isNumber`,\n     * `isObject`, `isPlainObject`, `isRegExp`, `isString`, `isUndefined`, `join`,\n     * `lastIndexOf`, `mixin`, `noConflict`, `parseInt`, `pop`, `random`, `reduce`,\n     * `reduceRight`, `result`, `shift`, `size`, `some`, `sortedIndex`, `runInContext`,\n     * `template`, `unescape`, `uniqueId`, and `value`\n     *\n     * The wrapper functions `first` and `last` return wrapped values when `n` is\n     * provided, otherwise they return unwrapped values.\n     *\n     * Explicit chaining can be enabled by using the `_.chain` method.\n     *\n     * @name _\n     * @constructor\n     * @category Chaining\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns a `lodash` instance.\n     * @example\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // returns an unwrapped value\n     * wrapped.reduce(function(sum, num) {\n     *   return sum + num;\n     * });\n     * // => 6\n     *\n     * // returns a wrapped value\n     * var squares = wrapped.map(function(num) {\n     *   return num * num;\n     * });\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      // don't wrap if already wrapped, even if wrapped by a different `lodash` constructor\n      return (value && typeof value == 'object' && !isArray(value) && hasOwnProperty.call(value, '__wrapped__'))\n       ? value\n       : new lodashWrapper(value);\n    }\n\n    /**\n     * A fast path for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @param {boolean} chainAll A flag to enable chaining for all methods\n     * @returns {Object} Returns a `lodash` instance.\n     */\n    function lodashWrapper(value, chainAll) {\n      this.__chain__ = !!chainAll;\n      this.__wrapped__ = value;\n    }\n    // ensure `new lodashWrapper` is an instance of `lodash`\n    lodashWrapper.prototype = lodash.prototype;\n\n    /**\n     * An object used to flag environments features.\n     *\n     * @static\n     * @memberOf _\n     * @type Object\n     */\n    var support = lodash.support = {};\n\n    /**\n     * Detect if functions can be decompiled by `Function#toString`\n     * (all but PS3 and older Opera mobile browsers & avoided in Windows 8 apps).\n     *\n     * @memberOf _.support\n     * @type boolean\n     */\n    support.funcDecomp = !isNative(context.WinRTError) && reThis.test(runInContext);\n\n    /**\n     * Detect if `Function#name` is supported (all but IE).\n     *\n     * @memberOf _.support\n     * @type boolean\n     */\n    support.funcNames = typeof Function.name == 'string';\n\n    /**\n     * By default, the template delimiters used by Lo-Dash are similar to those in\n     * embedded Ruby (ERB). Change the following template settings to use alternative\n     * delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type Object\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'escape': /<%-([\\s\\S]+?)%>/g,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'evaluate': /<%([\\s\\S]+?)%>/g,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type string\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type Object\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type Function\n         */\n        '_': lodash\n      }\n    };\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * The base implementation of `_.bind` that creates the bound function and\n     * sets its meta data.\n     *\n     * @private\n     * @param {Array} bindData The bind data array.\n     * @returns {Function} Returns the new bound function.\n     */\n    function baseBind(bindData) {\n      var func = bindData[0],\n          partialArgs = bindData[2],\n          thisArg = bindData[4];\n\n      function bound() {\n        // `Function#bind` spec\n        // http://es5.github.io/#x15.3.4.5\n        if (partialArgs) {\n          // avoid `arguments` object deoptimizations by using `slice` instead\n          // of `Array.prototype.slice.call` and not assigning `arguments` to a\n          // variable as a ternary expression\n          var args = slice(partialArgs);\n          push.apply(args, arguments);\n        }\n        // mimic the constructor's `return` behavior\n        // http://es5.github.io/#x13.2.2\n        if (this instanceof bound) {\n          // ensure `new bound` is an instance of `func`\n          var thisBinding = baseCreate(func.prototype),\n              result = func.apply(thisBinding, args || arguments);\n          return isObject(result) ? result : thisBinding;\n        }\n        return func.apply(thisArg, args || arguments);\n      }\n      setBindData(bound, bindData);\n      return bound;\n    }\n\n    /**\n     * The base implementation of `_.clone` without argument juggling or support\n     * for `thisArg` binding.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} [isDeep=false] Specify a deep clone.\n     * @param {Function} [callback] The function to customize cloning values.\n     * @param {Array} [stackA=[]] Tracks traversed source objects.\n     * @param {Array} [stackB=[]] Associates clones with source counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, isDeep, callback, stackA, stackB) {\n      if (callback) {\n        var result = callback(value);\n        if (typeof result != 'undefined') {\n          return result;\n        }\n      }\n      // inspect [[Class]]\n      var isObj = isObject(value);\n      if (isObj) {\n        var className = toString.call(value);\n        if (!cloneableClasses[className]) {\n          return value;\n        }\n        var ctor = ctorByClass[className];\n        switch (className) {\n          case boolClass:\n          case dateClass:\n            return new ctor(+value);\n\n          case numberClass:\n          case stringClass:\n            return new ctor(value);\n\n          case regexpClass:\n            result = ctor(value.source, reFlags.exec(value));\n            result.lastIndex = value.lastIndex;\n            return result;\n        }\n      } else {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isDeep) {\n        // check for circular references and return corresponding clone\n        var initedStack = !stackA;\n        stackA || (stackA = getArray());\n        stackB || (stackB = getArray());\n\n        var length = stackA.length;\n        while (length--) {\n          if (stackA[length] == value) {\n            return stackB[length];\n          }\n        }\n        result = isArr ? ctor(value.length) : {};\n      }\n      else {\n        result = isArr ? slice(value) : assign({}, value);\n      }\n      // add array properties assigned by `RegExp#exec`\n      if (isArr) {\n        if (hasOwnProperty.call(value, 'index')) {\n          result.index = value.index;\n        }\n        if (hasOwnProperty.call(value, 'input')) {\n          result.input = value.input;\n        }\n      }\n      // exit for shallow clone\n      if (!isDeep) {\n        return result;\n      }\n      // add the source value to the stack of traversed objects\n      // and associate it with its clone\n      stackA.push(value);\n      stackB.push(result);\n\n      // recursively populate clone (susceptible to call stack limits)\n      (isArr ? forEach : forOwn)(value, function(objValue, key) {\n        result[key] = baseClone(objValue, isDeep, callback, stackA, stackB);\n      });\n\n      if (initedStack) {\n        releaseArray(stackA);\n        releaseArray(stackB);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} prototype The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    function baseCreate(prototype, properties) {\n      return isObject(prototype) ? nativeCreate(prototype) : {};\n    }\n    // fallback for browsers without `Object.create`\n    if (!nativeCreate) {\n      baseCreate = (function() {\n        function Object() {}\n        return function(prototype) {\n          if (isObject(prototype)) {\n            Object.prototype = prototype;\n            var result = new Object;\n            Object.prototype = null;\n          }\n          return result || context.Object();\n        };\n      }());\n    }\n\n    /**\n     * The base implementation of `_.createCallback` without support for creating\n     * \"_.pluck\" or \"_.where\" style callbacks.\n     *\n     * @private\n     * @param {*} [func=identity] The value to convert to a callback.\n     * @param {*} [thisArg] The `this` binding of the created callback.\n     * @param {number} [argCount] The number of arguments the callback accepts.\n     * @returns {Function} Returns a callback function.\n     */\n    function baseCreateCallback(func, thisArg, argCount) {\n      if (typeof func != 'function') {\n        return identity;\n      }\n      // exit early for no `thisArg` or already bound by `Function#bind`\n      if (typeof thisArg == 'undefined' || !('prototype' in func)) {\n        return func;\n      }\n      var bindData = func.__bindData__;\n      if (typeof bindData == 'undefined') {\n        if (support.funcNames) {\n          bindData = !func.name;\n        }\n        bindData = bindData || !support.funcDecomp;\n        if (!bindData) {\n          var source = fnToString.call(func);\n          if (!support.funcNames) {\n            bindData = !reFuncName.test(source);\n          }\n          if (!bindData) {\n            // checks if `func` references the `this` keyword and stores the result\n            bindData = reThis.test(source);\n            setBindData(func, bindData);\n          }\n        }\n      }\n      // exit early if there are no `this` references or `func` is bound\n      if (bindData === false || (bindData !== true && bindData[1] & 1)) {\n        return func;\n      }\n      switch (argCount) {\n        case 1: return function(value) {\n          return func.call(thisArg, value);\n        };\n        case 2: return function(a, b) {\n          return func.call(thisArg, a, b);\n        };\n        case 3: return function(value, index, collection) {\n          return func.call(thisArg, value, index, collection);\n        };\n        case 4: return function(accumulator, value, index, collection) {\n          return func.call(thisArg, accumulator, value, index, collection);\n        };\n      }\n      return bind(func, thisArg);\n    }\n\n    /**\n     * The base implementation of `createWrapper` that creates the wrapper and\n     * sets its meta data.\n     *\n     * @private\n     * @param {Array} bindData The bind data array.\n     * @returns {Function} Returns the new function.\n     */\n    function baseCreateWrapper(bindData) {\n      var func = bindData[0],\n          bitmask = bindData[1],\n          partialArgs = bindData[2],\n          partialRightArgs = bindData[3],\n          thisArg = bindData[4],\n          arity = bindData[5];\n\n      var isBind = bitmask & 1,\n          isBindKey = bitmask & 2,\n          isCurry = bitmask & 4,\n          isCurryBound = bitmask & 8,\n          key = func;\n\n      function bound() {\n        var thisBinding = isBind ? thisArg : this;\n        if (partialArgs) {\n          var args = slice(partialArgs);\n          push.apply(args, arguments);\n        }\n        if (partialRightArgs || isCurry) {\n          args || (args = slice(arguments));\n          if (partialRightArgs) {\n            push.apply(args, partialRightArgs);\n          }\n          if (isCurry && args.length < arity) {\n            bitmask |= 16 & ~32;\n            return baseCreateWrapper([func, (isCurryBound ? bitmask : bitmask & ~3), args, null, thisArg, arity]);\n          }\n        }\n        args || (args = arguments);\n        if (isBindKey) {\n          func = thisBinding[key];\n        }\n        if (this instanceof bound) {\n          thisBinding = baseCreate(func.prototype);\n          var result = func.apply(thisBinding, args);\n          return isObject(result) ? result : thisBinding;\n        }\n        return func.apply(thisBinding, args);\n      }\n      setBindData(bound, bindData);\n      return bound;\n    }\n\n    /**\n     * The base implementation of `_.difference` that accepts a single array\n     * of values to exclude.\n     *\n     * @private\n     * @param {Array} array The array to process.\n     * @param {Array} [values] The array of values to exclude.\n     * @returns {Array} Returns a new array of filtered values.\n     */\n    function baseDifference(array, values) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = array ? array.length : 0,\n          isLarge = length >= largeArraySize && indexOf === baseIndexOf,\n          result = [];\n\n      if (isLarge) {\n        var cache = createCache(values);\n        if (cache) {\n          indexOf = cacheIndexOf;\n          values = cache;\n        } else {\n          isLarge = false;\n        }\n      }\n      while (++index < length) {\n        var value = array[index];\n        if (indexOf(values, value) < 0) {\n          result.push(value);\n        }\n      }\n      if (isLarge) {\n        releaseObject(values);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` without support for callback\n     * shorthands or `thisArg` binding.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.\n     * @param {boolean} [isStrict=false] A flag to restrict flattening to arrays and `arguments` objects.\n     * @param {number} [fromIndex=0] The index to start from.\n     * @returns {Array} Returns a new flattened array.\n     */\n    function baseFlatten(array, isShallow, isStrict, fromIndex) {\n      var index = (fromIndex || 0) - 1,\n          length = array ? array.length : 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n\n        if (value && typeof value == 'object' && typeof value.length == 'number'\n            && (isArray(value) || isArguments(value))) {\n          // recursively flatten arrays (susceptible to call stack limits)\n          if (!isShallow) {\n            value = baseFlatten(value, isShallow, isStrict);\n          }\n          var valIndex = -1,\n              valLength = value.length,\n              resIndex = result.length;\n\n          result.length += valLength;\n          while (++valIndex < valLength) {\n            result[resIndex++] = value[valIndex];\n          }\n        } else if (!isStrict) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.isEqual`, without support for `thisArg` binding,\n     * that allows partial \"_.where\" style comparisons.\n     *\n     * @private\n     * @param {*} a The value to compare.\n     * @param {*} b The other value to compare.\n     * @param {Function} [callback] The function to customize comparing values.\n     * @param {Function} [isWhere=false] A flag to indicate performing partial comparisons.\n     * @param {Array} [stackA=[]] Tracks traversed `a` objects.\n     * @param {Array} [stackB=[]] Tracks traversed `b` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(a, b, callback, isWhere, stackA, stackB) {\n      // used to indicate that when comparing objects, `a` has at least the properties of `b`\n      if (callback) {\n        var result = callback(a, b);\n        if (typeof result != 'undefined') {\n          return !!result;\n        }\n      }\n      // exit early for identical values\n      if (a === b) {\n        // treat `+0` vs. `-0` as not equal\n        return a !== 0 || (1 / a == 1 / b);\n      }\n      var type = typeof a,\n          otherType = typeof b;\n\n      // exit early for unlike primitive values\n      if (a === a &&\n          !(a && objectTypes[type]) &&\n          !(b && objectTypes[otherType])) {\n        return false;\n      }\n      // exit early for `null` and `undefined` avoiding ES3's Function#call behavior\n      // http://es5.github.io/#x15.3.4.4\n      if (a == null || b == null) {\n        return a === b;\n      }\n      // compare [[Class]] names\n      var className = toString.call(a),\n          otherClass = toString.call(b);\n\n      if (className == argsClass) {\n        className = objectClass;\n      }\n      if (otherClass == argsClass) {\n        otherClass = objectClass;\n      }\n      if (className != otherClass) {\n        return false;\n      }\n      switch (className) {\n        case boolClass:\n        case dateClass:\n          // coerce dates and booleans to numbers, dates to milliseconds and booleans\n          // to `1` or `0` treating invalid dates coerced to `NaN` as not equal\n          return +a == +b;\n\n        case numberClass:\n          // treat `NaN` vs. `NaN` as equal\n          return (a != +a)\n            ? b != +b\n            // but treat `+0` vs. `-0` as not equal\n            : (a == 0 ? (1 / a == 1 / b) : a == +b);\n\n        case regexpClass:\n        case stringClass:\n          // coerce regexes to strings (http://es5.github.io/#x15.10.6.4)\n          // treat string primitives and their corresponding object instances as equal\n          return a == String(b);\n      }\n      var isArr = className == arrayClass;\n      if (!isArr) {\n        // unwrap any `lodash` wrapped values\n        var aWrapped = hasOwnProperty.call(a, '__wrapped__'),\n            bWrapped = hasOwnProperty.call(b, '__wrapped__');\n\n        if (aWrapped || bWrapped) {\n          return baseIsEqual(aWrapped ? a.__wrapped__ : a, bWrapped ? b.__wrapped__ : b, callback, isWhere, stackA, stackB);\n        }\n        // exit for functions and DOM nodes\n        if (className != objectClass) {\n          return false;\n        }\n        // in older versions of Opera, `arguments` objects have `Array` constructors\n        var ctorA = a.constructor,\n            ctorB = b.constructor;\n\n        // non `Object` object instances with different constructors are not equal\n        if (ctorA != ctorB &&\n              !(isFunction(ctorA) && ctorA instanceof ctorA && isFunction(ctorB) && ctorB instanceof ctorB) &&\n              ('constructor' in a && 'constructor' in b)\n            ) {\n          return false;\n        }\n      }\n      // assume cyclic structures are equal\n      // the algorithm for detecting cyclic structures is adapted from ES 5.1\n      // section 15.12.3, abstract operation `JO` (http://es5.github.io/#x15.12.3)\n      var initedStack = !stackA;\n      stackA || (stackA = getArray());\n      stackB || (stackB = getArray());\n\n      var length = stackA.length;\n      while (length--) {\n        if (stackA[length] == a) {\n          return stackB[length] == b;\n        }\n      }\n      var size = 0;\n      result = true;\n\n      // add `a` and `b` to the stack of traversed objects\n      stackA.push(a);\n      stackB.push(b);\n\n      // recursively compare objects and arrays (susceptible to call stack limits)\n      if (isArr) {\n        // compare lengths to determine if a deep comparison is necessary\n        length = a.length;\n        size = b.length;\n        result = size == length;\n\n        if (result || isWhere) {\n          // deep compare the contents, ignoring non-numeric properties\n          while (size--) {\n            var index = length,\n                value = b[size];\n\n            if (isWhere) {\n              while (index--) {\n                if ((result = baseIsEqual(a[index], value, callback, isWhere, stackA, stackB))) {\n                  break;\n                }\n              }\n            } else if (!(result = baseIsEqual(a[size], value, callback, isWhere, stackA, stackB))) {\n              break;\n            }\n          }\n        }\n      }\n      else {\n        // deep compare objects using `forIn`, instead of `forOwn`, to avoid `Object.keys`\n        // which, in this case, is more costly\n        forIn(b, function(value, key, b) {\n          if (hasOwnProperty.call(b, key)) {\n            // count the number of properties.\n            size++;\n            // deep compare each property value.\n            return (result = hasOwnProperty.call(a, key) && baseIsEqual(a[key], value, callback, isWhere, stackA, stackB));\n          }\n        });\n\n        if (result && !isWhere) {\n          // ensure both objects have the same number of properties\n          forIn(a, function(value, key, a) {\n            if (hasOwnProperty.call(a, key)) {\n              // `size` will be `-1` if `a` has more properties than `b`\n              return (result = --size > -1);\n            }\n          });\n        }\n      }\n      stackA.pop();\n      stackB.pop();\n\n      if (initedStack) {\n        releaseArray(stackA);\n        releaseArray(stackB);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.merge` without argument juggling or support\n     * for `thisArg` binding.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {Function} [callback] The function to customize merging properties.\n     * @param {Array} [stackA=[]] Tracks traversed source objects.\n     * @param {Array} [stackB=[]] Associates values with source counterparts.\n     */\n    function baseMerge(object, source, callback, stackA, stackB) {\n      (isArray(source) ? forEach : forOwn)(source, function(source, key) {\n        var found,\n            isArr,\n            result = source,\n            value = object[key];\n\n        if (source && ((isArr = isArray(source)) || isPlainObject(source))) {\n          // avoid merging previously merged cyclic sources\n          var stackLength = stackA.length;\n          while (stackLength--) {\n            if ((found = stackA[stackLength] == source)) {\n              value = stackB[stackLength];\n              break;\n            }\n          }\n          if (!found) {\n            var isShallow;\n            if (callback) {\n              result = callback(value, source);\n              if ((isShallow = typeof result != 'undefined')) {\n                value = result;\n              }\n            }\n            if (!isShallow) {\n              value = isArr\n                ? (isArray(value) ? value : [])\n                : (isPlainObject(value) ? value : {});\n            }\n            // add `source` and associated `value` to the stack of traversed objects\n            stackA.push(source);\n            stackB.push(value);\n\n            // recursively merge objects and arrays (susceptible to call stack limits)\n            if (!isShallow) {\n              baseMerge(value, source, callback, stackA, stackB);\n            }\n          }\n        }\n        else {\n          if (callback) {\n            result = callback(value, source);\n            if (typeof result == 'undefined') {\n              result = source;\n            }\n          }\n          if (typeof result != 'undefined') {\n            value = result;\n          }\n        }\n        object[key] = value;\n      });\n    }\n\n    /**\n     * The base implementation of `_.random` without argument juggling or support\n     * for returning floating-point numbers.\n     *\n     * @private\n     * @param {number} min The minimum possible value.\n     * @param {number} max The maximum possible value.\n     * @returns {number} Returns a random number.\n     */\n    function baseRandom(min, max) {\n      return min + floor(nativeRandom() * (max - min + 1));\n    }\n\n    /**\n     * The base implementation of `_.uniq` without support for callback shorthands\n     * or `thisArg` binding.\n     *\n     * @private\n     * @param {Array} array The array to process.\n     * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.\n     * @param {Function} [callback] The function called per iteration.\n     * @returns {Array} Returns a duplicate-value-free array.\n     */\n    function baseUniq(array, isSorted, callback) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = array ? array.length : 0,\n          result = [];\n\n      var isLarge = !isSorted && length >= largeArraySize && indexOf === baseIndexOf,\n          seen = (callback || isLarge) ? getArray() : result;\n\n      if (isLarge) {\n        var cache = createCache(seen);\n        indexOf = cacheIndexOf;\n        seen = cache;\n      }\n      while (++index < length) {\n        var value = array[index],\n            computed = callback ? callback(value, index, array) : value;\n\n        if (isSorted\n              ? !index || seen[seen.length - 1] !== computed\n              : indexOf(seen, computed) < 0\n            ) {\n          if (callback || isLarge) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      if (isLarge) {\n        releaseArray(seen.array);\n        releaseObject(seen);\n      } else if (callback) {\n        releaseArray(seen);\n      }\n      return result;\n    }\n\n    /**\n     * Creates a function that aggregates a collection, creating an object composed\n     * of keys generated from the results of running each element of the collection\n     * through a callback. The given `setter` function sets the keys and values\n     * of the composed object.\n     *\n     * @private\n     * @param {Function} setter The setter function.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter) {\n      return function(collection, callback, thisArg) {\n        var result = {};\n        callback = lodash.createCallback(callback, thisArg, 3);\n\n        var index = -1,\n            length = collection ? collection.length : 0;\n\n        if (typeof length == 'number') {\n          while (++index < length) {\n            var value = collection[index];\n            setter(result, value, callback(value, index, collection), collection);\n          }\n        } else {\n          forOwn(collection, function(value, key, collection) {\n            setter(result, value, callback(value, key, collection), collection);\n          });\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that, when called, either curries or invokes `func`\n     * with an optional `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to reference.\n     * @param {number} bitmask The bitmask of method flags to compose.\n     *  The bitmask may be composed of the following flags:\n     *  1 - `_.bind`\n     *  2 - `_.bindKey`\n     *  4 - `_.curry`\n     *  8 - `_.curry` (bound)\n     *  16 - `_.partial`\n     *  32 - `_.partialRight`\n     * @param {Array} [partialArgs] An array of arguments to prepend to those\n     *  provided to the new function.\n     * @param {Array} [partialRightArgs] An array of arguments to append to those\n     *  provided to the new function.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new function.\n     */\n    function createWrapper(func, bitmask, partialArgs, partialRightArgs, thisArg, arity) {\n      var isBind = bitmask & 1,\n          isBindKey = bitmask & 2,\n          isCurry = bitmask & 4,\n          isCurryBound = bitmask & 8,\n          isPartial = bitmask & 16,\n          isPartialRight = bitmask & 32;\n\n      if (!isBindKey && !isFunction(func)) {\n        throw new TypeError;\n      }\n      if (isPartial && !partialArgs.length) {\n        bitmask &= ~16;\n        isPartial = partialArgs = false;\n      }\n      if (isPartialRight && !partialRightArgs.length) {\n        bitmask &= ~32;\n        isPartialRight = partialRightArgs = false;\n      }\n      var bindData = func && func.__bindData__;\n      if (bindData && bindData !== true) {\n        // clone `bindData`\n        bindData = slice(bindData);\n        if (bindData[2]) {\n          bindData[2] = slice(bindData[2]);\n        }\n        if (bindData[3]) {\n          bindData[3] = slice(bindData[3]);\n        }\n        // set `thisBinding` is not previously bound\n        if (isBind && !(bindData[1] & 1)) {\n          bindData[4] = thisArg;\n        }\n        // set if previously bound but not currently (subsequent curried functions)\n        if (!isBind && bindData[1] & 1) {\n          bitmask |= 8;\n        }\n        // set curried arity if not yet set\n        if (isCurry && !(bindData[1] & 4)) {\n          bindData[5] = arity;\n        }\n        // append partial left arguments\n        if (isPartial) {\n          push.apply(bindData[2] || (bindData[2] = []), partialArgs);\n        }\n        // append partial right arguments\n        if (isPartialRight) {\n          unshift.apply(bindData[3] || (bindData[3] = []), partialRightArgs);\n        }\n        // merge flags\n        bindData[1] |= bitmask;\n        return createWrapper.apply(null, bindData);\n      }\n      // fast path for `_.bind`\n      var creater = (bitmask == 1 || bitmask === 17) ? baseBind : baseCreateWrapper;\n      return creater([func, bitmask, partialArgs, partialRightArgs, thisArg, arity]);\n    }\n\n    /**\n     * Used by `escape` to convert characters to HTML entities.\n     *\n     * @private\n     * @param {string} match The matched character to escape.\n     * @returns {string} Returns the escaped character.\n     */\n    function escapeHtmlChar(match) {\n      return htmlEscapes[match];\n    }\n\n    /**\n     * Gets the appropriate \"indexOf\" function. If the `_.indexOf` method is\n     * customized, this method returns the custom method, otherwise it returns\n     * the `baseIndexOf` function.\n     *\n     * @private\n     * @returns {Function} Returns the \"indexOf\" function.\n     */\n    function getIndexOf() {\n      var result = (result = lodash.indexOf) === indexOf ? baseIndexOf : result;\n      return result;\n    }\n\n    /**\n     * Checks if `value` is a native function.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a native function, else `false`.\n     */\n    function isNative(value) {\n      return typeof value == 'function' && reNative.test(value);\n    }\n\n    /**\n     * Sets `this` binding data on a given function.\n     *\n     * @private\n     * @param {Function} func The function to set data on.\n     * @param {Array} value The data array to set.\n     */\n    var setBindData = !defineProperty ? noop : function(func, value) {\n      descriptor.value = value;\n      defineProperty(func, '__bindData__', descriptor);\n      descriptor.value = null;\n    };\n\n    /**\n     * A fallback implementation of `isPlainObject` which checks if a given value\n     * is an object created by the `Object` constructor, assuming objects created\n     * by the `Object` constructor have no inherited enumerable properties and that\n     * there are no `Object.prototype` extensions.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     */\n    function shimIsPlainObject(value) {\n      var ctor,\n          result;\n\n      // avoid non Object objects, `arguments` objects, and DOM elements\n      if (!(value && toString.call(value) == objectClass) ||\n          (ctor = value.constructor, isFunction(ctor) && !(ctor instanceof ctor))) {\n        return false;\n      }\n      // In most environments an object's own properties are iterated before\n      // its inherited properties. If the last iterated property is an object's\n      // own property then there are no inherited enumerable properties.\n      forIn(value, function(value, key) {\n        result = key;\n      });\n      return typeof result == 'undefined' || hasOwnProperty.call(value, result);\n    }\n\n    /**\n     * Used by `unescape` to convert HTML entities to characters.\n     *\n     * @private\n     * @param {string} match The matched character to unescape.\n     * @returns {string} Returns the unescaped character.\n     */\n    function unescapeHtmlChar(match) {\n      return htmlUnescapes[match];\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Checks if `value` is an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is an `arguments` object, else `false`.\n     * @example\n     *\n     * (function() { return _.isArguments(arguments); })(1, 2, 3);\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    function isArguments(value) {\n      return value && typeof value == 'object' && typeof value.length == 'number' &&\n        toString.call(value) == argsClass || false;\n    }\n\n    /**\n     * Checks if `value` is an array.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is an array, else `false`.\n     * @example\n     *\n     * (function() { return _.isArray(arguments); })();\n     * // => false\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     */\n    var isArray = nativeIsArray || function(value) {\n      return value && typeof value == 'object' && typeof value.length == 'number' &&\n        toString.call(value) == arrayClass || false;\n    };\n\n    /**\n     * A fallback implementation of `Object.keys` which produces an array of the\n     * given object's own enumerable property names.\n     *\n     * @private\n     * @type Function\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns an array of property names.\n     */\n    var shimKeys = function(object) {\n      var index, iterable = object, result = [];\n      if (!iterable) return result;\n      if (!(objectTypes[typeof object])) return result;\n        for (index in iterable) {\n          if (hasOwnProperty.call(iterable, index)) {\n            result.push(index);\n          }\n        }\n      return result\n    };\n\n    /**\n     * Creates an array composed of the own enumerable property names of an object.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns an array of property names.\n     * @example\n     *\n     * _.keys({ 'one': 1, 'two': 2, 'three': 3 });\n     * // => ['one', 'two', 'three'] (property order is not guaranteed across environments)\n     */\n    var keys = !nativeKeys ? shimKeys : function(object) {\n      if (!isObject(object)) {\n        return [];\n      }\n      return nativeKeys(object);\n    };\n\n    /**\n     * Used to convert characters to HTML entities:\n     *\n     * Though the `>` character is escaped for symmetry, characters like `>` and `/`\n     * don't require escaping in HTML and have no special meaning unless they're part\n     * of a tag or an unquoted attribute value.\n     * http://mathiasbynens.be/notes/ambiguous-ampersands (under \"semi-related fun fact\")\n     */\n    var htmlEscapes = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;'\n    };\n\n    /** Used to convert HTML entities to characters */\n    var htmlUnescapes = invert(htmlEscapes);\n\n    /** Used to match HTML entities and HTML characters */\n    var reEscapedHtml = RegExp('(' + keys(htmlUnescapes).join('|') + ')', 'g'),\n        reUnescapedHtml = RegExp('[' + keys(htmlEscapes).join('') + ']', 'g');\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable properties of source object(s) to the destination\n     * object. Subsequent sources will overwrite property assignments of previous\n     * sources. If a callback is provided it will be executed to produce the\n     * assigned values. The callback is bound to `thisArg` and invoked with two\n     * arguments; (objectValue, sourceValue).\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @alias extend\n     * @category Objects\n     * @param {Object} object The destination object.\n     * @param {...Object} [source] The source objects.\n     * @param {Function} [callback] The function to customize assigning values.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the destination object.\n     * @example\n     *\n     * _.assign({ 'name': 'fred' }, { 'employer': 'slate' });\n     * // => { 'name': 'fred', 'employer': 'slate' }\n     *\n     * var defaults = _.partialRight(_.assign, function(a, b) {\n     *   return typeof a == 'undefined' ? b : a;\n     * });\n     *\n     * var object = { 'name': 'barney' };\n     * defaults(object, { 'name': 'fred', 'employer': 'slate' });\n     * // => { 'name': 'barney', 'employer': 'slate' }\n     */\n    var assign = function(object, source, guard) {\n      var index, iterable = object, result = iterable;\n      if (!iterable) return result;\n      var args = arguments,\n          argsIndex = 0,\n          argsLength = typeof guard == 'number' ? 2 : args.length;\n      if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n        var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n      } else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n        callback = args[--argsLength];\n      }\n      while (++argsIndex < argsLength) {\n        iterable = args[argsIndex];\n        if (iterable && objectTypes[typeof iterable]) {\n        var ownIndex = -1,\n            ownProps = objectTypes[typeof iterable] && keys(iterable),\n            length = ownProps ? ownProps.length : 0;\n\n        while (++ownIndex < length) {\n          index = ownProps[ownIndex];\n          result[index] = callback ? callback(result[index], iterable[index]) : iterable[index];\n        }\n        }\n      }\n      return result\n    };\n\n    /**\n     * Creates a clone of `value`. If `isDeep` is `true` nested objects will also\n     * be cloned, otherwise they will be assigned by reference. If a callback\n     * is provided it will be executed to produce the cloned values. If the\n     * callback returns `undefined` cloning will be handled by the method instead.\n     * The callback is bound to `thisArg` and invoked with one argument; (value).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to clone.\n     * @param {boolean} [isDeep=false] Specify a deep clone.\n     * @param {Function} [callback] The function to customize cloning values.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the cloned value.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * var shallow = _.clone(characters);\n     * shallow[0] === characters[0];\n     * // => true\n     *\n     * var deep = _.clone(characters, true);\n     * deep[0] === characters[0];\n     * // => false\n     *\n     * _.mixin({\n     *   'clone': _.partialRight(_.clone, function(value) {\n     *     return _.isElement(value) ? value.cloneNode(false) : undefined;\n     *   })\n     * });\n     *\n     * var clone = _.clone(document.body);\n     * clone.childNodes.length;\n     * // => 0\n     */\n    function clone(value, isDeep, callback, thisArg) {\n      // allows working with \"Collections\" methods without using their `index`\n      // and `collection` arguments for `isDeep` and `callback`\n      if (typeof isDeep != 'boolean' && isDeep != null) {\n        thisArg = callback;\n        callback = isDeep;\n        isDeep = false;\n      }\n      return baseClone(value, isDeep, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));\n    }\n\n    /**\n     * Creates a deep clone of `value`. If a callback is provided it will be\n     * executed to produce the cloned values. If the callback returns `undefined`\n     * cloning will be handled by the method instead. The callback is bound to\n     * `thisArg` and invoked with one argument; (value).\n     *\n     * Note: This method is loosely based on the structured clone algorithm. Functions\n     * and DOM nodes are **not** cloned. The enumerable properties of `arguments` objects and\n     * objects created by constructors other than `Object` are cloned to plain `Object` objects.\n     * See http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to deep clone.\n     * @param {Function} [callback] The function to customize cloning values.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the deep cloned value.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * var deep = _.cloneDeep(characters);\n     * deep[0] === characters[0];\n     * // => false\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'node': element\n     * };\n     *\n     * var clone = _.cloneDeep(view, function(value) {\n     *   return _.isElement(value) ? value.cloneNode(true) : undefined;\n     * });\n     *\n     * clone.node == view.node;\n     * // => false\n     */\n    function cloneDeep(value, callback, thisArg) {\n      return baseClone(value, true, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));\n    }\n\n    /**\n     * Creates an object that inherits from the given `prototype` object. If a\n     * `properties` object is provided its own enumerable properties are assigned\n     * to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, { 'constructor': Circle });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties ? assign(result, properties) : result;\n    }\n\n    /**\n     * Assigns own enumerable properties of source object(s) to the destination\n     * object for all destination properties that resolve to `undefined`. Once a\n     * property is set, additional defaults of the same property will be ignored.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {Object} object The destination object.\n     * @param {...Object} [source] The source objects.\n     * @param- {Object} [guard] Allows working with `_.reduce` without using its\n     *  `key` and `object` arguments as sources.\n     * @returns {Object} Returns the destination object.\n     * @example\n     *\n     * var object = { 'name': 'barney' };\n     * _.defaults(object, { 'name': 'fred', 'employer': 'slate' });\n     * // => { 'name': 'barney', 'employer': 'slate' }\n     */\n    var defaults = function(object, source, guard) {\n      var index, iterable = object, result = iterable;\n      if (!iterable) return result;\n      var args = arguments,\n          argsIndex = 0,\n          argsLength = typeof guard == 'number' ? 2 : args.length;\n      while (++argsIndex < argsLength) {\n        iterable = args[argsIndex];\n        if (iterable && objectTypes[typeof iterable]) {\n        var ownIndex = -1,\n            ownProps = objectTypes[typeof iterable] && keys(iterable),\n            length = ownProps ? ownProps.length : 0;\n\n        while (++ownIndex < length) {\n          index = ownProps[ownIndex];\n          if (typeof result[index] == 'undefined') result[index] = iterable[index];\n        }\n        }\n      }\n      return result\n    };\n\n    /**\n     * This method is like `_.findIndex` except that it returns the key of the\n     * first element that passes the callback check, instead of the element itself.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to search.\n     * @param {Function|Object|string} [callback=identity] The function called per\n     *  iteration. If a property name or object is provided it will be used to\n     *  create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {string|undefined} Returns the key of the found element, else `undefined`.\n     * @example\n     *\n     * var characters = {\n     *   'barney': {  'age': 36, 'blocked': false },\n     *   'fred': {    'age': 40, 'blocked': true },\n     *   'pebbles': { 'age': 1,  'blocked': false }\n     * };\n     *\n     * _.findKey(characters, function(chr) {\n     *   return chr.age < 40;\n     * });\n     * // => 'barney' (property order is not guaranteed across environments)\n     *\n     * // using \"_.where\" callback shorthand\n     * _.findKey(characters, { 'age': 1 });\n     * // => 'pebbles'\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.findKey(characters, 'blocked');\n     * // => 'fred'\n     */\n    function findKey(object, callback, thisArg) {\n      var result;\n      callback = lodash.createCallback(callback, thisArg, 3);\n      forOwn(object, function(value, key, object) {\n        if (callback(value, key, object)) {\n          result = key;\n          return false;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements\n     * of a `collection` in the opposite order.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to search.\n     * @param {Function|Object|string} [callback=identity] The function called per\n     *  iteration. If a property name or object is provided it will be used to\n     *  create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {string|undefined} Returns the key of the found element, else `undefined`.\n     * @example\n     *\n     * var characters = {\n     *   'barney': {  'age': 36, 'blocked': true },\n     *   'fred': {    'age': 40, 'blocked': false },\n     *   'pebbles': { 'age': 1,  'blocked': true }\n     * };\n     *\n     * _.findLastKey(characters, function(chr) {\n     *   return chr.age < 40;\n     * });\n     * // => returns `pebbles`, assuming `_.findKey` returns `barney`\n     *\n     * // using \"_.where\" callback shorthand\n     * _.findLastKey(characters, { 'age': 40 });\n     * // => 'fred'\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.findLastKey(characters, 'blocked');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, callback, thisArg) {\n      var result;\n      callback = lodash.createCallback(callback, thisArg, 3);\n      forOwnRight(object, function(value, key, object) {\n        if (callback(value, key, object)) {\n          result = key;\n          return false;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * Iterates over own and inherited enumerable properties of an object,\n     * executing the callback for each property. The callback is bound to `thisArg`\n     * and invoked with three arguments; (value, key, object). Callbacks may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * Shape.prototype.move = function(x, y) {\n     *   this.x += x;\n     *   this.y += y;\n     * };\n     *\n     * _.forIn(new Shape, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'x', 'y', and 'move' (property order is not guaranteed across environments)\n     */\n    var forIn = function(collection, callback, thisArg) {\n      var index, iterable = collection, result = iterable;\n      if (!iterable) return result;\n      if (!objectTypes[typeof iterable]) return result;\n      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n        for (index in iterable) {\n          if (callback(iterable[index], index, collection) === false) return result;\n        }\n      return result\n    };\n\n    /**\n     * This method is like `_.forIn` except that it iterates over elements\n     * of a `collection` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * Shape.prototype.move = function(x, y) {\n     *   this.x += x;\n     *   this.y += y;\n     * };\n     *\n     * _.forInRight(new Shape, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'move', 'y', and 'x' assuming `_.forIn ` logs 'x', 'y', and 'move'\n     */\n    function forInRight(object, callback, thisArg) {\n      var pairs = [];\n\n      forIn(object, function(value, key) {\n        pairs.push(key, value);\n      });\n\n      var length = pairs.length;\n      callback = baseCreateCallback(callback, thisArg, 3);\n      while (length--) {\n        if (callback(pairs[length--], pairs[length], object) === false) {\n          break;\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Iterates over own enumerable properties of an object, executing the callback\n     * for each property. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, key, object). Callbacks may exit iteration early by\n     * explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.forOwn({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {\n     *   console.log(key);\n     * });\n     * // => logs '0', '1', and 'length' (property order is not guaranteed across environments)\n     */\n    var forOwn = function(collection, callback, thisArg) {\n      var index, iterable = collection, result = iterable;\n      if (!iterable) return result;\n      if (!objectTypes[typeof iterable]) return result;\n      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n        var ownIndex = -1,\n            ownProps = objectTypes[typeof iterable] && keys(iterable),\n            length = ownProps ? ownProps.length : 0;\n\n        while (++ownIndex < length) {\n          index = ownProps[ownIndex];\n          if (callback(iterable[index], index, collection) === false) return result;\n        }\n      return result\n    };\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over elements\n     * of a `collection` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.forOwnRight({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'length', '1', and '0' assuming `_.forOwn` logs '0', '1', and 'length'\n     */\n    function forOwnRight(object, callback, thisArg) {\n      var props = keys(object),\n          length = props.length;\n\n      callback = baseCreateCallback(callback, thisArg, 3);\n      while (length--) {\n        var key = props[length];\n        if (callback(object[key], key, object) === false) {\n          break;\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Creates a sorted array of property names of all enumerable properties,\n     * own and inherited, of `object` that have function values.\n     *\n     * @static\n     * @memberOf _\n     * @alias methods\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns an array of property names that have function values.\n     * @example\n     *\n     * _.functions(_);\n     * // => ['all', 'any', 'bind', 'bindAll', 'clone', 'compact', 'compose', ...]\n     */\n    function functions(object) {\n      var result = [];\n      forIn(object, function(value, key) {\n        if (isFunction(value)) {\n          result.push(key);\n        }\n      });\n      return result.sort();\n    }\n\n    /**\n     * Checks if the specified property name exists as a direct property of `object`,\n     * instead of an inherited property.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @param {string} key The name of the property to check.\n     * @returns {boolean} Returns `true` if key is a direct property, else `false`.\n     * @example\n     *\n     * _.has({ 'a': 1, 'b': 2, 'c': 3 }, 'b');\n     * // => true\n     */\n    function has(object, key) {\n      return object ? hasOwnProperty.call(object, key) : false;\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of the given object.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the created inverted object.\n     * @example\n     *\n     * _.invert({ 'first': 'fred', 'second': 'barney' });\n     * // => { 'fred': 'first', 'barney': 'second' }\n     */\n    function invert(object) {\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = {};\n\n      while (++index < length) {\n        var key = props[index];\n        result[object[key]] = key;\n      }\n      return result;\n    }\n\n    /**\n     * Checks if `value` is a boolean value.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a boolean value, else `false`.\n     * @example\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        value && typeof value == 'object' && toString.call(value) == boolClass || false;\n    }\n\n    /**\n     * Checks if `value` is a date.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a date, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     */\n    function isDate(value) {\n      return value && typeof value == 'object' && toString.call(value) == dateClass || false;\n    }\n\n    /**\n     * Checks if `value` is a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     */\n    function isElement(value) {\n      return value && value.nodeType === 1 || false;\n    }\n\n    /**\n     * Checks if `value` is empty. Arrays, strings, or `arguments` objects with a\n     * length of `0` and objects with no own enumerable properties are considered\n     * \"empty\".\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Array|Object|string} value The value to inspect.\n     * @returns {boolean} Returns `true` if the `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({});\n     * // => true\n     *\n     * _.isEmpty('');\n     * // => true\n     */\n    function isEmpty(value) {\n      var result = true;\n      if (!value) {\n        return result;\n      }\n      var className = toString.call(value),\n          length = value.length;\n\n      if ((className == arrayClass || className == stringClass || className == argsClass ) ||\n          (className == objectClass && typeof length == 'number' && isFunction(value.splice))) {\n        return !length;\n      }\n      forOwn(value, function() {\n        return (result = false);\n      });\n      return result;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent to each other. If a callback is provided it will be executed\n     * to compare values. If the callback returns `undefined` comparisons will\n     * be handled by the method instead. The callback is bound to `thisArg` and\n     * invoked with two arguments; (a, b).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} a The value to compare.\n     * @param {*} b The other value to compare.\n     * @param {Function} [callback] The function to customize comparing values.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'name': 'fred' };\n     * var copy = { 'name': 'fred' };\n     *\n     * object == copy;\n     * // => false\n     *\n     * _.isEqual(object, copy);\n     * // => true\n     *\n     * var words = ['hello', 'goodbye'];\n     * var otherWords = ['hi', 'goodbye'];\n     *\n     * _.isEqual(words, otherWords, function(a, b) {\n     *   var reGreet = /^(?:hello|hi)$/i,\n     *       aGreet = _.isString(a) && reGreet.test(a),\n     *       bGreet = _.isString(b) && reGreet.test(b);\n     *\n     *   return (aGreet || bGreet) ? (aGreet == bGreet) : undefined;\n     * });\n     * // => true\n     */\n    function isEqual(a, b, callback, thisArg) {\n      return baseIsEqual(a, b, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 2));\n    }\n\n    /**\n     * Checks if `value` is, or can be coerced to, a finite number.\n     *\n     * Note: This is not the same as native `isFinite` which will return true for\n     * booleans and empty strings. See http://es5.github.io/#x15.1.2.5.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is finite, else `false`.\n     * @example\n     *\n     * _.isFinite(-101);\n     * // => true\n     *\n     * _.isFinite('10');\n     * // => true\n     *\n     * _.isFinite(true);\n     * // => false\n     *\n     * _.isFinite('');\n     * // => false\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     */\n    function isFinite(value) {\n      return nativeIsFinite(value) && !nativeIsNaN(parseFloat(value));\n    }\n\n    /**\n     * Checks if `value` is a function.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     */\n    function isFunction(value) {\n      return typeof value == 'function';\n    }\n\n    /**\n     * Checks if `value` is the language type of Object.\n     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(1);\n     * // => false\n     */\n    function isObject(value) {\n      // check if the value is the ECMAScript language type of Object\n      // http://es5.github.io/#x8\n      // and avoid a V8 bug\n      // http://code.google.com/p/v8/issues/detail?id=2291\n      return !!(value && objectTypes[typeof value]);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * Note: This is not the same as native `isNaN` which will return `true` for\n     * `undefined` and other non-numeric values. See http://es5.github.io/#x15.1.2.4.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // `NaN` as a primitive is the only value that is not equal to itself\n      // (perform the [[Class]] check first to avoid errors with some host objects in IE)\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(undefined);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is a number.\n     *\n     * Note: `NaN` is considered a number. See http://es5.github.io/#x8.5.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(8.4 * 5);\n     * // => true\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        value && typeof value == 'object' && toString.call(value) == numberClass || false;\n    }\n\n    /**\n     * Checks if `value` is an object created by the `Object` constructor.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * _.isPlainObject(new Shape);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     */\n    var isPlainObject = !getPrototypeOf ? shimIsPlainObject : function(value) {\n      if (!(value && toString.call(value) == objectClass)) {\n        return false;\n      }\n      var valueOf = value.valueOf,\n          objProto = isNative(valueOf) && (objProto = getPrototypeOf(valueOf)) && getPrototypeOf(objProto);\n\n      return objProto\n        ? (value == objProto || getPrototypeOf(value) == objProto)\n        : shimIsPlainObject(value);\n    };\n\n    /**\n     * Checks if `value` is a regular expression.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a regular expression, else `false`.\n     * @example\n     *\n     * _.isRegExp(/fred/);\n     * // => true\n     */\n    function isRegExp(value) {\n      return value && typeof value == 'object' && toString.call(value) == regexpClass || false;\n    }\n\n    /**\n     * Checks if `value` is a string.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('fred');\n     * // => true\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        value && typeof value == 'object' && toString.call(value) == stringClass || false;\n    }\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     */\n    function isUndefined(value) {\n      return typeof value == 'undefined';\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated by\n     * running each own enumerable property of `object` through the callback.\n     * The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, key, object).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new object with values of the results of each `callback` execution.\n     * @example\n     *\n     * _.mapValues({ 'a': 1, 'b': 2, 'c': 3} , function(num) { return num * 3; });\n     * // => { 'a': 3, 'b': 6, 'c': 9 }\n     *\n     * var characters = {\n     *   'fred': { 'name': 'fred', 'age': 40 },\n     *   'pebbles': { 'name': 'pebbles', 'age': 1 }\n     * };\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.mapValues(characters, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 }\n     */\n    function mapValues(object, callback, thisArg) {\n      var result = {};\n      callback = lodash.createCallback(callback, thisArg, 3);\n\n      forOwn(object, function(value, key, object) {\n        result[key] = callback(value, key, object);\n      });\n      return result;\n    }\n\n    /**\n     * Recursively merges own enumerable properties of the source object(s), that\n     * don't resolve to `undefined` into the destination object. Subsequent sources\n     * will overwrite property assignments of previous sources. If a callback is\n     * provided it will be executed to produce the merged values of the destination\n     * and source properties. If the callback returns `undefined` merging will\n     * be handled by the method instead. The callback is bound to `thisArg` and\n     * invoked with two arguments; (objectValue, sourceValue).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The destination object.\n     * @param {...Object} [source] The source objects.\n     * @param {Function} [callback] The function to customize merging properties.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the destination object.\n     * @example\n     *\n     * var names = {\n     *   'characters': [\n     *     { 'name': 'barney' },\n     *     { 'name': 'fred' }\n     *   ]\n     * };\n     *\n     * var ages = {\n     *   'characters': [\n     *     { 'age': 36 },\n     *     { 'age': 40 }\n     *   ]\n     * };\n     *\n     * _.merge(names, ages);\n     * // => { 'characters': [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred', 'age': 40 }] }\n     *\n     * var food = {\n     *   'fruits': ['apple'],\n     *   'vegetables': ['beet']\n     * };\n     *\n     * var otherFood = {\n     *   'fruits': ['banana'],\n     *   'vegetables': ['carrot']\n     * };\n     *\n     * _.merge(food, otherFood, function(a, b) {\n     *   return _.isArray(a) ? a.concat(b) : undefined;\n     * });\n     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }\n     */\n    function merge(object) {\n      var args = arguments,\n          length = 2;\n\n      if (!isObject(object)) {\n        return object;\n      }\n      // allows working with `_.reduce` and `_.reduceRight` without using\n      // their `index` and `collection` arguments\n      if (typeof args[2] != 'number') {\n        length = args.length;\n      }\n      if (length > 3 && typeof args[length - 2] == 'function') {\n        var callback = baseCreateCallback(args[--length - 1], args[length--], 2);\n      } else if (length > 2 && typeof args[length - 1] == 'function') {\n        callback = args[--length];\n      }\n      var sources = slice(arguments, 1, length),\n          index = -1,\n          stackA = getArray(),\n          stackB = getArray();\n\n      while (++index < length) {\n        baseMerge(object, sources[index], callback, stackA, stackB);\n      }\n      releaseArray(stackA);\n      releaseArray(stackB);\n      return object;\n    }\n\n    /**\n     * Creates a shallow clone of `object` excluding the specified properties.\n     * Property names may be specified as individual arguments or as arrays of\n     * property names. If a callback is provided it will be executed for each\n     * property of `object` omitting the properties the callback returns truey\n     * for. The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The source object.\n     * @param {Function|...string|string[]} [callback] The properties to omit or the\n     *  function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns an object without the omitted properties.\n     * @example\n     *\n     * _.omit({ 'name': 'fred', 'age': 40 }, 'age');\n     * // => { 'name': 'fred' }\n     *\n     * _.omit({ 'name': 'fred', 'age': 40 }, function(value) {\n     *   return typeof value == 'number';\n     * });\n     * // => { 'name': 'fred' }\n     */\n    function omit(object, callback, thisArg) {\n      var result = {};\n      if (typeof callback != 'function') {\n        var props = [];\n        forIn(object, function(value, key) {\n          props.push(key);\n        });\n        props = baseDifference(props, baseFlatten(arguments, true, false, 1));\n\n        var index = -1,\n            length = props.length;\n\n        while (++index < length) {\n          var key = props[index];\n          result[key] = object[key];\n        }\n      } else {\n        callback = lodash.createCallback(callback, thisArg, 3);\n        forIn(object, function(value, key, object) {\n          if (!callback(value, key, object)) {\n            result[key] = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Creates a two dimensional array of an object's key-value pairs,\n     * i.e. `[[key1, value1], [key2, value2]]`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns new array of key-value pairs.\n     * @example\n     *\n     * _.pairs({ 'barney': 36, 'fred': 40 });\n     * // => [['barney', 36], ['fred', 40]] (property order is not guaranteed across environments)\n     */\n    function pairs(object) {\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = Array(length);\n\n      while (++index < length) {\n        var key = props[index];\n        result[index] = [key, object[key]];\n      }\n      return result;\n    }\n\n    /**\n     * Creates a shallow clone of `object` composed of the specified properties.\n     * Property names may be specified as individual arguments or as arrays of\n     * property names. If a callback is provided it will be executed for each\n     * property of `object` picking the properties the callback returns truey\n     * for. The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The source object.\n     * @param {Function|...string|string[]} [callback] The function called per\n     *  iteration or property names to pick, specified as individual property\n     *  names or arrays of property names.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns an object composed of the picked properties.\n     * @example\n     *\n     * _.pick({ 'name': 'fred', '_userid': 'fred1' }, 'name');\n     * // => { 'name': 'fred' }\n     *\n     * _.pick({ 'name': 'fred', '_userid': 'fred1' }, function(value, key) {\n     *   return key.charAt(0) != '_';\n     * });\n     * // => { 'name': 'fred' }\n     */\n    function pick(object, callback, thisArg) {\n      var result = {};\n      if (typeof callback != 'function') {\n        var index = -1,\n            props = baseFlatten(arguments, true, false, 1),\n            length = isObject(object) ? props.length : 0;\n\n        while (++index < length) {\n          var key = props[index];\n          if (key in object) {\n            result[key] = object[key];\n          }\n        }\n      } else {\n        callback = lodash.createCallback(callback, thisArg, 3);\n        forIn(object, function(value, key, object) {\n          if (callback(value, key, object)) {\n            result[key] = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * An alternative to `_.reduce` this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable properties through a callback, with each callback execution\n     * potentially mutating the `accumulator` object. The callback is bound to\n     * `thisArg` and invoked with four arguments; (accumulator, value, key, object).\n     * Callbacks may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Array|Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * var squares = _.transform([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], function(result, num) {\n     *   num *= num;\n     *   if (num % 2) {\n     *     return result.push(num) < 3;\n     *   }\n     * });\n     * // => [1, 9, 25]\n     *\n     * var mapped = _.transform({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {\n     *   result[key] = num * 3;\n     * });\n     * // => { 'a': 3, 'b': 6, 'c': 9 }\n     */\n    function transform(object, callback, accumulator, thisArg) {\n      var isArr = isArray(object);\n      if (accumulator == null) {\n        if (isArr) {\n          accumulator = [];\n        } else {\n          var ctor = object && object.constructor,\n              proto = ctor && ctor.prototype;\n\n          accumulator = baseCreate(proto);\n        }\n      }\n      if (callback) {\n        callback = lodash.createCallback(callback, thisArg, 4);\n        (isArr ? forEach : forOwn)(object, function(value, index, object) {\n          return callback(accumulator, value, index, object);\n        });\n      }\n      return accumulator;\n    }\n\n    /**\n     * Creates an array composed of the own enumerable property values of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns an array of property values.\n     * @example\n     *\n     * _.values({ 'one': 1, 'two': 2, 'three': 3 });\n     * // => [1, 2, 3] (property order is not guaranteed across environments)\n     */\n    function values(object) {\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = object[props[index]];\n      }\n      return result;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements from the specified indexes, or keys, of the\n     * `collection`. Indexes may be specified as individual arguments or as arrays\n     * of indexes.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {...(number|number[]|string|string[])} [index] The indexes of `collection`\n     *   to retrieve, specified as individual indexes or arrays of indexes.\n     * @returns {Array} Returns a new array of elements corresponding to the\n     *  provided indexes.\n     * @example\n     *\n     * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);\n     * // => ['a', 'c', 'e']\n     *\n     * _.at(['fred', 'barney', 'pebbles'], 0, 2);\n     * // => ['fred', 'pebbles']\n     */\n    function at(collection) {\n      var args = arguments,\n          index = -1,\n          props = baseFlatten(args, true, false, 1),\n          length = (args[2] && args[2][args[1]] === collection) ? 1 : props.length,\n          result = Array(length);\n\n      while(++index < length) {\n        result[index] = collection[props[index]];\n      }\n      return result;\n    }\n\n    /**\n     * Checks if a given value is present in a collection using strict equality\n     * for comparisons, i.e. `===`. If `fromIndex` is negative, it is used as the\n     * offset from the end of the collection.\n     *\n     * @static\n     * @memberOf _\n     * @alias include\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {*} target The value to check for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {boolean} Returns `true` if the `target` element is found, else `false`.\n     * @example\n     *\n     * _.contains([1, 2, 3], 1);\n     * // => true\n     *\n     * _.contains([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.contains({ 'name': 'fred', 'age': 40 }, 'fred');\n     * // => true\n     *\n     * _.contains('pebbles', 'eb');\n     * // => true\n     */\n    function contains(collection, target, fromIndex) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = collection ? collection.length : 0,\n          result = false;\n\n      fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex) || 0;\n      if (isArray(collection)) {\n        result = indexOf(collection, target, fromIndex) > -1;\n      } else if (typeof length == 'number') {\n        result = (isString(collection) ? collection.indexOf(target, fromIndex) : indexOf(collection, target, fromIndex)) > -1;\n      } else {\n        forOwn(collection, function(value) {\n          if (++index >= fromIndex) {\n            return !(result = value === target);\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` through the callback. The corresponding value\n     * of each key is the number of times the key was returned by the callback.\n     * The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([4.3, 6.1, 6.4], function(num) { return Math.floor(num); });\n     * // => { '4': 1, '6': 2 }\n     *\n     * _.countBy([4.3, 6.1, 6.4], function(num) { return this.floor(num); }, Math);\n     * // => { '4': 1, '6': 2 }\n     *\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      (hasOwnProperty.call(result, key) ? result[key]++ : result[key] = 1);\n    });\n\n    /**\n     * Checks if the given callback returns truey value for **all** elements of\n     * a collection. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias all\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {boolean} Returns `true` if all elements passed the callback check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes']);\n     * // => false\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.every(characters, 'age');\n     * // => true\n     *\n     * // using \"_.where\" callback shorthand\n     * _.every(characters, { 'age': 36 });\n     * // => false\n     */\n    function every(collection, callback, thisArg) {\n      var result = true;\n      callback = lodash.createCallback(callback, thisArg, 3);\n\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      if (typeof length == 'number') {\n        while (++index < length) {\n          if (!(result = !!callback(collection[index], index, collection))) {\n            break;\n          }\n        }\n      } else {\n        forOwn(collection, function(value, index, collection) {\n          return (result = !!callback(value, index, collection));\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Iterates over elements of a collection, returning an array of all elements\n     * the callback returns truey for. The callback is bound to `thisArg` and\n     * invoked with three arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias select\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of elements that passed the callback check.\n     * @example\n     *\n     * var evens = _.filter([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n     * // => [2, 4, 6]\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36, 'blocked': false },\n     *   { 'name': 'fred',   'age': 40, 'blocked': true }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.filter(characters, 'blocked');\n     * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]\n     *\n     * // using \"_.where\" callback shorthand\n     * _.filter(characters, { 'age': 36 });\n     * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]\n     */\n    function filter(collection, callback, thisArg) {\n      var result = [];\n      callback = lodash.createCallback(callback, thisArg, 3);\n\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      if (typeof length == 'number') {\n        while (++index < length) {\n          var value = collection[index];\n          if (callback(value, index, collection)) {\n            result.push(value);\n          }\n        }\n      } else {\n        forOwn(collection, function(value, index, collection) {\n          if (callback(value, index, collection)) {\n            result.push(value);\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Iterates over elements of a collection, returning the first element that\n     * the callback returns truey for. The callback is bound to `thisArg` and\n     * invoked with three arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias detect, findWhere\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the found element, else `undefined`.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'age': 36, 'blocked': false },\n     *   { 'name': 'fred',    'age': 40, 'blocked': true },\n     *   { 'name': 'pebbles', 'age': 1,  'blocked': false }\n     * ];\n     *\n     * _.find(characters, function(chr) {\n     *   return chr.age < 40;\n     * });\n     * // => { 'name': 'barney', 'age': 36, 'blocked': false }\n     *\n     * // using \"_.where\" callback shorthand\n     * _.find(characters, { 'age': 1 });\n     * // =>  { 'name': 'pebbles', 'age': 1, 'blocked': false }\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.find(characters, 'blocked');\n     * // => { 'name': 'fred', 'age': 40, 'blocked': true }\n     */\n    function find(collection, callback, thisArg) {\n      callback = lodash.createCallback(callback, thisArg, 3);\n\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      if (typeof length == 'number') {\n        while (++index < length) {\n          var value = collection[index];\n          if (callback(value, index, collection)) {\n            return value;\n          }\n        }\n      } else {\n        var result;\n        forOwn(collection, function(value, index, collection) {\n          if (callback(value, index, collection)) {\n            result = value;\n            return false;\n          }\n        });\n        return result;\n      }\n    }\n\n    /**\n     * This method is like `_.find` except that it iterates over elements\n     * of a `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the found element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(num) {\n     *   return num % 2 == 1;\n     * });\n     * // => 3\n     */\n    function findLast(collection, callback, thisArg) {\n      var result;\n      callback = lodash.createCallback(callback, thisArg, 3);\n      forEachRight(collection, function(value, index, collection) {\n        if (callback(value, index, collection)) {\n          result = value;\n          return false;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * Iterates over elements of a collection, executing the callback for each\n     * element. The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, index|key, collection). Callbacks may exit iteration early by\n     * explicitly returning `false`.\n     *\n     * Note: As with other \"Collections\" methods, objects with a `length` property\n     * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`\n     * may be used for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @alias each\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array|Object|string} Returns `collection`.\n     * @example\n     *\n     * _([1, 2, 3]).forEach(function(num) { console.log(num); }).join(',');\n     * // => logs each number and returns '1,2,3'\n     *\n     * _.forEach({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { console.log(num); });\n     * // => logs each number and returns the object (property order is not guaranteed across environments)\n     */\n    function forEach(collection, callback, thisArg) {\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n      if (typeof length == 'number') {\n        while (++index < length) {\n          if (callback(collection[index], index, collection) === false) {\n            break;\n          }\n        }\n      } else {\n        forOwn(collection, callback);\n      }\n      return collection;\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements\n     * of a `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias eachRight\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array|Object|string} Returns `collection`.\n     * @example\n     *\n     * _([1, 2, 3]).forEachRight(function(num) { console.log(num); }).join(',');\n     * // => logs each number from right to left and returns '3,2,1'\n     */\n    function forEachRight(collection, callback, thisArg) {\n      var length = collection ? collection.length : 0;\n      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n      if (typeof length == 'number') {\n        while (length--) {\n          if (callback(collection[length], length, collection) === false) {\n            break;\n          }\n        }\n      } else {\n        var props = keys(collection);\n        length = props.length;\n        forOwn(collection, function(value, key, collection) {\n          key = props ? props[--length] : --length;\n          return callback(collection[key], key, collection);\n        });\n      }\n      return collection;\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of a collection through the callback. The corresponding value\n     * of each key is an array of the elements responsible for generating the key.\n     * The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([4.2, 6.1, 6.4], function(num) { return Math.floor(num); });\n     * // => { '4': [4.2], '6': [6.1, 6.4] }\n     *\n     * _.groupBy([4.2, 6.1, 6.4], function(num) { return this.floor(num); }, Math);\n     * // => { '4': [4.2], '6': [6.1, 6.4] }\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      (hasOwnProperty.call(result, key) ? result[key] : result[key] = []).push(value);\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of the collection through the given callback. The corresponding\n     * value of each key is the last element responsible for generating the key.\n     * The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var keys = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.indexBy(keys, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.indexBy(keys, function(key) { return String.fromCharCode(key.code); });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.indexBy(characters, function(key) { this.fromCharCode(key.code); }, String);\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     */\n    var indexBy = createAggregator(function(result, value, key) {\n      result[key] = value;\n    });\n\n    /**\n     * Invokes the method named by `methodName` on each element in the `collection`\n     * returning an array of the results of each invoked method. Additional arguments\n     * will be provided to each invoked method. If `methodName` is a function it\n     * will be invoked for, and `this` bound to, each element in the `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|string} methodName The name of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [arg] Arguments to invoke the method with.\n     * @returns {Array} Returns a new array of the results of each invoked method.\n     * @example\n     *\n     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invoke([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    function invoke(collection, methodName) {\n      var args = slice(arguments, 2),\n          index = -1,\n          isFunc = typeof methodName == 'function',\n          length = collection ? collection.length : 0,\n          result = Array(typeof length == 'number' ? length : 0);\n\n      forEach(collection, function(value) {\n        result[++index] = (isFunc ? methodName : value[methodName]).apply(value, args);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an array of values by running each element in the collection\n     * through the callback. The callback is bound to `thisArg` and invoked with\n     * three arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias collect\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of the results of each `callback` execution.\n     * @example\n     *\n     * _.map([1, 2, 3], function(num) { return num * 3; });\n     * // => [3, 6, 9]\n     *\n     * _.map({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { return num * 3; });\n     * // => [3, 6, 9] (property order is not guaranteed across environments)\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.map(characters, 'name');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, callback, thisArg) {\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      callback = lodash.createCallback(callback, thisArg, 3);\n      if (typeof length == 'number') {\n        var result = Array(length);\n        while (++index < length) {\n          result[index] = callback(collection[index], index, collection);\n        }\n      } else {\n        result = [];\n        forOwn(collection, function(value, key, collection) {\n          result[++index] = callback(value, key, collection);\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Retrieves the maximum value of a collection. If the collection is empty or\n     * falsey `-Infinity` is returned. If a callback is provided it will be executed\n     * for each value in the collection to generate the criterion by which the value\n     * is ranked. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, index, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.max(characters, function(chr) { return chr.age; });\n     * // => { 'name': 'fred', 'age': 40 };\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.max(characters, 'age');\n     * // => { 'name': 'fred', 'age': 40 };\n     */\n    function max(collection, callback, thisArg) {\n      var computed = -Infinity,\n          result = computed;\n\n      // allows working with functions like `_.map` without using\n      // their `index` argument as a callback\n      if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {\n        callback = null;\n      }\n      if (callback == null && isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          var value = collection[index];\n          if (value > result) {\n            result = value;\n          }\n        }\n      } else {\n        callback = (callback == null && isString(collection))\n          ? charAtCallback\n          : lodash.createCallback(callback, thisArg, 3);\n\n        forEach(collection, function(value, index, collection) {\n          var current = callback(value, index, collection);\n          if (current > computed) {\n            computed = current;\n            result = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Retrieves the minimum value of a collection. If the collection is empty or\n     * falsey `Infinity` is returned. If a callback is provided it will be executed\n     * for each value in the collection to generate the criterion by which the value\n     * is ranked. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, index, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.min(characters, function(chr) { return chr.age; });\n     * // => { 'name': 'barney', 'age': 36 };\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.min(characters, 'age');\n     * // => { 'name': 'barney', 'age': 36 };\n     */\n    function min(collection, callback, thisArg) {\n      var computed = Infinity,\n          result = computed;\n\n      // allows working with functions like `_.map` without using\n      // their `index` argument as a callback\n      if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {\n        callback = null;\n      }\n      if (callback == null && isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          var value = collection[index];\n          if (value < result) {\n            result = value;\n          }\n        }\n      } else {\n        callback = (callback == null && isString(collection))\n          ? charAtCallback\n          : lodash.createCallback(callback, thisArg, 3);\n\n        forEach(collection, function(value, index, collection) {\n          var current = callback(value, index, collection);\n          if (current < computed) {\n            computed = current;\n            result = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Retrieves the value of a specified property from all elements in the collection.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {string} property The name of the property to pluck.\n     * @returns {Array} Returns a new array of property values.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.pluck(characters, 'name');\n     * // => ['barney', 'fred']\n     */\n    var pluck = map;\n\n    /**\n     * Reduces a collection to a value which is the accumulated result of running\n     * each element in the collection through the callback, where each successive\n     * callback execution consumes the return value of the previous execution. If\n     * `accumulator` is not provided the first element of the collection will be\n     * used as the initial `accumulator` value. The callback is bound to `thisArg`\n     * and invoked with four arguments; (accumulator, value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @alias foldl, inject\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [accumulator] Initial value of the accumulator.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * var sum = _.reduce([1, 2, 3], function(sum, num) {\n     *   return sum + num;\n     * });\n     * // => 6\n     *\n     * var mapped = _.reduce({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {\n     *   result[key] = num * 3;\n     *   return result;\n     * }, {});\n     * // => { 'a': 3, 'b': 6, 'c': 9 }\n     */\n    function reduce(collection, callback, accumulator, thisArg) {\n      if (!collection) return accumulator;\n      var noaccum = arguments.length < 3;\n      callback = lodash.createCallback(callback, thisArg, 4);\n\n      var index = -1,\n          length = collection.length;\n\n      if (typeof length == 'number') {\n        if (noaccum) {\n          accumulator = collection[++index];\n        }\n        while (++index < length) {\n          accumulator = callback(accumulator, collection[index], index, collection);\n        }\n      } else {\n        forOwn(collection, function(value, index, collection) {\n          accumulator = noaccum\n            ? (noaccum = false, value)\n            : callback(accumulator, value, index, collection)\n        });\n      }\n      return accumulator;\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements\n     * of a `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias foldr\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [accumulator] Initial value of the accumulator.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * var list = [[0, 1], [2, 3], [4, 5]];\n     * var flat = _.reduceRight(list, function(a, b) { return a.concat(b); }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, callback, accumulator, thisArg) {\n      var noaccum = arguments.length < 3;\n      callback = lodash.createCallback(callback, thisArg, 4);\n      forEachRight(collection, function(value, index, collection) {\n        accumulator = noaccum\n          ? (noaccum = false, value)\n          : callback(accumulator, value, index, collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The opposite of `_.filter` this method returns the elements of a\n     * collection that the callback does **not** return truey for.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of elements that failed the callback check.\n     * @example\n     *\n     * var odds = _.reject([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n     * // => [1, 3, 5]\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36, 'blocked': false },\n     *   { 'name': 'fred',   'age': 40, 'blocked': true }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.reject(characters, 'blocked');\n     * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]\n     *\n     * // using \"_.where\" callback shorthand\n     * _.reject(characters, { 'age': 36 });\n     * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]\n     */\n    function reject(collection, callback, thisArg) {\n      callback = lodash.createCallback(callback, thisArg, 3);\n      return filter(collection, function(value, index, collection) {\n        return !callback(value, index, collection);\n      });\n    }\n\n    /**\n     * Retrieves a random element or `n` random elements from a collection.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to sample.\n     * @param {number} [n] The number of elements to sample.\n     * @param- {Object} [guard] Allows working with functions like `_.map`\n     *  without using their `index` arguments as `n`.\n     * @returns {Array} Returns the random sample(s) of `collection`.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     *\n     * _.sample([1, 2, 3, 4], 2);\n     * // => [3, 1]\n     */\n    function sample(collection, n, guard) {\n      if (collection && typeof collection.length != 'number') {\n        collection = values(collection);\n      }\n      if (n == null || guard) {\n        return collection ? collection[baseRandom(0, collection.length - 1)] : undefined;\n      }\n      var result = shuffle(collection);\n      result.length = nativeMin(nativeMax(0, n), result.length);\n      return result;\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the Fisher-Yates\n     * shuffle. See http://en.wikipedia.org/wiki/Fisher-Yates_shuffle.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to shuffle.\n     * @returns {Array} Returns a new shuffled collection.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4, 5, 6]);\n     * // => [4, 1, 6, 3, 5, 2]\n     */\n    function shuffle(collection) {\n      var index = -1,\n          length = collection ? collection.length : 0,\n          result = Array(typeof length == 'number' ? length : 0);\n\n      forEach(collection, function(value) {\n        var rand = baseRandom(0, ++index);\n        result[index] = result[rand];\n        result[rand] = value;\n      });\n      return result;\n    }\n\n    /**\n     * Gets the size of the `collection` by returning `collection.length` for arrays\n     * and array-like objects or the number of own enumerable properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns `collection.length` or number of own enumerable properties.\n     * @example\n     *\n     * _.size([1, 2]);\n     * // => 2\n     *\n     * _.size({ 'one': 1, 'two': 2, 'three': 3 });\n     * // => 3\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      var length = collection ? collection.length : 0;\n      return typeof length == 'number' ? length : keys(collection).length;\n    }\n\n    /**\n     * Checks if the callback returns a truey value for **any** element of a\n     * collection. The function returns as soon as it finds a passing value and\n     * does not iterate over the entire collection. The callback is bound to\n     * `thisArg` and invoked with three arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias any\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {boolean} Returns `true` if any element passed the callback check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36, 'blocked': false },\n     *   { 'name': 'fred',   'age': 40, 'blocked': true }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.some(characters, 'blocked');\n     * // => true\n     *\n     * // using \"_.where\" callback shorthand\n     * _.some(characters, { 'age': 1 });\n     * // => false\n     */\n    function some(collection, callback, thisArg) {\n      var result;\n      callback = lodash.createCallback(callback, thisArg, 3);\n\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      if (typeof length == 'number') {\n        while (++index < length) {\n          if ((result = callback(collection[index], index, collection))) {\n            break;\n          }\n        }\n      } else {\n        forOwn(collection, function(value, index, collection) {\n          return !(result = callback(value, index, collection));\n        });\n      }\n      return !!result;\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection through the callback. This method\n     * performs a stable sort, that is, it will preserve the original sort order\n     * of equal elements. The callback is bound to `thisArg` and invoked with\n     * three arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an array of property names is provided for `callback` the collection\n     * will be sorted by each property value.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Array|Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of sorted elements.\n     * @example\n     *\n     * _.sortBy([1, 2, 3], function(num) { return Math.sin(num); });\n     * // => [3, 1, 2]\n     *\n     * _.sortBy([1, 2, 3], function(num) { return this.sin(num); }, Math);\n     * // => [3, 1, 2]\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'age': 36 },\n     *   { 'name': 'fred',    'age': 40 },\n     *   { 'name': 'barney',  'age': 26 },\n     *   { 'name': 'fred',    'age': 30 }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.map(_.sortBy(characters, 'age'), _.values);\n     * // => [['barney', 26], ['fred', 30], ['barney', 36], ['fred', 40]]\n     *\n     * // sorting by multiple properties\n     * _.map(_.sortBy(characters, ['name', 'age']), _.values);\n     * // = > [['barney', 26], ['barney', 36], ['fred', 30], ['fred', 40]]\n     */\n    function sortBy(collection, callback, thisArg) {\n      var index = -1,\n          isArr = isArray(callback),\n          length = collection ? collection.length : 0,\n          result = Array(typeof length == 'number' ? length : 0);\n\n      if (!isArr) {\n        callback = lodash.createCallback(callback, thisArg, 3);\n      }\n      forEach(collection, function(value, key, collection) {\n        var object = result[++index] = getObject();\n        if (isArr) {\n          object.criteria = map(callback, function(key) { return value[key]; });\n        } else {\n          (object.criteria = getArray())[0] = callback(value, key, collection);\n        }\n        object.index = index;\n        object.value = value;\n      });\n\n      length = result.length;\n      result.sort(compareAscending);\n      while (length--) {\n        var object = result[length];\n        result[length] = object.value;\n        if (!isArr) {\n          releaseArray(object.criteria);\n        }\n        releaseObject(object);\n      }\n      return result;\n    }\n\n    /**\n     * Converts the `collection` to an array.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to convert.\n     * @returns {Array} Returns the new converted array.\n     * @example\n     *\n     * (function() { return _.toArray(arguments).slice(1); })(1, 2, 3, 4);\n     * // => [2, 3, 4]\n     */\n    function toArray(collection) {\n      if (collection && typeof collection.length == 'number') {\n        return slice(collection);\n      }\n      return values(collection);\n    }\n\n    /**\n     * Performs a deep comparison of each element in a `collection` to the given\n     * `properties` object, returning an array of all elements that have equivalent\n     * property values.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Object} props The object of property values to filter by.\n     * @returns {Array} Returns a new array of elements that have the given properties.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36, 'pets': ['hoppy'] },\n     *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }\n     * ];\n     *\n     * _.where(characters, { 'age': 36 });\n     * // => [{ 'name': 'barney', 'age': 36, 'pets': ['hoppy'] }]\n     *\n     * _.where(characters, { 'pets': ['dino'] });\n     * // => [{ 'name': 'fred', 'age': 40, 'pets': ['baby puss', 'dino'] }]\n     */\n    var where = filter;\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are all falsey.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns a new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array ? array.length : 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array excluding all values of the provided arrays using strict\n     * equality for comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to process.\n     * @param {...Array} [values] The arrays of values to exclude.\n     * @returns {Array} Returns a new array of filtered values.\n     * @example\n     *\n     * _.difference([1, 2, 3, 4, 5], [5, 2, 10]);\n     * // => [1, 3, 4]\n     */\n    function difference(array) {\n      return baseDifference(array, baseFlatten(arguments, true, true, 1));\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element that passes the callback check, instead of the element itself.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'age': 36, 'blocked': false },\n     *   { 'name': 'fred',    'age': 40, 'blocked': true },\n     *   { 'name': 'pebbles', 'age': 1,  'blocked': false }\n     * ];\n     *\n     * _.findIndex(characters, function(chr) {\n     *   return chr.age < 20;\n     * });\n     * // => 2\n     *\n     * // using \"_.where\" callback shorthand\n     * _.findIndex(characters, { 'age': 36 });\n     * // => 0\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.findIndex(characters, 'blocked');\n     * // => 1\n     */\n    function findIndex(array, callback, thisArg) {\n      var index = -1,\n          length = array ? array.length : 0;\n\n      callback = lodash.createCallback(callback, thisArg, 3);\n      while (++index < length) {\n        if (callback(array[index], index, array)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of a `collection` from right to left.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'age': 36, 'blocked': true },\n     *   { 'name': 'fred',    'age': 40, 'blocked': false },\n     *   { 'name': 'pebbles', 'age': 1,  'blocked': true }\n     * ];\n     *\n     * _.findLastIndex(characters, function(chr) {\n     *   return chr.age > 30;\n     * });\n     * // => 1\n     *\n     * // using \"_.where\" callback shorthand\n     * _.findLastIndex(characters, { 'age': 36 });\n     * // => 0\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.findLastIndex(characters, 'blocked');\n     * // => 2\n     */\n    function findLastIndex(array, callback, thisArg) {\n      var length = array ? array.length : 0;\n      callback = lodash.createCallback(callback, thisArg, 3);\n      while (length--) {\n        if (callback(array[length], length, array)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Gets the first element or first `n` elements of an array. If a callback\n     * is provided elements at the beginning of the array are returned as long\n     * as the callback returns truey. The callback is bound to `thisArg` and\n     * invoked with three arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias head, take\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|number|string} [callback] The function called\n     *  per element or the number of elements to return. If a property name or\n     *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the first element(s) of `array`.\n     * @example\n     *\n     * _.first([1, 2, 3]);\n     * // => 1\n     *\n     * _.first([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.first([1, 2, 3], function(num) {\n     *   return num < 3;\n     * });\n     * // => [1, 2]\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },\n     *   { 'name': 'fred',    'blocked': false, 'employer': 'slate' },\n     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.first(characters, 'blocked');\n     * // => [{ 'name': 'barney', 'blocked': true, 'employer': 'slate' }]\n     *\n     * // using \"_.where\" callback shorthand\n     * _.pluck(_.first(characters, { 'employer': 'slate' }), 'name');\n     * // => ['barney', 'fred']\n     */\n    function first(array, callback, thisArg) {\n      var n = 0,\n          length = array ? array.length : 0;\n\n      if (typeof callback != 'number' && callback != null) {\n        var index = -1;\n        callback = lodash.createCallback(callback, thisArg, 3);\n        while (++index < length && callback(array[index], index, array)) {\n          n++;\n        }\n      } else {\n        n = callback;\n        if (n == null || thisArg) {\n          return array ? array[0] : undefined;\n        }\n      }\n      return slice(array, 0, nativeMin(nativeMax(0, n), length));\n    }\n\n    /**\n     * Flattens a nested array (the nesting can be to any depth). If `isShallow`\n     * is truey, the array will only be flattened a single level. If a callback\n     * is provided each element of the array is passed through the callback before\n     * flattening. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to flatten.\n     * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2], [3, [[4]]]]);\n     * // => [1, 2, 3, 4];\n     *\n     * _.flatten([1, [2], [3, [[4]]]], true);\n     * // => [1, 2, 3, [[4]]];\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 30, 'pets': ['hoppy'] },\n     *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.flatten(characters, 'pets');\n     * // => ['hoppy', 'baby puss', 'dino']\n     */\n    function flatten(array, isShallow, callback, thisArg) {\n      // juggle arguments\n      if (typeof isShallow != 'boolean' && isShallow != null) {\n        thisArg = callback;\n        callback = (typeof isShallow != 'function' && thisArg && thisArg[isShallow] === array) ? null : isShallow;\n        isShallow = false;\n      }\n      if (callback != null) {\n        array = map(array, callback, thisArg);\n      }\n      return baseFlatten(array, isShallow);\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found using\n     * strict equality for comparisons, i.e. `===`. If the array is already sorted\n     * providing `true` for `fromIndex` will run a faster binary search.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {*} value The value to search for.\n     * @param {boolean|number} [fromIndex=0] The index to search from or `true`\n     *  to perform a binary search on a sorted array.\n     * @returns {number} Returns the index of the matched value or `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 3, 1, 2, 3], 2);\n     * // => 1\n     *\n     * _.indexOf([1, 2, 3, 1, 2, 3], 2, 3);\n     * // => 4\n     *\n     * _.indexOf([1, 1, 2, 2, 3, 3], 2, true);\n     * // => 2\n     */\n    function indexOf(array, value, fromIndex) {\n      if (typeof fromIndex == 'number') {\n        var length = array ? array.length : 0;\n        fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex || 0);\n      } else if (fromIndex) {\n        var index = sortedIndex(array, value);\n        return array[index] === value ? index : -1;\n      }\n      return baseIndexOf(array, value, fromIndex);\n    }\n\n    /**\n     * Gets all but the last element or last `n` elements of an array. If a\n     * callback is provided elements at the end of the array are excluded from\n     * the result as long as the callback returns truey. The callback is bound\n     * to `thisArg` and invoked with three arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|number|string} [callback=1] The function called\n     *  per element or the number of elements to exclude. If a property name or\n     *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.initial([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.initial([1, 2, 3], function(num) {\n     *   return num > 1;\n     * });\n     * // => [1]\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },\n     *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },\n     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.initial(characters, 'blocked');\n     * // => [{ 'name': 'barney',  'blocked': false, 'employer': 'slate' }]\n     *\n     * // using \"_.where\" callback shorthand\n     * _.pluck(_.initial(characters, { 'employer': 'na' }), 'name');\n     * // => ['barney', 'fred']\n     */\n    function initial(array, callback, thisArg) {\n      var n = 0,\n          length = array ? array.length : 0;\n\n      if (typeof callback != 'number' && callback != null) {\n        var index = length;\n        callback = lodash.createCallback(callback, thisArg, 3);\n        while (index-- && callback(array[index], index, array)) {\n          n++;\n        }\n      } else {\n        n = (callback == null || thisArg) ? 1 : callback || n;\n      }\n      return slice(array, 0, nativeMin(nativeMax(0, length - n), length));\n    }\n\n    /**\n     * Creates an array of unique values present in all provided arrays using\n     * strict equality for comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {...Array} [array] The arrays to inspect.\n     * @returns {Array} Returns an array of shared values.\n     * @example\n     *\n     * _.intersection([1, 2, 3], [5, 2, 1, 4], [2, 1]);\n     * // => [1, 2]\n     */\n    function intersection() {\n      var args = [],\n          argsIndex = -1,\n          argsLength = arguments.length,\n          caches = getArray(),\n          indexOf = getIndexOf(),\n          trustIndexOf = indexOf === baseIndexOf,\n          seen = getArray();\n\n      while (++argsIndex < argsLength) {\n        var value = arguments[argsIndex];\n        if (isArray(value) || isArguments(value)) {\n          args.push(value);\n          caches.push(trustIndexOf && value.length >= largeArraySize &&\n            createCache(argsIndex ? args[argsIndex] : seen));\n        }\n      }\n      var array = args[0],\n          index = -1,\n          length = array ? array.length : 0,\n          result = [];\n\n      outer:\n      while (++index < length) {\n        var cache = caches[0];\n        value = array[index];\n\n        if ((cache ? cacheIndexOf(cache, value) : indexOf(seen, value)) < 0) {\n          argsIndex = argsLength;\n          (cache || seen).push(value);\n          while (--argsIndex) {\n            cache = caches[argsIndex];\n            if ((cache ? cacheIndexOf(cache, value) : indexOf(args[argsIndex], value)) < 0) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n      }\n      while (argsLength--) {\n        cache = caches[argsLength];\n        if (cache) {\n          releaseObject(cache);\n        }\n      }\n      releaseArray(caches);\n      releaseArray(seen);\n      return result;\n    }\n\n    /**\n     * Gets the last element or last `n` elements of an array. If a callback is\n     * provided elements at the end of the array are returned as long as the\n     * callback returns truey. The callback is bound to `thisArg` and invoked\n     * with three arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|number|string} [callback] The function called\n     *  per element or the number of elements to return. If a property name or\n     *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the last element(s) of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     *\n     * _.last([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.last([1, 2, 3], function(num) {\n     *   return num > 1;\n     * });\n     * // => [2, 3]\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },\n     *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },\n     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.pluck(_.last(characters, 'blocked'), 'name');\n     * // => ['fred', 'pebbles']\n     *\n     * // using \"_.where\" callback shorthand\n     * _.last(characters, { 'employer': 'na' });\n     * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]\n     */\n    function last(array, callback, thisArg) {\n      var n = 0,\n          length = array ? array.length : 0;\n\n      if (typeof callback != 'number' && callback != null) {\n        var index = length;\n        callback = lodash.createCallback(callback, thisArg, 3);\n        while (index-- && callback(array[index], index, array)) {\n          n++;\n        }\n      } else {\n        n = callback;\n        if (n == null || thisArg) {\n          return array ? array[length - 1] : undefined;\n        }\n      }\n      return slice(array, nativeMax(0, length - n));\n    }\n\n    /**\n     * Gets the index at which the last occurrence of `value` is found using strict\n     * equality for comparisons, i.e. `===`. If `fromIndex` is negative, it is used\n     * as the offset from the end of the collection.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value or `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2);\n     * // => 4\n     *\n     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2, 3);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var index = array ? array.length : 0;\n      if (typeof fromIndex == 'number') {\n        index = (fromIndex < 0 ? nativeMax(0, index + fromIndex) : nativeMin(fromIndex, index - 1)) + 1;\n      }\n      while (index--) {\n        if (array[index] === value) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Removes all provided values from the given array using strict equality for\n     * comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to modify.\n     * @param {...*} [value] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3, 1, 2, 3];\n     * _.pull(array, 2, 3);\n     * console.log(array);\n     * // => [1, 1]\n     */\n    function pull(array) {\n      var args = arguments,\n          argsIndex = 0,\n          argsLength = args.length,\n          length = array ? array.length : 0;\n\n      while (++argsIndex < argsLength) {\n        var index = -1,\n            value = args[argsIndex];\n        while (++index < length) {\n          if (array[index] === value) {\n            splice.call(array, index--, 1);\n            length--;\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to but not including `end`. If `start` is less than `stop` a\n     * zero-length range is created unless a negative `step` is specified.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns a new range array.\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    function range(start, end, step) {\n      start = +start || 0;\n      step = typeof step == 'number' ? step : (+step || 1);\n\n      if (end == null) {\n        end = start;\n        start = 0;\n      }\n      // use `Array(length)` so engines like Chakra and V8 avoid slower modes\n      // http://youtu.be/XAqIpGU8ZZk#t=17m25s\n      var index = -1,\n          length = nativeMax(0, ceil((end - start) / (step || 1))),\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * Removes all elements from an array that the callback returns truey for\n     * and returns an array of removed elements. The callback is bound to `thisArg`\n     * and invoked with three arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to modify.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4, 5, 6];\n     * var evens = _.remove(array, function(num) { return num % 2 == 0; });\n     *\n     * console.log(array);\n     * // => [1, 3, 5]\n     *\n     * console.log(evens);\n     * // => [2, 4, 6]\n     */\n    function remove(array, callback, thisArg) {\n      var index = -1,\n          length = array ? array.length : 0,\n          result = [];\n\n      callback = lodash.createCallback(callback, thisArg, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (callback(value, index, array)) {\n          result.push(value);\n          splice.call(array, index--, 1);\n          length--;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The opposite of `_.initial` this method gets all but the first element or\n     * first `n` elements of an array. If a callback function is provided elements\n     * at the beginning of the array are excluded from the result as long as the\n     * callback returns truey. The callback is bound to `thisArg` and invoked\n     * with three arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias drop, tail\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|number|string} [callback=1] The function called\n     *  per element or the number of elements to exclude. If a property name or\n     *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a slice of `array`.\n     * @example\n     *\n     * _.rest([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.rest([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.rest([1, 2, 3], function(num) {\n     *   return num < 3;\n     * });\n     * // => [3]\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },\n     *   { 'name': 'fred',    'blocked': false,  'employer': 'slate' },\n     *   { 'name': 'pebbles', 'blocked': true, 'employer': 'na' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.pluck(_.rest(characters, 'blocked'), 'name');\n     * // => ['fred', 'pebbles']\n     *\n     * // using \"_.where\" callback shorthand\n     * _.rest(characters, { 'employer': 'slate' });\n     * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]\n     */\n    function rest(array, callback, thisArg) {\n      if (typeof callback != 'number' && callback != null) {\n        var n = 0,\n            index = -1,\n            length = array ? array.length : 0;\n\n        callback = lodash.createCallback(callback, thisArg, 3);\n        while (++index < length && callback(array[index], index, array)) {\n          n++;\n        }\n      } else {\n        n = (callback == null || thisArg) ? 1 : nativeMax(0, callback);\n      }\n      return slice(array, n);\n    }\n\n    /**\n     * Uses a binary search to determine the smallest index at which a value\n     * should be inserted into a given sorted array in order to maintain the sort\n     * order of the array. If a callback is provided it will be executed for\n     * `value` and each element of `array` to compute their sort ranking. The\n     * callback is bound to `thisArg` and invoked with one argument; (value).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([20, 30, 50], 40);\n     * // => 2\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.sortedIndex([{ 'x': 20 }, { 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');\n     * // => 2\n     *\n     * var dict = {\n     *   'wordToNumber': { 'twenty': 20, 'thirty': 30, 'fourty': 40, 'fifty': 50 }\n     * };\n     *\n     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {\n     *   return dict.wordToNumber[word];\n     * });\n     * // => 2\n     *\n     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {\n     *   return this.wordToNumber[word];\n     * }, dict);\n     * // => 2\n     */\n    function sortedIndex(array, value, callback, thisArg) {\n      var low = 0,\n          high = array ? array.length : low;\n\n      // explicitly reference `identity` for better inlining in Firefox\n      callback = callback ? lodash.createCallback(callback, thisArg, 1) : identity;\n      value = callback(value);\n\n      while (low < high) {\n        var mid = (low + high) >>> 1;\n        (callback(array[mid]) < value)\n          ? low = mid + 1\n          : high = mid;\n      }\n      return low;\n    }\n\n    /**\n     * Creates an array of unique values, in order, of the provided arrays using\n     * strict equality for comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {...Array} [array] The arrays to inspect.\n     * @returns {Array} Returns an array of combined values.\n     * @example\n     *\n     * _.union([1, 2, 3], [5, 2, 1, 4], [2, 1]);\n     * // => [1, 2, 3, 5, 4]\n     */\n    function union() {\n      return baseUniq(baseFlatten(arguments, true, true));\n    }\n\n    /**\n     * Creates a duplicate-value-free version of an array using strict equality\n     * for comparisons, i.e. `===`. If the array is sorted, providing\n     * `true` for `isSorted` will use a faster algorithm. If a callback is provided\n     * each element of `array` is passed through the callback before uniqueness\n     * is computed. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias unique\n     * @category Arrays\n     * @param {Array} array The array to process.\n     * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a duplicate-value-free array.\n     * @example\n     *\n     * _.uniq([1, 2, 1, 3, 1]);\n     * // => [1, 2, 3]\n     *\n     * _.uniq([1, 1, 2, 2, 3], true);\n     * // => [1, 2, 3]\n     *\n     * _.uniq(['A', 'b', 'C', 'a', 'B', 'c'], function(letter) { return letter.toLowerCase(); });\n     * // => ['A', 'b', 'C']\n     *\n     * _.uniq([1, 2.5, 3, 1.5, 2, 3.5], function(num) { return this.floor(num); }, Math);\n     * // => [1, 2.5, 3]\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniq(array, isSorted, callback, thisArg) {\n      // juggle arguments\n      if (typeof isSorted != 'boolean' && isSorted != null) {\n        thisArg = callback;\n        callback = (typeof isSorted != 'function' && thisArg && thisArg[isSorted] === array) ? null : isSorted;\n        isSorted = false;\n      }\n      if (callback != null) {\n        callback = lodash.createCallback(callback, thisArg, 3);\n      }\n      return baseUniq(array, isSorted, callback);\n    }\n\n    /**\n     * Creates an array excluding all provided values using strict equality for\n     * comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to filter.\n     * @param {...*} [value] The values to exclude.\n     * @returns {Array} Returns a new array of filtered values.\n     * @example\n     *\n     * _.without([1, 2, 1, 0, 3, 1, 4], 0, 1);\n     * // => [2, 3, 4]\n     */\n    function without(array) {\n      return baseDifference(array, slice(arguments, 1));\n    }\n\n    /**\n     * Creates an array that is the symmetric difference of the provided arrays.\n     * See http://en.wikipedia.org/wiki/Symmetric_difference.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {...Array} [array] The arrays to inspect.\n     * @returns {Array} Returns an array of values.\n     * @example\n     *\n     * _.xor([1, 2, 3], [5, 2, 1, 4]);\n     * // => [3, 5, 4]\n     *\n     * _.xor([1, 2, 5], [2, 3, 5], [3, 4, 5]);\n     * // => [1, 4, 5]\n     */\n    function xor() {\n      var index = -1,\n          length = arguments.length;\n\n      while (++index < length) {\n        var array = arguments[index];\n        if (isArray(array) || isArguments(array)) {\n          var result = result\n            ? baseUniq(baseDifference(result, array).concat(baseDifference(array, result)))\n            : array;\n        }\n      }\n      return result || [];\n    }\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the first\n     * elements of the given arrays, the second of which contains the second\n     * elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @alias unzip\n     * @category Arrays\n     * @param {...Array} [array] Arrays to process.\n     * @returns {Array} Returns a new array of grouped elements.\n     * @example\n     *\n     * _.zip(['fred', 'barney'], [30, 40], [true, false]);\n     * // => [['fred', 30, true], ['barney', 40, false]]\n     */\n    function zip() {\n      var array = arguments.length > 1 ? arguments : arguments[0],\n          index = -1,\n          length = array ? max(pluck(array, 'length')) : 0,\n          result = Array(length < 0 ? 0 : length);\n\n      while (++index < length) {\n        result[index] = pluck(array, index);\n      }\n      return result;\n    }\n\n    /**\n     * Creates an object composed from arrays of `keys` and `values`. Provide\n     * either a single two dimensional array, i.e. `[[key1, value1], [key2, value2]]`\n     * or two arrays, one of `keys` and one of corresponding `values`.\n     *\n     * @static\n     * @memberOf _\n     * @alias object\n     * @category Arrays\n     * @param {Array} keys The array of keys.\n     * @param {Array} [values=[]] The array of values.\n     * @returns {Object} Returns an object composed of the given keys and\n     *  corresponding values.\n     * @example\n     *\n     * _.zipObject(['fred', 'barney'], [30, 40]);\n     * // => { 'fred': 30, 'barney': 40 }\n     */\n    function zipObject(keys, values) {\n      var index = -1,\n          length = keys ? keys.length : 0,\n          result = {};\n\n      if (!values && length && !isArray(keys[0])) {\n        values = [];\n      }\n      while (++index < length) {\n        var key = keys[index];\n        if (values) {\n          result[key] = values[index];\n        } else if (key) {\n          result[key[0]] = key[1];\n        }\n      }\n      return result;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates a function that executes `func`, with  the `this` binding and\n     * arguments of the created function, only after being called `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {number} n The number of times the function must be called before\n     *  `func` is executed.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('Done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => logs 'Done saving!', after all saves have completed\n     */\n    function after(n, func) {\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that, when called, invokes `func` with the `this`\n     * binding of `thisArg` and prepends any additional `bind` arguments to those\n     * provided to the bound function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to bind.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {...*} [arg] Arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var func = function(greeting) {\n     *   return greeting + ' ' + this.name;\n     * };\n     *\n     * func = _.bind(func, { 'name': 'fred' }, 'hi');\n     * func();\n     * // => 'hi fred'\n     */\n    function bind(func, thisArg) {\n      return arguments.length > 2\n        ? createWrapper(func, 17, slice(arguments, 2), null, thisArg)\n        : createWrapper(func, 1, null, null, thisArg);\n    }\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method. Method names may be specified as individual arguments or as arrays\n     * of method names. If no method names are provided all the function properties\n     * of `object` will be bound.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...string} [methodName] The object method names to\n     *  bind, specified as individual method names or arrays of method names.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'onClick': function() { console.log('clicked ' + this.label); }\n     * };\n     *\n     * _.bindAll(view);\n     * jQuery('#docs').on('click', view.onClick);\n     * // => logs 'clicked docs', when the button is clicked\n     */\n    function bindAll(object) {\n      var funcs = arguments.length > 1 ? baseFlatten(arguments, true, false, 1) : functions(object),\n          index = -1,\n          length = funcs.length;\n\n      while (++index < length) {\n        var key = funcs[index];\n        object[key] = createWrapper(object[key], 1, null, null, object);\n      }\n      return object;\n    }\n\n    /**\n     * Creates a function that, when called, invokes the method at `object[key]`\n     * and prepends any additional `bindKey` arguments to those provided to the bound\n     * function. This method differs from `_.bind` by allowing bound functions to\n     * reference methods that will be redefined or don't yet exist.\n     * See http://michaux.ca/articles/lazy-function-definition-pattern.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Object} object The object the method belongs to.\n     * @param {string} key The key of the method.\n     * @param {...*} [arg] Arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'name': 'fred',\n     *   'greet': function(greeting) {\n     *     return greeting + ' ' + this.name;\n     *   }\n     * };\n     *\n     * var func = _.bindKey(object, 'greet', 'hi');\n     * func();\n     * // => 'hi fred'\n     *\n     * object.greet = function(greeting) {\n     *   return greeting + 'ya ' + this.name + '!';\n     * };\n     *\n     * func();\n     * // => 'hiya fred!'\n     */\n    function bindKey(object, key) {\n      return arguments.length > 2\n        ? createWrapper(key, 19, slice(arguments, 2), null, object)\n        : createWrapper(key, 3, null, null, object);\n    }\n\n    /**\n     * Creates a function that is the composition of the provided functions,\n     * where each function consumes the return value of the function that follows.\n     * For example, composing the functions `f()`, `g()`, and `h()` produces `f(g(h()))`.\n     * Each function is executed with the `this` binding of the composed function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {...Function} [func] Functions to compose.\n     * @returns {Function} Returns the new composed function.\n     * @example\n     *\n     * var realNameMap = {\n     *   'pebbles': 'penelope'\n     * };\n     *\n     * var format = function(name) {\n     *   name = realNameMap[name.toLowerCase()] || name;\n     *   return name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();\n     * };\n     *\n     * var greet = function(formatted) {\n     *   return 'Hiya ' + formatted + '!';\n     * };\n     *\n     * var welcome = _.compose(greet, format);\n     * welcome('pebbles');\n     * // => 'Hiya Penelope!'\n     */\n    function compose() {\n      var funcs = arguments,\n          length = funcs.length;\n\n      while (length--) {\n        if (!isFunction(funcs[length])) {\n          throw new TypeError;\n        }\n      }\n      return function() {\n        var args = arguments,\n            length = funcs.length;\n\n        while (length--) {\n          args = [funcs[length].apply(this, args)];\n        }\n        return args[0];\n      };\n    }\n\n    /**\n     * Creates a function which accepts one or more arguments of `func` that when\n     * invoked either executes `func` returning its result, if all `func` arguments\n     * have been provided, or returns a function that accepts one or more of the\n     * remaining `func` arguments, and so on. The arity of `func` can be specified\n     * if `func.length` is not sufficient.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var curried = _.curry(function(a, b, c) {\n     *   console.log(a + b + c);\n     * });\n     *\n     * curried(1)(2)(3);\n     * // => 6\n     *\n     * curried(1, 2)(3);\n     * // => 6\n     *\n     * curried(1, 2, 3);\n     * // => 6\n     */\n    function curry(func, arity) {\n      arity = typeof arity == 'number' ? arity : (+arity || func.length);\n      return createWrapper(func, 4, null, null, null, arity);\n    }\n\n    /**\n     * Creates a function that will delay the execution of `func` until after\n     * `wait` milliseconds have elapsed since the last time it was invoked.\n     * Provide an options object to indicate that `func` should be invoked on\n     * the leading and/or trailing edge of the `wait` timeout. Subsequent calls\n     * to the debounced function will return the result of the last `func` call.\n     *\n     * Note: If `leading` and `trailing` options are `true` `func` will be called\n     * on the trailing edge of the timeout only if the the debounced function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to debounce.\n     * @param {number} wait The number of milliseconds to delay.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.leading=false] Specify execution on the leading edge of the timeout.\n     * @param {number} [options.maxWait] The maximum time `func` is allowed to be delayed before it's called.\n     * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // avoid costly calculations while the window size is in flux\n     * var lazyLayout = _.debounce(calculateLayout, 150);\n     * jQuery(window).on('resize', lazyLayout);\n     *\n     * // execute `sendMail` when the click event is fired, debouncing subsequent calls\n     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * });\n     *\n     * // ensure `batchLog` is executed once after 1 second of debounced calls\n     * var source = new EventSource('/stream');\n     * source.addEventListener('message', _.debounce(batchLog, 250, {\n     *   'maxWait': 1000\n     * }, false);\n     */\n    function debounce(func, wait, options) {\n      var args,\n          maxTimeoutId,\n          result,\n          stamp,\n          thisArg,\n          timeoutId,\n          trailingCall,\n          lastCalled = 0,\n          maxWait = false,\n          trailing = true;\n\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      wait = nativeMax(0, wait) || 0;\n      if (options === true) {\n        var leading = true;\n        trailing = false;\n      } else if (isObject(options)) {\n        leading = options.leading;\n        maxWait = 'maxWait' in options && (nativeMax(wait, options.maxWait) || 0);\n        trailing = 'trailing' in options ? options.trailing : trailing;\n      }\n      var delayed = function() {\n        var remaining = wait - (now() - stamp);\n        if (remaining <= 0) {\n          if (maxTimeoutId) {\n            clearTimeout(maxTimeoutId);\n          }\n          var isCalled = trailingCall;\n          maxTimeoutId = timeoutId = trailingCall = undefined;\n          if (isCalled) {\n            lastCalled = now();\n            result = func.apply(thisArg, args);\n            if (!timeoutId && !maxTimeoutId) {\n              args = thisArg = null;\n            }\n          }\n        } else {\n          timeoutId = setTimeout(delayed, remaining);\n        }\n      };\n\n      var maxDelayed = function() {\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n        }\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n        if (trailing || (maxWait !== wait)) {\n          lastCalled = now();\n          result = func.apply(thisArg, args);\n          if (!timeoutId && !maxTimeoutId) {\n            args = thisArg = null;\n          }\n        }\n      };\n\n      return function() {\n        args = arguments;\n        stamp = now();\n        thisArg = this;\n        trailingCall = trailing && (timeoutId || !leading);\n\n        if (maxWait === false) {\n          var leadingCall = leading && !timeoutId;\n        } else {\n          if (!maxTimeoutId && !leading) {\n            lastCalled = stamp;\n          }\n          var remaining = maxWait - (stamp - lastCalled),\n              isCalled = remaining <= 0;\n\n          if (isCalled) {\n            if (maxTimeoutId) {\n              maxTimeoutId = clearTimeout(maxTimeoutId);\n            }\n            lastCalled = stamp;\n            result = func.apply(thisArg, args);\n          }\n          else if (!maxTimeoutId) {\n            maxTimeoutId = setTimeout(maxDelayed, remaining);\n          }\n        }\n        if (isCalled && timeoutId) {\n          timeoutId = clearTimeout(timeoutId);\n        }\n        else if (!timeoutId && wait !== maxWait) {\n          timeoutId = setTimeout(delayed, wait);\n        }\n        if (leadingCall) {\n          isCalled = true;\n          result = func.apply(thisArg, args);\n        }\n        if (isCalled && !timeoutId && !maxTimeoutId) {\n          args = thisArg = null;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Defers executing the `func` function until the current call stack has cleared.\n     * Additional arguments will be provided to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to defer.\n     * @param {...*} [arg] Arguments to invoke the function with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) { console.log(text); }, 'deferred');\n     * // logs 'deferred' after one or more milliseconds\n     */\n    function defer(func) {\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      var args = slice(arguments, 1);\n      return setTimeout(function() { func.apply(undefined, args); }, 1);\n    }\n\n    /**\n     * Executes the `func` function after `wait` milliseconds. Additional arguments\n     * will be provided to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay execution.\n     * @param {...*} [arg] Arguments to invoke the function with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) { console.log(text); }, 1000, 'later');\n     * // => logs 'later' after one second\n     */\n    function delay(func, wait) {\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      var args = slice(arguments, 2);\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided it will be used to determine the cache key for storing the result\n     * based on the arguments provided to the memoized function. By default, the\n     * first argument provided to the memoized function is used as the cache key.\n     * The `func` is executed with the `this` binding of the memoized function.\n     * The result cache is exposed as the `cache` property on the memoized function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] A function used to resolve the cache key.\n     * @returns {Function} Returns the new memoizing function.\n     * @example\n     *\n     * var fibonacci = _.memoize(function(n) {\n     *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);\n     * });\n     *\n     * fibonacci(9)\n     * // => 34\n     *\n     * var data = {\n     *   'fred': { 'name': 'fred', 'age': 40 },\n     *   'pebbles': { 'name': 'pebbles', 'age': 1 }\n     * };\n     *\n     * // modifying the result cache\n     * var get = _.memoize(function(name) { return data[name]; }, _.identity);\n     * get('pebbles');\n     * // => { 'name': 'pebbles', 'age': 1 }\n     *\n     * get.cache.pebbles.name = 'penelope';\n     * get('pebbles');\n     * // => { 'name': 'penelope', 'age': 1 }\n     */\n    function memoize(func, resolver) {\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      var memoized = function() {\n        var cache = memoized.cache,\n            key = resolver ? resolver.apply(this, arguments) : keyPrefix + arguments[0];\n\n        return hasOwnProperty.call(cache, key)\n          ? cache[key]\n          : (cache[key] = func.apply(this, arguments));\n      }\n      memoized.cache = {};\n      return memoized;\n    }\n\n    /**\n     * Creates a function that is restricted to execute `func` once. Repeat calls to\n     * the function will return the value of the first call. The `func` is executed\n     * with the `this` binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // `initialize` executes `createApplication` once\n     */\n    function once(func) {\n      var ran,\n          result;\n\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      return function() {\n        if (ran) {\n          return result;\n        }\n        ran = true;\n        result = func.apply(this, arguments);\n\n        // clear the `func` variable so the function may be garbage collected\n        func = null;\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that, when called, invokes `func` with any additional\n     * `partial` arguments prepended to those provided to the new function. This\n     * method is similar to `_.bind` except it does **not** alter the `this` binding.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [arg] Arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * var greet = function(greeting, name) { return greeting + ' ' + name; };\n     * var hi = _.partial(greet, 'hi');\n     * hi('fred');\n     * // => 'hi fred'\n     */\n    function partial(func) {\n      return createWrapper(func, 16, slice(arguments, 1));\n    }\n\n    /**\n     * This method is like `_.partial` except that `partial` arguments are\n     * appended to those provided to the new function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [arg] Arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * var defaultsDeep = _.partialRight(_.merge, _.defaults);\n     *\n     * var options = {\n     *   'variable': 'data',\n     *   'imports': { 'jq': $ }\n     * };\n     *\n     * defaultsDeep(options, _.templateSettings);\n     *\n     * options.variable\n     * // => 'data'\n     *\n     * options.imports\n     * // => { '_': _, 'jq': $ }\n     */\n    function partialRight(func) {\n      return createWrapper(func, 32, null, slice(arguments, 1));\n    }\n\n    /**\n     * Creates a function that, when executed, will only call the `func` function\n     * at most once per every `wait` milliseconds. Provide an options object to\n     * indicate that `func` should be invoked on the leading and/or trailing edge\n     * of the `wait` timeout. Subsequent calls to the throttled function will\n     * return the result of the last `func` call.\n     *\n     * Note: If `leading` and `trailing` options are `true` `func` will be called\n     * on the trailing edge of the timeout only if the the throttled function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to throttle.\n     * @param {number} wait The number of milliseconds to throttle executions to.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.leading=true] Specify execution on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // avoid excessively updating the position while scrolling\n     * var throttled = _.throttle(updatePosition, 100);\n     * jQuery(window).on('scroll', throttled);\n     *\n     * // execute `renewToken` when the click event is fired, but not more than once every 5 minutes\n     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {\n     *   'trailing': false\n     * }));\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      if (options === false) {\n        leading = false;\n      } else if (isObject(options)) {\n        leading = 'leading' in options ? options.leading : leading;\n        trailing = 'trailing' in options ? options.trailing : trailing;\n      }\n      debounceOptions.leading = leading;\n      debounceOptions.maxWait = wait;\n      debounceOptions.trailing = trailing;\n\n      return debounce(func, wait, debounceOptions);\n    }\n\n    /**\n     * Creates a function that provides `value` to the wrapper function as its\n     * first argument. Additional arguments provided to the function are appended\n     * to those provided to the wrapper function. The wrapper is executed with\n     * the `this` binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {*} value The value to wrap.\n     * @param {Function} wrapper The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('Fred, Wilma, & Pebbles');\n     * // => '<p>Fred, Wilma, &amp; Pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return createWrapper(wrapper, 16, [value]);\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var object = { 'name': 'fred' };\n     * var getter = _.constant(object);\n     * getter() === object;\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Produces a callback bound to an optional `thisArg`. If `func` is a property\n     * name the created callback will return the property value for a given element.\n     * If `func` is an object the created callback will return `true` for elements\n     * that contain the equivalent object properties, otherwise it will return `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {*} [func=identity] The value to convert to a callback.\n     * @param {*} [thisArg] The `this` binding of the created callback.\n     * @param {number} [argCount] The number of arguments the callback accepts.\n     * @returns {Function} Returns a callback function.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * // wrap to create custom callback shorthands\n     * _.createCallback = _.wrap(_.createCallback, function(func, callback, thisArg) {\n     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(callback);\n     *   return !match ? func(callback, thisArg) : function(object) {\n     *     return match[2] == 'gt' ? object[match[1]] > match[3] : object[match[1]] < match[3];\n     *   };\n     * });\n     *\n     * _.filter(characters, 'age__gt38');\n     * // => [{ 'name': 'fred', 'age': 40 }]\n     */\n    function createCallback(func, thisArg, argCount) {\n      var type = typeof func;\n      if (func == null || type == 'function') {\n        return baseCreateCallback(func, thisArg, argCount);\n      }\n      // handle \"_.pluck\" style callback shorthands\n      if (type != 'object') {\n        return property(func);\n      }\n      var props = keys(func),\n          key = props[0],\n          a = func[key];\n\n      // handle \"_.where\" style callback shorthands\n      if (props.length == 1 && a === a && !isObject(a)) {\n        // fast path the common case of providing an object with a single\n        // property containing a primitive value\n        return function(object) {\n          var b = object[key];\n          return a === b && (a !== 0 || (1 / a == 1 / b));\n        };\n      }\n      return function(object) {\n        var length = props.length,\n            result = false;\n\n        while (length--) {\n          if (!(result = baseIsEqual(object[props[length]], func[props[length]], null, true))) {\n            break;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Converts the characters `&`, `<`, `>`, `\"`, and `'` in `string` to their\n     * corresponding HTML entities.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} string The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('Fred, Wilma, & Pebbles');\n     * // => 'Fred, Wilma, &amp; Pebbles'\n     */\n    function escape(string) {\n      return string == null ? '' : String(string).replace(reUnescapedHtml, escapeHtmlChar);\n    }\n\n    /**\n     * This method returns the first argument provided to it.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'name': 'fred' };\n     * _.identity(object) === object;\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Adds function properties of a source object to the destination object.\n     * If `object` is a function methods will be added to its prototype as well.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {Function|Object} [object=lodash] object The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.chain=true] Specify whether the functions added are chainable.\n     * @example\n     *\n     * function capitalize(string) {\n     *   return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n     * }\n     *\n     * _.mixin({ 'capitalize': capitalize });\n     * _.capitalize('fred');\n     * // => 'Fred'\n     *\n     * _('fred').capitalize().value();\n     * // => 'Fred'\n     *\n     * _.mixin({ 'capitalize': capitalize }, { 'chain': false });\n     * _('fred').capitalize();\n     * // => 'Fred'\n     */\n    function mixin(object, source, options) {\n      var chain = true,\n          methodNames = source && functions(source);\n\n      if (!source || (!options && !methodNames.length)) {\n        if (options == null) {\n          options = source;\n        }\n        ctor = lodashWrapper;\n        source = object;\n        object = lodash;\n        methodNames = functions(source);\n      }\n      if (options === false) {\n        chain = false;\n      } else if (isObject(options) && 'chain' in options) {\n        chain = options.chain;\n      }\n      var ctor = object,\n          isFunc = isFunction(ctor);\n\n      forEach(methodNames, function(methodName) {\n        var func = object[methodName] = source[methodName];\n        if (isFunc) {\n          ctor.prototype[methodName] = function() {\n            var chainAll = this.__chain__,\n                value = this.__wrapped__,\n                args = [value];\n\n            push.apply(args, arguments);\n            var result = func.apply(object, args);\n            if (chain || chainAll) {\n              if (value === result && isObject(result)) {\n                return this;\n              }\n              result = new ctor(result);\n              result.__chain__ = chainAll;\n            }\n            return result;\n          };\n        }\n      });\n    }\n\n    /**\n     * Reverts the '_' variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      context._ = oldDash;\n      return this;\n    }\n\n    /**\n     * A no-operation function.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @example\n     *\n     * var object = { 'name': 'fred' };\n     * _.noop(object) === undefined;\n     * // => true\n     */\n    function noop() {\n      // no operation performed\n    }\n\n    /**\n     * Gets the number of milliseconds that have elapsed since the Unix epoch\n     * (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @example\n     *\n     * var stamp = _.now();\n     * _.defer(function() { console.log(_.now() - stamp); });\n     * // => logs the number of milliseconds it took for the deferred function to be called\n     */\n    var now = isNative(now = Date.now) && now || function() {\n      return new Date().getTime();\n    };\n\n    /**\n     * Converts the given value into an integer of the specified radix.\n     * If `radix` is `undefined` or `0` a `radix` of `10` is used unless the\n     * `value` is a hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * Note: This method avoids differences in native ES3 and ES5 `parseInt`\n     * implementations. See http://es5.github.io/#E.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} value The value to parse.\n     * @param {number} [radix] The radix used to interpret the value to parse.\n     * @returns {number} Returns the new integer value.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     */\n    var parseInt = nativeParseInt(whitespace + '08') == 8 ? nativeParseInt : function(value, radix) {\n      // Firefox < 21 and Opera < 15 follow the ES3 specified implementation of `parseInt`\n      return nativeParseInt(isString(value) ? value.replace(reLeadingSpacesAndZeros, '') : value, radix || 0);\n    };\n\n    /**\n     * Creates a \"_.pluck\" style function, which returns the `key` value of a\n     * given object.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} key The name of the property to retrieve.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'fred',   'age': 40 },\n     *   { 'name': 'barney', 'age': 36 }\n     * ];\n     *\n     * var getName = _.property('name');\n     *\n     * _.map(characters, getName);\n     * // => ['barney', 'fred']\n     *\n     * _.sortBy(characters, getName);\n     * // => [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred',   'age': 40 }]\n     */\n    function property(key) {\n      return function(object) {\n        return object[key];\n      };\n    }\n\n    /**\n     * Produces a random number between `min` and `max` (inclusive). If only one\n     * argument is provided a number between `0` and the given number will be\n     * returned. If `floating` is truey or either `min` or `max` are floats a\n     * floating-point number will be returned instead of an integer.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {number} [min=0] The minimum possible value.\n     * @param {number} [max=1] The maximum possible value.\n     * @param {boolean} [floating=false] Specify returning a floating-point number.\n     * @returns {number} Returns a random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(min, max, floating) {\n      var noMin = min == null,\n          noMax = max == null;\n\n      if (floating == null) {\n        if (typeof min == 'boolean' && noMax) {\n          floating = min;\n          min = 1;\n        }\n        else if (!noMax && typeof max == 'boolean') {\n          floating = max;\n          noMax = true;\n        }\n      }\n      if (noMin && noMax) {\n        max = 1;\n      }\n      min = +min || 0;\n      if (noMax) {\n        max = min;\n        min = 0;\n      } else {\n        max = +max || 0;\n      }\n      if (floating || min % 1 || max % 1) {\n        var rand = nativeRandom();\n        return nativeMin(min + (rand * (max - min + parseFloat('1e-' + ((rand +'').length - 1)))), max);\n      }\n      return baseRandom(min, max);\n    }\n\n    /**\n     * Resolves the value of property `key` on `object`. If `key` is a function\n     * it will be invoked with the `this` binding of `object` and its result returned,\n     * else the property value is returned. If `object` is falsey then `undefined`\n     * is returned.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {Object} object The object to inspect.\n     * @param {string} key The name of the property to resolve.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = {\n     *   'cheese': 'crumpets',\n     *   'stuff': function() {\n     *     return 'nonsense';\n     *   }\n     * };\n     *\n     * _.result(object, 'cheese');\n     * // => 'crumpets'\n     *\n     * _.result(object, 'stuff');\n     * // => 'nonsense'\n     */\n    function result(object, key) {\n      if (object) {\n        var value = object[key];\n        return isFunction(value) ? object[key]() : value;\n      }\n    }\n\n    /**\n     * A micro-templating method that handles arbitrary delimiters, preserves\n     * whitespace, and correctly escapes quotes within interpolated code.\n     *\n     * Note: In the development build, `_.template` utilizes sourceURLs for easier\n     * debugging. See http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl\n     *\n     * For more information on precompiling templates see:\n     * https://lodash.com/custom-builds\n     *\n     * For more information on Chrome extension sandboxes see:\n     * http://developer.chrome.com/stable/extensions/sandboxingEval.html\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} text The template text.\n     * @param {Object} data The data object used to populate the text.\n     * @param {Object} [options] The options object.\n     * @param {RegExp} [options.escape] The \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate] The \"evaluate\" delimiter.\n     * @param {Object} [options.imports] An object to import into the template as local variables.\n     * @param {RegExp} [options.interpolate] The \"interpolate\" delimiter.\n     * @param {string} [sourceURL] The sourceURL of the template's compiled source.\n     * @param {string} [variable] The data object variable name.\n     * @returns {Function|string} Returns a compiled function when no `data` object\n     *  is given, else it returns the interpolated text.\n     * @example\n     *\n     * // using the \"interpolate\" delimiter to create a compiled template\n     * var compiled = _.template('hello <%= name %>');\n     * compiled({ 'name': 'fred' });\n     * // => 'hello fred'\n     *\n     * // using the \"escape\" delimiter to escape HTML in data property values\n     * _.template('<b><%- value %></b>', { 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // using the \"evaluate\" delimiter to generate HTML\n     * var list = '<% _.forEach(people, function(name) { %><li><%- name %></li><% }); %>';\n     * _.template(list, { 'people': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // using the ES6 delimiter as an alternative to the default \"interpolate\" delimiter\n     * _.template('hello ${ name }', { 'name': 'pebbles' });\n     * // => 'hello pebbles'\n     *\n     * // using the internal `print` function in \"evaluate\" delimiters\n     * _.template('<% print(\"hello \" + name); %>!', { 'name': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // using a custom template delimiters\n     * _.templateSettings = {\n     *   'interpolate': /{{([\\s\\S]+?)}}/g\n     * };\n     *\n     * _.template('hello {{ name }}!', { 'name': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // using the `imports` option to import jQuery\n     * var list = '<% jq.each(people, function(name) { %><li><%- name %></li><% }); %>';\n     * _.template(list, { 'people': ['fred', 'barney'] }, { 'imports': { 'jq': jQuery } });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // using the `sourceURL` option to specify a custom sourceURL for the template\n     * var compiled = _.template('hello <%= name %>', null, { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector\n     *\n     * // using the `variable` option to ensure a with-statement isn't used in the compiled template\n     * var compiled = _.template('hi <%= data.name %>!', null, { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     *   var __t, __p = '', __e = _.escape;\n     *   __p += 'hi ' + ((__t = ( data.name )) == null ? '' : __t) + '!';\n     *   return __p;\n     * }\n     *\n     * // using the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and a stack trace\n     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(text, data, options) {\n      // based on John Resig's `tmpl` implementation\n      // http://ejohn.org/blog/javascript-micro-templating/\n      // and Laura Doktorova's doT.js\n      // https://github.com/olado/doT\n      var settings = lodash.templateSettings;\n      text = String(text || '');\n\n      // avoid missing dependencies when `iteratorTemplate` is not defined\n      options = defaults({}, options, settings);\n\n      var imports = defaults({}, options.imports, settings.imports),\n          importsKeys = keys(imports),\n          importsValues = values(imports);\n\n      var isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // compile the regexp to match each delimiter\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      text.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // escape characters that cannot be included in string literals\n        source += text.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // replace delimiters with snippets\n        if (escapeValue) {\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // the JS engine embedded in Adobe products requires returning the `match`\n        // string in order to produce the correct `offset` value\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // if `variable` is not specified, wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain\n      var variable = options.variable,\n          hasVariable = variable;\n\n      if (!hasVariable) {\n        variable = 'obj';\n        source = 'with (' + variable + ') {\\n' + source + '\\n}\\n';\n      }\n      // cleanup code by stripping empty strings\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // frame code as the function body\n      source = 'function(' + variable + ') {\\n' +\n        (hasVariable ? '' : variable + ' || (' + variable + ' = {});\\n') +\n        \"var __t, __p = '', __e = _.escape\" +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      // Use a sourceURL for easier debugging.\n      // http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl\n      var sourceURL = '\\n/*\\n//# sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\\n*/';\n\n      try {\n        var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);\n      } catch(e) {\n        e.source = source;\n        throw e;\n      }\n      if (data) {\n        return result(data);\n      }\n      // provide the compiled function's source by its `toString` method, in\n      // supported environments, or the `source` property as a convenience for\n      // inlining compiled templates during the build process\n      result.source = source;\n      return result;\n    }\n\n    /**\n     * Executes the callback `n` times, returning an array of the results\n     * of each callback execution. The callback is bound to `thisArg` and invoked\n     * with one argument; (index).\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {number} n The number of times to execute the callback.\n     * @param {Function} callback The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns an array of the results of each `callback` execution.\n     * @example\n     *\n     * var diceRolls = _.times(3, _.partial(_.random, 1, 6));\n     * // => [3, 6, 4]\n     *\n     * _.times(3, function(n) { mage.castSpell(n); });\n     * // => calls `mage.castSpell(n)` three times, passing `n` of `0`, `1`, and `2` respectively\n     *\n     * _.times(3, function(n) { this.cast(n); }, mage);\n     * // => also calls `mage.castSpell(n)` three times\n     */\n    function times(n, callback, thisArg) {\n      n = (n = +n) > -1 ? n : 0;\n      var index = -1,\n          result = Array(n);\n\n      callback = baseCreateCallback(callback, thisArg, 1);\n      while (++index < n) {\n        result[index] = callback(index);\n      }\n      return result;\n    }\n\n    /**\n     * The inverse of `_.escape` this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to their\n     * corresponding characters.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} string The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('Fred, Barney &amp; Pebbles');\n     * // => 'Fred, Barney & Pebbles'\n     */\n    function unescape(string) {\n      return string == null ? '' : String(string).replace(reEscapedHtml, unescapeHtmlChar);\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is provided the ID will be appended to it.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} [prefix] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return String(prefix == null ? '' : prefix) + id;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object that wraps the given value with explicit\n     * method chaining enabled.\n     *\n     * @static\n     * @memberOf _\n     * @category Chaining\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'age': 36 },\n     *   { 'name': 'fred',    'age': 40 },\n     *   { 'name': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _.chain(characters)\n     *     .sortBy('age')\n     *     .map(function(chr) { return chr.name + ' is ' + chr.age; })\n     *     .first()\n     *     .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      value = new lodashWrapper(value);\n      value.__chain__ = true;\n      return value;\n    }\n\n    /**\n     * Invokes `interceptor` with the `value` as the first argument and then\n     * returns `value`. The purpose of this method is to \"tap into\" a method\n     * chain in order to perform operations on intermediate results within\n     * the chain.\n     *\n     * @static\n     * @memberOf _\n     * @category Chaining\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3, 4])\n     *  .tap(function(array) { array.pop(); })\n     *  .reverse()\n     *  .value();\n     * // => [3, 2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * Enables explicit method chaining on the wrapper object.\n     *\n     * @name chain\n     * @memberOf _\n     * @category Chaining\n     * @returns {*} Returns the wrapper object.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * // without explicit chaining\n     * _(characters).first();\n     * // => { 'name': 'barney', 'age': 36 }\n     *\n     * // with explicit chaining\n     * _(characters).chain()\n     *   .first()\n     *   .pick('age')\n     *   .value();\n     * // => { 'age': 36 }\n     */\n    function wrapperChain() {\n      this.__chain__ = true;\n      return this;\n    }\n\n    /**\n     * Produces the `toString` result of the wrapped value.\n     *\n     * @name toString\n     * @memberOf _\n     * @category Chaining\n     * @returns {string} Returns the string result.\n     * @example\n     *\n     * _([1, 2, 3]).toString();\n     * // => '1,2,3'\n     */\n    function wrapperToString() {\n      return String(this.__wrapped__);\n    }\n\n    /**\n     * Extracts the wrapped value.\n     *\n     * @name valueOf\n     * @memberOf _\n     * @alias value\n     * @category Chaining\n     * @returns {*} Returns the wrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).valueOf();\n     * // => [1, 2, 3]\n     */\n    function wrapperValueOf() {\n      return this.__wrapped__;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    // add functions that return wrapped values when chaining\n    lodash.after = after;\n    lodash.assign = assign;\n    lodash.at = at;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.chain = chain;\n    lodash.compact = compact;\n    lodash.compose = compose;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.createCallback = createCallback;\n    lodash.curry = curry;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.filter = filter;\n    lodash.flatten = flatten;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.functions = functions;\n    lodash.groupBy = groupBy;\n    lodash.indexBy = indexBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.invert = invert;\n    lodash.invoke = invoke;\n    lodash.keys = keys;\n    lodash.map = map;\n    lodash.mapValues = mapValues;\n    lodash.max = max;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.min = min;\n    lodash.omit = omit;\n    lodash.once = once;\n    lodash.pairs = pairs;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.pick = pick;\n    lodash.pluck = pluck;\n    lodash.property = property;\n    lodash.pull = pull;\n    lodash.range = range;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.shuffle = shuffle;\n    lodash.sortBy = sortBy;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.times = times;\n    lodash.toArray = toArray;\n    lodash.transform = transform;\n    lodash.union = union;\n    lodash.uniq = uniq;\n    lodash.values = values;\n    lodash.where = where;\n    lodash.without = without;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n\n    // add aliases\n    lodash.collect = map;\n    lodash.drop = rest;\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.extend = assign;\n    lodash.methods = functions;\n    lodash.object = zipObject;\n    lodash.select = filter;\n    lodash.tail = rest;\n    lodash.unique = uniq;\n    lodash.unzip = zip;\n\n    // add functions to `lodash.prototype`\n    mixin(lodash);\n\n    /*--------------------------------------------------------------------------*/\n\n    // add functions that return unwrapped values when chaining\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.contains = contains;\n    lodash.escape = escape;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.has = has;\n    lodash.identity = identity;\n    lodash.indexOf = indexOf;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isBoolean = isBoolean;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isNaN = isNaN;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isString = isString;\n    lodash.isUndefined = isUndefined;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.mixin = mixin;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.result = result;\n    lodash.runInContext = runInContext;\n    lodash.size = size;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.template = template;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n\n    // add aliases\n    lodash.all = every;\n    lodash.any = some;\n    lodash.detect = find;\n    lodash.findWhere = find;\n    lodash.foldl = reduce;\n    lodash.foldr = reduceRight;\n    lodash.include = contains;\n    lodash.inject = reduce;\n\n    mixin(function() {\n      var source = {}\n      forOwn(lodash, function(func, methodName) {\n        if (!lodash.prototype[methodName]) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }(), false);\n\n    /*--------------------------------------------------------------------------*/\n\n    // add functions capable of returning wrapped and unwrapped values when chaining\n    lodash.first = first;\n    lodash.last = last;\n    lodash.sample = sample;\n\n    // add aliases\n    lodash.take = first;\n    lodash.head = first;\n\n    forOwn(lodash, function(func, methodName) {\n      var callbackable = methodName !== 'sample';\n      if (!lodash.prototype[methodName]) {\n        lodash.prototype[methodName]= function(n, guard) {\n          var chainAll = this.__chain__,\n              result = func(this.__wrapped__, n, guard);\n\n          return !chainAll && (n == null || (guard && !(callbackable && typeof n == 'function')))\n            ? result\n            : new lodashWrapper(result, chainAll);\n        };\n      }\n    });\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type string\n     */\n    lodash.VERSION = '2.4.2';\n\n    // add \"Chaining\" functions to the wrapper\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.toString = wrapperToString;\n    lodash.prototype.value = wrapperValueOf;\n    lodash.prototype.valueOf = wrapperValueOf;\n\n    // add `Array` functions that return unwrapped values\n    forEach(['join', 'pop', 'shift'], function(methodName) {\n      var func = arrayRef[methodName];\n      lodash.prototype[methodName] = function() {\n        var chainAll = this.__chain__,\n            result = func.apply(this.__wrapped__, arguments);\n\n        return chainAll\n          ? new lodashWrapper(result, chainAll)\n          : result;\n      };\n    });\n\n    // add `Array` functions that return the existing wrapped value\n    forEach(['push', 'reverse', 'sort', 'unshift'], function(methodName) {\n      var func = arrayRef[methodName];\n      lodash.prototype[methodName] = function() {\n        func.apply(this.__wrapped__, arguments);\n        return this;\n      };\n    });\n\n    // add `Array` functions that return new wrapped values\n    forEach(['concat', 'slice', 'splice'], function(methodName) {\n      var func = arrayRef[methodName];\n      lodash.prototype[methodName] = function() {\n        return new lodashWrapper(func.apply(this.__wrapped__, arguments), this.__chain__);\n      };\n    });\n\n    return lodash;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // expose Lo-Dash\n  var _ = runInContext();\n\n  // some AMD build optimizers like r.js check for condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lo-Dash to the global object even when an AMD loader is present in\n    // case Lo-Dash is loaded with a RequireJS shim config.\n    // See http://requirejs.org/docs/api.html#config-shim\n    root._ = _;\n\n    // define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module\n    define(function() {\n      return _;\n    });\n  }\n  // check for `exports` after `define` in case a build optimizer adds an `exports` object\n  else if (freeExports && freeModule) {\n    // in Node.js or RingoJS\n    if (moduleExports) {\n      (freeModule.exports = _)._ = _;\n    }\n    // in Narwhal or Rhino -require\n    else {\n      freeExports._ = _;\n    }\n  }\n  else {\n    // in a browser or Rhino\n    root._ = _;\n  }\n}.call(this));\n\n\n\n// WEBPACK FOOTER //\n// ./~/lodash/dist/lodash.js","/*! 2.1.1 */\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"shifty\",[],e):\"object\"==typeof exports?exports.shifty=e():t.shifty=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"/assets/\",e(e.s=7)}([function(t,e,n){\"use strict\";(function(t){function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new g,n=e.tween(t);return n.tweenable=e,n}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Tweenable=e.composeEasingObject=e.tweenProps=e.clone=e.each=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t};e.tween=i;var a=n(6),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(a),c=n(1),f=function(t){return t&&t.__esModule?t:{default:t}}(c),h=\"undefined\"!=typeof window?window:t,l=h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.oRequestAnimationFrame||h.msRequestAnimationFrame||h.mozCancelRequestAnimationFrame&&h.mozRequestAnimationFrame||setTimeout,p=function(){},d=e.each=function(t,e){Object.keys(t).forEach(e)},m=e.clone=function(t){return(0,f.default)({},t)},_=m(s),v=function(t,e,n,r){return t+(e-t)*n(r)},y=e.tweenProps=function(t,e,n,r,i,o,u){var a=t<o?0:(t-o)/i;return d(e,function(t){var i=u[t],o=\"function\"==typeof i?i:_[i];e[t]=v(n[t],r[t],o,a)}),e},w=e.composeEasingObject=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"linear\",n={},r=void 0===e?\"undefined\":u(e);return\"string\"===r||\"function\"===r?d(t,function(t){return n[t]=e}):d(t,function(t){return n[t]=n[t]||e[t]||\"linear\"}),n},g=e.Tweenable=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;r(this,t),this._currentState=e,this._configured=!1,this._scheduleFunction=l,void 0!==n&&this.setConfig(n)}return o(t,[{key:\"_applyFilter\",value:function(e){var n=this,r=t.filters,i=this._filterArgs;d(r,function(t){var o=r[t][e];void 0!==o&&o.apply(n,i)})}},{key:\"_timeoutHandler\",value:function(e){var n=this,r=arguments,i=this._delay,o=this._currentState,u=this._timestamp,a=this._duration,s=this._targetState,c=this._step,f=u+i+a,l=Math.min(e||t.now(),f),p=l>=f,d=a-(f-l);this.isPlaying()&&(p?(c(s,this._attachment,d),this.stop(!0)):(this._scheduleId=this._scheduleFunction.call(h,function(){return n._timeoutHandler.apply(n,r)},1e3/60),this._applyFilter(\"beforeTween\"),l<u+i?(l=1,a=1,u=1):u+=i,y(l,o,this._originalState,s,a,u,this._easing),this._applyFilter(\"afterTween\"),c(o,this._attachment,d)))}},{key:\"tween\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=t.now(),this._start(this.get(),this._attachment),this.resume())}},{key:\"setConfig\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._configured=!0,this._attachment=e.attachment,(0,f.default)(this,{_pausedAtTime:null,_scheduleId:null,_delay:e.delay||0,_start:e.start||p,_step:e.step||p,_duration:e.duration||500,_currentState:m(e.from||this.get())}),(0,f.default)(this,{_originalState:this.get(),_targetState:m(e.to||this.get())});var n=this._currentState;this._targetState=(0,f.default)({},n,this._targetState),this._easing=w(n,e.easing),this._filterArgs=[n,this._originalState,this._targetState,this._easing],this._applyFilter(\"tweenCreated\");var r=e.promise||Promise;return this._promise=new r(function(e,n){t._resolve=e,t._reject=n}),this._promise.catch(p),this}},{key:\"get\",value:function(){return m(this._currentState)}},{key:\"set\",value:function(t){this._currentState=t}},{key:\"pause\",value:function(){return this._pausedAtTime=t.now(),this._isPaused=!0,this}},{key:\"resume\",value:function(){return this._isPaused&&(this._timestamp+=t.now()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this._promise}},{key:\"seek\",value:function(e){e=Math.max(e,0);var n=t.now();return this._timestamp+e===0?this:(this._timestamp=n-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,this._timeoutHandler(n),this.pause()),this)}},{key:\"stop\",value:function(t){return this._isTweening=!1,this._isPaused=!1,(h.cancelAnimationFrame||h.webkitCancelAnimationFrame||h.oCancelAnimationFrame||h.msCancelAnimationFrame||h.mozCancelRequestAnimationFrame||h.clearTimeout)(this._scheduleId),t?(this._applyFilter(\"beforeTween\"),y(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),this._applyFilter(\"afterTween\"),this._applyFilter(\"afterTweenEnd\"),this._resolve(this._currentState,this._attachment)):this._reject(this._currentState,this._attachment),this}},{key:\"isPlaying\",value:function(){return this._isTweening&&!this._isPaused}},{key:\"setScheduleFunction\",value:function(t){this._scheduleFunction=t}},{key:\"dispose\",value:function(){var t=this;d(this,function(e){return delete t[e]})}}]),t}();(0,f.default)(g,{formulas:_,filters:{},now:Date.now||function(t){return+new Date}})}).call(e,n(5))},function(t,e,n){\"use strict\";function r(t){if(null===t||void 0===t)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(t)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String(\"abc\");if(t[5]=\"de\",\"5\"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e[\"_\"+String.fromCharCode(n)]=n;if(\"0123456789\"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(\"\"))return!1;var r={};return\"abcdefghijklmnopqrst\".split(\"\").forEach(function(t){r[t]=t}),\"abcdefghijklmnopqrst\"===Object.keys(Object.assign({},r)).join(\"\")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,s=r(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var f in n)o.call(n,f)&&(s[f]=n[f]);if(i){a=i(n);for(var h=0;h<a.length;h++)u.call(n,a[h])&&(s[a[h]]=n[a[h]])}}return s}},function(t,e,n){\"use strict\";function r(t,e,n,r,i,o){var u=0,a=0,s=0,c=0,f=0,h=0,l=function(t){return((u*t+a)*t+s)*t},p=function(t){return((c*t+f)*t+h)*t},d=function(t){return(3*u*t+2*a)*t+s},m=function(t){return t>=0?t:0-t},_=function(t,e){var n=void 0,r=void 0,i=void 0,o=void 0,u=void 0,a=void 0;for(i=t,a=0;a<8;a++){if(o=l(i)-t,m(o)<e)return i;if(u=d(i),m(u)<1e-6)break;i-=o/u}if(n=0,r=1,(i=t)<n)return n;if(i>r)return r;for(;n<r;){if(o=l(i),m(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i};return s=3*e,a=3*(r-e)-s,u=1-s-a,h=3*n,f=3*(i-n)-h,c=1-h-f,function(t,e){return p(_(t,e))}(t,function(t){return 1/(200*t)}(o))}Object.defineProperty(e,\"__esModule\",{value:!0}),e.unsetBezierFunction=e.setBezierFunction=void 0;var i=n(0),o=n(1),u=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(t,e,n,i){return function(o){return r(o,t,e,n,i,1)}};e.setBezierFunction=function(t,e,n,r,o){return i.Tweenable.formulas[t]=(0,u.default)(a(e,n,r,o),{displayName:t,x1:e,y1:n,x2:r,y2:o})},e.unsetBezierFunction=function(t){return delete i.Tweenable.formulas[t]}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.interpolate=void 0;var r=n(0),i=new r.Tweenable;i._filterArgs=[];e.interpolate=function(t,e,n,o){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=(0,r.clone)(t),s=(0,r.composeEasingObject)(t,o);i.set({}),i._filterArgs=[a,t,e,s],i._applyFilter(\"tweenCreated\"),i._applyFilter(\"beforeTween\");var c=(0,r.tweenProps)(n,a,t,e,1,u,s);return i._applyFilter(\"afterTween\"),c}},function(t,e,n){\"use strict\";function r(t){return parseInt(t,16)}function i(t,e,n){[t,e,n].forEach(_),this._tokenData=g(t)}function o(t,e,n,r){var i=this._tokenData;S(r,i),[t,e,n].forEach(function(t){return b(t,i)})}function u(t,e,n,r){var i=this._tokenData;[t,e,n].forEach(function(t){return F(t,i)}),k(r,i)}Object.defineProperty(e,\"__esModule\",{value:!0}),e.tweenCreated=i,e.beforeTween=o,e.afterTween=u;var a=n(0),s=function(){var t=/[0-9.\\-]+/g.source,e=/,\\s*/.source;return new RegExp(\"rgb\\\\(\"+t+e+t+e+t+\"\\\\)\",\"g\")}(),c=/#([0-9]|[a-f]){3,6}/gi,f=function(t,e){return t.map(function(t,n){return\"_\"+e+\"_\"+n})},h=function(t){var e=t.match(/([^\\-0-9\\.]+)/g);return e?(1===e.length||t.charAt(0).match(/(\\d|\\-|\\.)/))&&e.unshift(\"\"):e=[\"\",\"\"],e.join(\"VAL\")},l=function(t){return t=t.replace(/#/,\"\"),3===t.length&&(t=t.split(\"\"),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[r(t.substr(0,2)),r(t.substr(2,2)),r(t.substr(4,2))]},p=function(t){return\"rgb(\"+l(t).join(\",\")+\")\"},d=function(t,e,n){var r=e.match(t),i=e.replace(t,\"VAL\");return r&&r.forEach(function(t){return i=i.replace(\"VAL\",n(t))}),i},m=function(t){return d(c,t,p)},_=function(t){(0,a.each)(t,function(e){var n=t[e];\"string\"==typeof n&&n.match(c)&&(t[e]=m(n))})},v=function(t){var e=t.match(/[0-9.\\-]+/g).map(Math.floor);return\"\"+t.match(/^.*\\(/)[0]+e.join(\",\")+\")\"},y=function(t){return d(s,t,v)},w=function(t){return t.match(/[0-9.\\-]+/g)},g=function(t){var e={};return(0,a.each)(t,function(n){var r=t[n];\"string\"==typeof r&&(e[n]={formatString:h(r),chunkNames:f(w(r),n)})}),e},b=function(t,e){(0,a.each)(e,function(n){w(t[n]).forEach(function(r,i){return t[e[n].chunkNames[i]]=+r}),delete t[n]})},M=function(t,e){var n={};return e.forEach(function(e){n[e]=t[e],delete t[e]}),n},O=function(t,e){return e.map(function(e){return t[e]})},j=function(t,e){return e.forEach(function(e){return t=t.replace(\"VAL\",+e.toFixed(4))}),t},F=function(t,e){(0,a.each)(e,function(n){var r=e[n],i=r.chunkNames,o=r.formatString,u=j(o,O(M(t,i),i));t[n]=y(u)})},S=function(t,e){(0,a.each)(e,function(n){var r=e[n].chunkNames,i=t[n];\"string\"==typeof i?function(){var e=i.split(\" \"),n=e[e.length-1];r.forEach(function(r,i){return t[r]=e[i]||n})}():r.forEach(function(e){return t[e]=i}),delete t[n]})},k=function(t,e){(0,a.each)(e,function(n){var r=e[n].chunkNames,i=(r.length,t[r[0]]);t[n]=\"string\"==typeof i?r.map(function(e){var n=t[e];return delete t[e],n}).join(\" \"):i})}},function(t,e,n){\"use strict\";var r,i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t};r=function(){return this}();try{r=r||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"===(\"undefined\"==typeof window?\"undefined\":i(window))&&(r=window)}t.exports=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.linear=function(t){return t},e.easeInQuad=function(t){return Math.pow(t,2)},e.easeOutQuad=function(t){return-(Math.pow(t-1,2)-1)},e.easeInOutQuad=function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},e.easeInCubic=function(t){return Math.pow(t,3)},e.easeOutCubic=function(t){return Math.pow(t-1,3)+1},e.easeInOutCubic=function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},e.easeInQuart=function(t){return Math.pow(t,4)},e.easeOutQuart=function(t){return-(Math.pow(t-1,4)-1)},e.easeInOutQuart=function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},e.easeInQuint=function(t){return Math.pow(t,5)},e.easeOutQuint=function(t){return Math.pow(t-1,5)+1},e.easeInOutQuint=function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},e.easeInSine=function(t){return 1-Math.cos(t*(Math.PI/2))},e.easeOutSine=function(t){return Math.sin(t*(Math.PI/2))},e.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.easeInExpo=function(t){return 0===t?0:Math.pow(2,10*(t-1))},e.easeOutExpo=function(t){return 1===t?1:1-Math.pow(2,-10*t)},e.easeInOutExpo=function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},e.easeInCirc=function(t){return-(Math.sqrt(1-t*t)-1)},e.easeOutCirc=function(t){return Math.sqrt(1-Math.pow(t-1,2))},e.easeInOutCirc=function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.easeOutBounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.easeInBack=function(t){var e=1.70158;return t*t*((e+1)*t-e)},e.easeOutBack=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},e.easeInOutBack=function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},e.elastic=function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1},e.swingFromTo=function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},e.swingFrom=function(t){var e=1.70158;return t*t*((e+1)*t-e)},e.swingTo=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},e.bounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bouncePast=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},e.easeFromTo=function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},e.easeFrom=function(t){return Math.pow(t,4)},e.easeTo=function(t){return Math.pow(t,.25)}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.unsetBezierFunction=e.setBezierFunction=e.interpolate=e.tween=e.Tweenable=void 0;var r=n(0),i=n(3),o=n(2),u=n(4),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u);r.Tweenable.filters.token=a,e.Tweenable=r.Tweenable,e.tween=r.tween,e.interpolate=i.interpolate,e.setBezierFunction=o.setBezierFunction,e.unsetBezierFunction=o.unsetBezierFunction}])});\n//# sourceMappingURL=shifty.js.map\n\n\n// WEBPACK FOOTER //\n// ../shifty/dist/shifty.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","import _, { noop } from 'lodash';\nimport { Tweenable } from 'shifty';\nimport { composeEasingObject } from '../node_modules/shifty/src/tweenable';\nimport { KeyframeProperty } from './keyframe-property';\nimport {\n  fireEvent,\n  invalidateAnimationLength,\n  DEFAULT_EASING\n} from './rekapi';\n\n/*!\n * @param {Object} obj\n * @return {number} millisecond\n */\nconst getMillisecond = obj => obj.millisecond;\n\n// TODO: Make this a prototype method\n/*!\n * @param {Actor} actor\n * @param {string} event\n * @param {any} [data]\n */\nconst fire = (actor, event, data) =>\n  actor.rekapi && fireEvent(actor.rekapi, event, data);\n\n/*!\n * Retrieves the most recent property cache entry for a given millisecond.\n * @param {Actor} actor\n * @param {number} millisecond\n * @return {(Object|undefined)} undefined if there is no property cache for\n * the millisecond, i.e. an empty cache.\n */\nconst getPropertyCacheEntryForMillisecond = (actor, millisecond) => {\n  const { _timelinePropertyCache } = actor;\n  const index = _.sortedIndex(\n    _timelinePropertyCache,\n    { _millisecond: millisecond },\n    obj => obj._millisecond\n  );\n\n  if (!_timelinePropertyCache[index]) {\n    return;\n  }\n\n  return _timelinePropertyCache[index]._millisecond === millisecond ?\n    _timelinePropertyCache[index] :\n      index >= 1 ?\n        _timelinePropertyCache[index - 1] :\n        _timelinePropertyCache[0];\n};\n\n/*!\n * Search property track `track` and find the correct index to insert a\n * new element at `millisecond`.\n * @param {Array(KeyframeProperty)} track\n * @param {number} millisecond\n * @return {number} index\n */\nconst insertionPointInTrack = (track, millisecond) =>\n  _.sortedIndex(track, { millisecond }, getMillisecond);\n\n/*!\n * Gets all of the current and most recent Rekapi.KeyframeProperties for a\n * given millisecond.\n * @param {Actor} actor\n * @param {number} forMillisecond\n * @return {Object} An Object containing Rekapi.KeyframeProperties\n */\nconst getLatestProperties = (actor, forMillisecond) => {\n  const latestProperties = {};\n\n  _.each(actor._propertyTracks, (propertyTrack, propertyName) => {\n    const index = insertionPointInTrack(propertyTrack, forMillisecond);\n\n    latestProperties[propertyName] =\n      propertyTrack[index] && propertyTrack[index].millisecond === forMillisecond ?\n        // Found forMillisecond exactly.\n        propertyTrack[index] :\n          index >= 1 ?\n            // forMillisecond doesn't exist in the track and index is\n            // where we'd need to insert it, therefore the previous\n            // keyframe is the most recent one before forMillisecond.\n            propertyTrack[index - 1] :\n            // Return first property.  This is after forMillisecond.\n            propertyTrack[0];\n  });\n\n  return latestProperties;\n};\n\n/*!\n * Search property track `track` and find the index to the element that is\n * at `millisecond`.  Returns `undefined` if not found.\n * @param {Array(KeyframeProperty)} track\n * @param {number} millisecond\n * @return {number} index or -1 if not present\n */\nconst propertyIndexInTrack = (track, millisecond) => {\n  const index = insertionPointInTrack(track, millisecond);\n\n  return track[index] && track[index].millisecond === millisecond ?\n    index : -1;\n};\n\n/*!\n * Mark the cache of internal KeyframeProperty data as invalid.  The cache\n * will be rebuilt on the next call to ensurePropertyCacheValid.\n * @param {Actor}\n */\nconst invalidateCache = actor => actor._timelinePropertyCacheValid = false;\n\n/*!\n * Empty out and rebuild the cache of internal KeyframeProperty data if it\n * has been marked as invalid.\n * @param {Actor}\n */\nconst ensurePropertyCacheValid = actor => {\n  if (actor._timelinePropertyCacheValid) {\n    return;\n  }\n\n  actor._timelinePropertyCache = [];\n  actor._timelineFunctionCache = [];\n\n  const { _timelinePropertyCache, _timelineFunctionCache } = actor;\n\n  // Build the cache map\n  const props = Object.values(actor._keyframeProperties)\n    .sort((a, b) => a.millisecond - b.millisecond);\n\n  let curCacheEntry = getLatestProperties(actor, 0);\n\n  curCacheEntry._millisecond = 0;\n  _timelinePropertyCache.push(curCacheEntry);\n\n  props.forEach(property => {\n    if (property.millisecond !== curCacheEntry._millisecond) {\n      curCacheEntry = _.clone(curCacheEntry);\n      curCacheEntry._millisecond = property.millisecond;\n      _timelinePropertyCache.push(curCacheEntry);\n    }\n\n    curCacheEntry[property.name] = property;\n\n    if (property.name === 'function') {\n      _timelineFunctionCache.push(property);\n    }\n  });\n\n  actor._timelinePropertyCacheValid = true;\n};\n\n/*!\n * Remove any property tracks that are empty.\n *\n * @param {Actor} actor\n */\nconst removeEmptyPropertyTracks = actor => {\n  const { _propertyTracks } = actor;\n\n  Object.keys(_propertyTracks).forEach(trackName => {\n    if (!_propertyTracks[trackName].length) {\n      delete _propertyTracks[trackName];\n      fire(actor, 'removeKeyframePropertyTrack', trackName);\n    }\n  });\n};\n\n/*!\n * Stably sort all of the property tracks of an actor\n * @param {Actor} actor\n */\nconst sortPropertyTracks = actor => {\n  _.each(actor._propertyTracks, (propertyTrack, trackName) => {\n    propertyTrack = _.sortBy(propertyTrack, 'millisecond');\n\n    propertyTrack.forEach((keyframeProperty, i) =>\n      keyframeProperty.linkToNext(propertyTrack[i + 1])\n    );\n\n    actor._propertyTracks[trackName] = propertyTrack;\n  });\n};\n\n/*!\n * Updates internal Rekapi and Actor data after a KeyframeProperty\n * modification method is called.\n *\n * @param {Actor} actor\n */\nconst cleanupAfterKeyframeModification = actor => {\n  sortPropertyTracks(actor);\n  invalidateCache(actor);\n\n  if (actor.rekapi) {\n    invalidateAnimationLength(actor.rekapi);\n  }\n\n  fire(actor, 'timelineModified');\n};\n\n/**\n * A {@link rekapi.Actor} represents an individual component of an animation.\n * An animation may have one or many {@link rekapi.Actor}s.\n *\n * @param {Object} [config={}]\n * @param {(Object|CanvasRenderingContext2D|HTMLElement)} [config.context] Sets\n * {@link rekapi.Actor#context}.\n * @param {Function} [config.setup] Sets {@link rekapi.Actor#setup}.\n * @param {rekapi.render} [config.render] Sets {@link rekapi.Actor#render}.\n * @param {Function} [config.teardown] Sets {@link rekapi.Actor#teardown}.\n * @constructs rekapi.Actor\n */\nexport class Actor extends Tweenable {\n  constructor (config = {}) {\n    super();\n\n    /**\n     * @member {rekapi.Rekapi|undefined} rekapi.Actor#rekapi The {@link\n     * rekapi.Rekapi} instance to which this {@link rekapi.Actor} belongs, if\n     * any.\n     */\n\n    Object.assign(this, {\n      _propertyTracks: {},\n      _timelinePropertyCache: [],\n      _timelineFunctionCache: [],\n      _timelinePropertyCacheValid: false,\n      _keyframeProperties: {},\n\n      /**\n       * @member {string} rekapi.Actor#id The unique ID of this {@link rekapi.Actor}.\n       */\n      id: _.uniqueId(),\n\n      /**\n        * @member {(Object|CanvasRenderingContext2D|HTMLElement|undefined)}\n        * [rekapi.Actor#context] If this {@link rekapi.Actor} was created by or\n        * provided as an argument to {@link rekapi.Rekapi#addActor}, then this\n        * member is a reference to that {@link rekapi.Rekapi}'s {@link\n        * rekapi.Rekapi#context}.\n        */\n      context: config.context,\n\n      /**\n       * @member {Function} rekapi.Actor#setup Gets called when an actor is\n       * added to an animation by {@link rekapi.Rekapi#addActor}.\n       */\n      setup: config.setup || noop,\n\n      /**\n       * @member {rekapi.render} rekapi.Actor#render The function that renders\n       * this {@link rekapi.Actor}.\n       */\n      render: config.render || noop,\n\n      /**\n       * @member {Function} rekapi.Actor#teardown Gets called when an actor is\n       * removed from an animation by {@link rekapi.Rekapi#removeActor}.\n       */\n      teardown: config.teardown || noop,\n\n      /**\n       * @member {boolean} rekapi.Actor#wasActive A flag that records whether\n       * this {@link rekapi.Actor} had any state in the previous updated cycle.\n       * Handy for immediate-mode renderers (such as {@link\n       * rekapi.CanvasRenderer}) to prevent unintended renders after the actor\n       * has no state. Also used to prevent redundant {@link\n       * rekapi.keyframeFunction} calls.\n       */\n      wasActive: true\n    });\n  }\n\n  /**\n   * Create a keyframe for the actor.  The animation timeline begins at `0`.\n   * The timeline's length will automatically \"grow\" to accommodate new\n   * keyframes as they are added.\n   *\n   * `state` should contain all of the properties that define this keyframe's\n   * state.  These properties can be any value that can be tweened by\n   * [Shifty](http://jeremyckahn.github.io/shifty/doc/) (numbers,\n   * RGB/hexadecimal color strings, and CSS property strings).  `state` can\n   * also be a [function]{@link rekapi.keyframeFunction}, but\n   * [this works differently]{@tutorial keyframes-in-depth}.\n   *\n   * __Note:__ Internally, this creates {@link rekapi.KeyframeProperty}s and\n   * places them on a \"track.\" Tracks are automatically named to match the\n   * relevant {@link rekapi.KeyframeProperty#name}s.  These {@link\n   * rekapi.KeyframeProperty}s are managed for you by the {@link rekapi.Actor}\n   * APIs.\n   *\n   * ## [Click to learn about keyframes in depth]{@tutorial keyframes-in-depth}\n   * @method rekapi.Actor#keyframe\n   * @param {number} millisecond Where on the timeline to set the keyframe.\n   * @param {(Object|rekapi.keyframeFunction)} state The state properties of\n   * the keyframe.  If this is an Object, the properties will be interpolated\n   * between this and those of the following keyframe for a given point on the\n   * animation timeline.  If this is a function ({@link\n   * rekapi.keyframeFunction}), it will be called at the keyframe specified by\n   * `millisecond`.\n   * @param {(string|Object)} [easing] Optional easing string or Object.  If\n   * `state` is a function, this is ignored.\n   * @return {rekapi.Actor}\n   */\n  keyframe (millisecond, state, easing = DEFAULT_EASING) {\n    if (state instanceof Function) {\n      state = { 'function': state };\n    }\n\n    const easingObject = composeEasingObject(state, easing);\n\n    _.each(state, (value, name) =>\n      this.addKeyframeProperty(\n        new KeyframeProperty(millisecond, name, value, easingObject[name])\n      )\n    );\n\n    if (this.rekapi) {\n      invalidateAnimationLength(this.rekapi);\n    }\n\n    invalidateCache(this);\n    fire(this, 'timelineModified');\n\n    return this;\n  }\n\n  /**\n   * @method rekapi.Actor#hasKeyframeAt\n   * @param {number} millisecond Point on the timeline to query.\n   * @param {rekapi.KeyframeProperty#name} [trackName] Optionally scope the\n   * lookup to a particular track.\n   * @return {boolean} Whether or not the actor has any {@link\n   * rekapi.KeyframeProperty}s set at `millisecond`.\n   */\n  hasKeyframeAt (millisecond, trackName = undefined) {\n    const { _propertyTracks } = this;\n\n    if (trackName && !_propertyTracks[trackName]) {\n      return false;\n    }\n\n    const propertyTracks = trackName ?\n      _.pick(_propertyTracks, trackName) :\n      _propertyTracks;\n\n    return Object.keys(propertyTracks).some(track =>\n      propertyTracks.hasOwnProperty(track) &&\n      !!this.getKeyframeProperty(track, millisecond)\n    );\n  }\n\n  /**\n   * Copies all of the {@link rekapi.KeyframeProperty}s from one point on the\n   * actor's timeline to another. This is particularly useful for animating an\n   * actor back to its original position.\n   *\n   *     actor\n   *       .keyframe(0, {\n   *         x: 10,\n   *         y: 15\n   *       }).keyframe(1000, {\n   *         x: 50,\n   *         y: 75\n   *       });\n   *\n   *     // Return the actor to its original position\n   *     actor.copyKeyframe(0, 2000);\n   *\n   * @method rekapi.Actor#copyKeyframe\n   * @param {number} copyFrom The timeline millisecond to copy {@link\n   * rekapi.KeyframeProperty}s from.\n   * @param {number} copyTo The timeline millisecond to copy {@link\n   * rekapi.KeyframeProperty}s to.\n   * @return {rekapi.Actor}\n   */\n  copyKeyframe (copyFrom, copyTo) {\n    // Build the configuation objects to be passed to Actor#keyframe\n    const sourcePositions = {};\n    const sourceEasings = {};\n\n    _.each(this._propertyTracks, (propertyTrack, trackName) => {\n      const keyframeProperty =\n        this.getKeyframeProperty(trackName, copyFrom);\n\n      if (keyframeProperty) {\n        sourcePositions[trackName] = keyframeProperty.value;\n        sourceEasings[trackName] = keyframeProperty.easing;\n      }\n    });\n\n    this.keyframe(copyTo, sourcePositions, sourceEasings);\n\n    return this;\n  }\n\n  /**\n   * Moves all of the {@link rekapi.KeyframeProperty}s from one point on the\n   * actor's timeline to another.  Although this method does error checking for\n   * you to make sure the operation can be safely performed, an effective\n   * pattern is to use {@link rekapi.Actor#hasKeyframeAt} to see if there is\n   * already a keyframe at the requested `to` destination.\n   *\n   * @method rekapi.Actor#moveKeyframe\n   * @param {number} from The millisecond of the keyframe to be moved.\n   * @param {number} to The millisecond of where the keyframe should be moved\n   * to.\n   * @return {boolean} Whether or not the keyframe was successfully moved.\n   */\n  moveKeyframe (from, to) {\n    if (!this.hasKeyframeAt(from) || this.hasKeyframeAt(to)) {\n      return false;\n    }\n\n    // Move each of the relevant KeyframeProperties to the new location in the\n    // timeline\n    _.each(this._propertyTracks, (propertyTrack, trackName) => {\n      const oldIndex = propertyIndexInTrack(propertyTrack, from);\n\n      if (oldIndex !== -1) {\n        propertyTrack[oldIndex].millisecond = to;\n      }\n    });\n\n    cleanupAfterKeyframeModification(this);\n\n    return true;\n  }\n\n  /**\n   * Augment the `value` or `easing` of the {@link rekapi.KeyframeProperty}s\n   * at a given millisecond.  Any {@link rekapi.KeyframeProperty}s omitted in\n   * `state` or `easing` are not modified.\n   *\n   *     actor.keyframe(0, {\n   *       'x': 10,\n   *       'y': 20\n   *     }).keyframe(1000, {\n   *       'x': 20,\n   *       'y': 40\n   *     }).keyframe(2000, {\n   *       'x': 30,\n   *       'y': 60\n   *     })\n   *\n   *     // Changes the state of the keyframe at millisecond 1000.\n   *     // Modifies the value of 'y' and the easing of 'x.'\n   *     actor.modifyKeyframe(1000, {\n   *       'y': 150\n   *     }, {\n   *       'x': 'easeFrom'\n   *     });\n   *\n   * @method rekapi.Actor#modifyKeyframe\n   * @param {number} millisecond\n   * @param {Object} state\n   * @param {Object} [easing={}]\n   * @return {rekapi.Actor}\n   */\n  modifyKeyframe (millisecond, state, easing = {}) {\n    _.each(this._propertyTracks, (propertyTrack, trackName) => {\n      const property = this.getKeyframeProperty(trackName, millisecond);\n\n      if (property) {\n        property.modifyWith({\n          value: state[trackName],\n          easing: easing[trackName]\n        });\n      } else if (state[trackName]) {\n        this.addKeyframeProperty(\n          new KeyframeProperty(\n            millisecond,\n            trackName,\n            state[trackName],\n            easing[trackName]\n          )\n        );\n      }\n    });\n\n    cleanupAfterKeyframeModification(this);\n\n    return this;\n  }\n\n  /**\n   * Remove all {@link rekapi.KeyframeProperty}s set\n   * on the actor at a given millisecond in the animation.\n   *\n   * @method rekapi.Actor#removeKeyframe\n   * @param {number} millisecond The location on the timeline of the keyframe\n   * to remove.\n   * @return {rekapi.Actor}\n   */\n  removeKeyframe (millisecond) {\n    _.each(this._propertyTracks, (propertyTrack, propertyName) => {\n      const index = propertyIndexInTrack(propertyTrack, millisecond);\n\n      if (index !== -1) {\n        const keyframeProperty = propertyTrack[index];\n        this._deleteKeyframePropertyAt(propertyTrack, index);\n        keyframeProperty.detach();\n      }\n    });\n\n    removeEmptyPropertyTracks(this);\n    cleanupAfterKeyframeModification(this);\n    fire(this, 'timelineModified');\n\n    return this;\n  }\n\n  /**\n   * Remove all {@link rekapi.KeyframeProperty}s set\n   * on the actor.\n   *\n   * **NOTE**: This method does _not_ fire the `beforeRemoveKeyframeProperty`\n   * or `removeKeyframePropertyComplete` events.  This method is a bulk\n   * operation that is more efficient than calling {@link\n   * rekapi.Actor#removeKeyframeProperty} many times individually, but\n   * foregoes firing events.\n   *\n   * @method rekapi.Actor#removeAllKeyframes\n   * @return {rekapi.Actor}\n   */\n  removeAllKeyframes () {\n    _.each(this._propertyTracks, propertyTrack =>\n      propertyTrack.length = 0\n    );\n\n    _.each(this._keyframeProperties, keyframeProperty =>\n      keyframeProperty.detach()\n    );\n\n    removeEmptyPropertyTracks(this);\n    this._keyframeProperties = {};\n\n    // Calling removeKeyframe performs some necessary post-removal cleanup, the\n    // earlier part of this method skipped all of that for the sake of\n    // efficiency.\n    return this.removeKeyframe(0);\n  }\n\n  /**\n   * @method rekapi.Actor#getKeyframeProperty\n   * @param {string} property The name of the property track.\n   * @param {number} millisecond The millisecond of the property in the\n   * timeline.\n   * @return {(rekapi.KeyframeProperty|undefined)} A {@link\n   * rekapi.KeyframeProperty} that is stored on the actor, as specified by the\n   * `property` and `millisecond` parameters. This is `undefined` if no\n   * properties were found.\n   */\n  getKeyframeProperty (property, millisecond) {\n    const propertyTrack = this._propertyTracks[property];\n\n    return propertyTrack[propertyIndexInTrack(propertyTrack, millisecond)];\n  }\n\n  /**\n   * Modify a {@link rekapi.KeyframeProperty} stored on an actor.\n   * Internally, this calls {@link rekapi.KeyframeProperty#modifyWith} and\n   * then performs some cleanup.\n   *\n   * @method rekapi.Actor#modifyKeyframeProperty\n   * @param {string} property The name of the {@link rekapi.KeyframeProperty}\n   * to modify.\n   * @param {number} millisecond The timeline millisecond of the {@link\n   * rekapi.KeyframeProperty} to modify.\n   * @param {Object} newProperties The properties to augment the {@link\n   * rekapi.KeyframeProperty} with.\n   * @return {rekapi.Actor}\n   */\n  modifyKeyframeProperty (property, millisecond, newProperties) {\n    const keyframeProperty = this.getKeyframeProperty(property, millisecond);\n\n    if (keyframeProperty) {\n      if ('millisecond' in newProperties &&\n          this.hasKeyframeAt(newProperties.millisecond, property)\n        ) {\n        throw new Error(\n          `Tried to move ${property} to ${newProperties.millisecond}ms, but a keyframe property already exists there`\n        );\n      }\n\n      keyframeProperty.modifyWith(newProperties);\n      cleanupAfterKeyframeModification(this);\n    }\n\n    return this;\n  }\n\n  /**\n   * Remove a single {@link rekapi.KeyframeProperty}\n   * from the actor.\n   * @method rekapi.Actor#removeKeyframeProperty\n   * @param {string} property The name of the {@link rekapi.KeyframeProperty}\n   * to remove.\n   * @param {number} millisecond Where in the timeline the {@link\n   * rekapi.KeyframeProperty} to remove is.\n   * @return {(rekapi.KeyframeProperty|undefined)} The removed\n   * KeyframeProperty, if one was found.\n   */\n  removeKeyframeProperty (property, millisecond) {\n    const { _propertyTracks } = this;\n\n    if (_propertyTracks[property]) {\n      const propertyTrack = _propertyTracks[property];\n      const index = propertyIndexInTrack(propertyTrack, millisecond);\n      const keyframeProperty = propertyTrack[index];\n\n      fireEvent(this.rekapi, 'beforeRemoveKeyframeProperty', keyframeProperty);\n      this._deleteKeyframePropertyAt(propertyTrack, index);\n      keyframeProperty.detach();\n\n      removeEmptyPropertyTracks(this);\n      cleanupAfterKeyframeModification(this);\n      fireEvent(this.rekapi, 'removeKeyframePropertyComplete', keyframeProperty);\n\n      return keyframeProperty;\n    }\n  }\n\n  /**\n   *\n   * @method rekapi.Actor#getTrackNames\n   * @return {Array.<rekapi.KeyframeProperty#name>} A list of all the track\n   * names for a {@link rekapi.Actor}.\n   */\n  getTrackNames () {\n    return Object.keys(this._propertyTracks);\n  }\n\n  /**\n   * Get all of the {@link rekapi.KeyframeProperty}s for a track.\n   * @method rekapi.Actor#getPropertiesInTrack\n   * @param {rekapi.KeyframeProperty#name} trackName The track name to query.\n   * @return {Array(rekapi.KeyframeProperty)}\n   */\n  getPropertiesInTrack (trackName) {\n    return (this._propertyTracks[trackName] || []).slice(0);\n  }\n\n  /**\n   * @method rekapi.Actor#getStart\n   * @param {rekapi.KeyframeProperty#name} [trackName] Optionally scope the\n   * lookup to a particular track.\n   * @return {number} The millisecond of the first animating state of a {@link\n   * rekapi.Actor} (for instance, if the first keyframe is later than\n   * millisecond `0`).  If there are no keyframes, this is `0`.\n   */\n  getStart (trackName = undefined) {\n    const { _propertyTracks } = this;\n    const starts = [];\n\n    // Null check to see if trackName was provided and is valid\n    if (_propertyTracks.hasOwnProperty(trackName)) {\n      const firstKeyframeProperty = _propertyTracks[trackName][0];\n\n      if (firstKeyframeProperty) {\n        starts.push(firstKeyframeProperty.millisecond);\n      }\n    } else {\n      // Loop over all property tracks and accumulate the first\n      // keyframeProperties from non-empty tracks\n      _.each(_propertyTracks, propertyTrack => {\n        if (propertyTrack.length) {\n          starts.push(propertyTrack[0].millisecond);\n        }\n      });\n    }\n\n    return starts.length > 0 ?\n      Math.min.apply(Math, starts) :\n      0;\n  }\n\n  /**\n   * @method rekapi.Actor#getEnd\n   * @param {rekapi.KeyframeProperty#name} [trackName] Optionally scope the\n   * lookup to a particular keyframe track.\n   * @return {number} The millisecond of the last state of an actor (the point\n   * in the timeline in which it is done animating).  If there are no\n   * keyframes, this is `0`.\n   */\n  getEnd (trackName = undefined) {\n    const endingTracks = [0];\n\n    const tracksToInspect = trackName ?\n      { [trackName]: this._propertyTracks[trackName] } :\n      this._propertyTracks;\n\n    _.each(tracksToInspect, propertyTrack => {\n      if (propertyTrack.length) {\n        endingTracks.push(propertyTrack[propertyTrack.length - 1].millisecond);\n      }\n    });\n\n    return Math.max.apply(Math, endingTracks);\n  }\n\n  /**\n   * @method rekapi.Actor#getLength\n   * @param {rekapi.KeyframeProperty#name} [trackName] Optionally scope the\n   * lookup to a particular track.\n   * @return {number} The length of time in milliseconds that the actor\n   * animates for.\n   */\n  getLength (trackName = undefined) {\n    return this.getEnd(trackName) - this.getStart(trackName);\n  }\n\n  /**\n   * Extend the last state on this actor's timeline to simulate a pause.\n   * Internally, this method copies the final state of the actor in the\n   * timeline to the millisecond defined by `until`.\n   *\n   * @method rekapi.Actor#wait\n   * @param {number} until At what point in the animation the Actor should wait\n   * until (relative to the start of the animation timeline).  If this number\n   * is less than the value returned from {@link rekapi.Actor#getLength},\n   * this method does nothing.\n   * @return {rekapi.Actor}\n   */\n  wait (until) {\n    const end = this.getEnd();\n\n    if (until <= end) {\n      return this;\n    }\n\n    const latestProps = getLatestProperties(this, this.getEnd());\n    const serializedProps = {};\n    const serializedEasings = {};\n\n    _.each(latestProps, (latestProp, propName) => {\n      serializedProps[propName] = latestProp.value;\n      serializedEasings[propName] = latestProp.easing;\n    });\n\n    this.modifyKeyframe(end, serializedProps, serializedEasings);\n    this.keyframe(until, serializedProps, serializedEasings);\n\n    return this;\n  }\n\n  /*!\n   * Insert a `KeyframeProperty` into a property track at `index`.  The linked\n   * list structure of the property track is maintained.\n   * @method rekapi.Actor#_insertKeyframePropertyAt\n   * @param {KeyframeProperty} keyframeProperty\n   * @param {Array(KeyframeProperty)} propertyTrack\n   * @param {number} index\n   */\n  _insertKeyframePropertyAt (keyframeProperty, propertyTrack, index) {\n    propertyTrack.splice(index, 0, keyframeProperty);\n  }\n\n  /*!\n   * Remove the `KeyframeProperty` at `index` from a property track.  The linked\n   * list structure of the property track is maintained.  The removed property\n   * is not modified or unlinked internally.\n   * @method rekapi.Actor#_deleteKeyframePropertyAt\n   * @param {Array(KeyframeProperty)} propertyTrack\n   * @param {number} index\n   */\n  _deleteKeyframePropertyAt (propertyTrack, index) {\n    propertyTrack.splice(index, 1);\n  }\n\n  /**\n   * Associate a {@link rekapi.KeyframeProperty} to this {@link rekapi.Actor}.\n   * Updates {@link rekapi.KeyframeProperty#actor} to maintain a link between\n   * the two objects.  This is a lower-level method and it is generally better\n   * to use {@link rekapi.Actor#keyframe}.  This is mostly useful for adding a\n   * {@link rekapi.KeyframeProperty} back to an actor after it was {@link\n   * rekapi.KeyframeProperty#detach}ed.\n   * @method rekapi.Actor#addKeyframeProperty\n   * @param {rekapi.KeyframeProperty} keyframeProperty\n   * @return {rekapi.Actor}\n   */\n  addKeyframeProperty (keyframeProperty) {\n    if (this.rekapi) {\n      fireEvent(this.rekapi, 'beforeAddKeyframeProperty', keyframeProperty);\n    }\n\n    keyframeProperty.actor = this;\n    this._keyframeProperties[keyframeProperty.id] = keyframeProperty;\n\n    const { name } = keyframeProperty;\n    const { _propertyTracks, rekapi } = this;\n\n    if (!this._propertyTracks[name]) {\n      _propertyTracks[name] = [keyframeProperty];\n\n      if (rekapi) {\n        fireEvent(rekapi, 'addKeyframePropertyTrack', keyframeProperty);\n      }\n    } else {\n      const index = insertionPointInTrack(_propertyTracks[name], keyframeProperty.millisecond);\n\n      if (_propertyTracks[name][index]) {\n        const newMillisecond = keyframeProperty.millisecond;\n        const targetMillisecond = _propertyTracks[name][index].millisecond;\n\n        if (targetMillisecond === newMillisecond) {\n          throw new Error(\n            `Cannot add duplicate ${name} keyframe property @ ${newMillisecond}ms`\n          );\n        } else if (rekapi && rekapi._warnOnOutOfOrderKeyframes) {\n          console.warn(\n            new Error(\n              `Added a keyframe property before end of ${name} track @ ${newMillisecond}ms (< ${targetMillisecond}ms)`\n            )\n          );\n        }\n      }\n\n      this._insertKeyframePropertyAt(keyframeProperty, _propertyTracks[name], index);\n      cleanupAfterKeyframeModification(this);\n    }\n\n    if (rekapi) {\n      fireEvent(rekapi, 'addKeyframeProperty', keyframeProperty);\n    }\n\n    return this;\n  }\n\n  /*!\n   * TODO: Explain the use case for this method\n   * Set the actor to be active or inactive starting at `millisecond`.\n   * @method rekapi.Actor#setActive\n   * @param {number} millisecond The time at which to change the actor's active state\n   * @param {boolean} isActive Whether the actor should be active or inactive\n   * @return {rekapi.Actor}\n   */\n  setActive (millisecond, isActive) {\n    const hasActiveTrack = !!this._propertyTracks._active;\n    const activeProperty = hasActiveTrack\n        && this.getKeyframeProperty('_active', millisecond);\n\n    if (activeProperty) {\n      activeProperty.value = isActive;\n    } else {\n      this.addKeyframeProperty(\n        new KeyframeProperty(millisecond, '_active', isActive)\n      );\n    }\n\n    return this;\n  }\n\n  /*!\n   * Calculate and set the actor's position at `millisecond` in the animation.\n   * @method rekapi.Actor#_updateState\n   * @param {number} millisecond\n   * @param {boolean} [resetLaterFnKeyframes] If true, allow all function\n   * keyframes later in the timeline to be run again.\n   */\n  _updateState (millisecond, resetLaterFnKeyframes = false) {\n    const start = this.getStart();\n    const end = this.getEnd();\n    const interpolatedObject = {};\n\n    millisecond = Math.min(end, millisecond);\n\n    ensurePropertyCacheValid(this);\n\n    const propertyCacheEntry =\n      _.omit(\n        getPropertyCacheEntryForMillisecond(this, millisecond),\n        '_millisecond'\n      );\n\n    // All actors are active at time 0 unless otherwise specified;\n    // make sure a future time deactivation doesn't deactive the actor\n    // by default.\n    if (propertyCacheEntry._active\n        && millisecond >= propertyCacheEntry._active.millisecond) {\n\n      this.wasActive = propertyCacheEntry._active.getValueAt(millisecond);\n\n      if (!this.wasActive) {\n        return this;\n      }\n    } else {\n      this.wasActive = true;\n    }\n\n    if (start === end) {\n      // If there is only one keyframe, use that for the state of the actor\n      _.each(propertyCacheEntry, (keyframeProperty, propName) => {\n        if (keyframeProperty.shouldInvokeForMillisecond(millisecond)) {\n          keyframeProperty.invoke();\n          keyframeProperty.hasFired = false;\n          return;\n        }\n\n        interpolatedObject[propName] = keyframeProperty.value;\n      });\n\n    } else {\n      _.each(propertyCacheEntry, (keyframeProperty, propName) => {\n        if (this._beforeKeyframePropertyInterpolate !== noop) {\n          this._beforeKeyframePropertyInterpolate(keyframeProperty);\n        }\n\n        if (keyframeProperty.shouldInvokeForMillisecond(millisecond)) {\n          keyframeProperty.invoke();\n          return;\n        }\n\n        interpolatedObject[propName] =\n          keyframeProperty.getValueAt(millisecond);\n\n        if (this._afterKeyframePropertyInterpolate !== noop) {\n          this._afterKeyframePropertyInterpolate(\n            keyframeProperty, interpolatedObject);\n        }\n      });\n    }\n\n    this.set(interpolatedObject);\n\n    if (!resetLaterFnKeyframes) {\n      this._resetFnKeyframesFromMillisecond(millisecond);\n    }\n\n    return this;\n  }\n\n  /*!\n   * @method rekapi.Actor#_resetFnKeyframesFromMillisecond\n   * @param {number} millisecond\n   */\n  _resetFnKeyframesFromMillisecond (millisecond) {\n    const cache = this._timelineFunctionCache;\n    const { length } = cache;\n    let index = _.sortedIndex(cache, { millisecond: millisecond }, getMillisecond);\n\n    while (index < length) {\n      cache[index++].hasFired = false;\n    }\n  }\n\n  /**\n   * Export this {@link rekapi.Actor} to a `JSON.stringify`-friendly `Object`.\n   * @method rekapi.Actor#exportTimeline\n   * @return {Object} This data can later be consumed by {@link\n   * rekapi.Actor#importTimeline}.\n   */\n  exportTimeline () {\n    const exportData = {\n      start: this.getStart(),\n      end: this.getEnd(),\n      trackNames: this.getTrackNames(),\n      propertyTracks: {}\n    };\n\n    _.each(this._propertyTracks, (propertyTrack, trackName) => {\n      const track = [];\n\n      _.each(propertyTrack, keyframeProperty => {\n        track.push(keyframeProperty.exportPropertyData());\n      });\n\n      exportData.propertyTracks[trackName] = track;\n    });\n\n    return exportData;\n  }\n\n  /**\n   * Import an Object to augment this actor's state.  This does not remove\n   * keyframe properties before importing new ones.\n   *\n   * @method rekapi.Actor#importTimeline\n   * @param {Object} actorData Any object that has the same data format as the\n   * object generated from {@link rekapi.Actor#exportTimeline}.\n   */\n  importTimeline (actorData) {\n    _.each(actorData.propertyTracks, propertyTrack => {\n      _.each(propertyTrack, property => {\n        this.keyframe(\n          property.millisecond,\n          { [property.name]: property.value },\n          property.easing\n        );\n      });\n    });\n  }\n}\n\nObject.assign(Actor.prototype, {\n  /*!\n   * @method rekapi.Actor#_beforeKeyframePropertyInterpolate\n   * @param {KeyframeProperty} keyframeProperty\n   * @abstract\n   */\n  _beforeKeyframePropertyInterpolate: noop,\n\n  /*!\n   * @method rekapi.Actor#_afterKeyframePropertyInterpolate\n   * @param {KeyframeProperty} keyframeProperty\n   * @param {Object} interpolatedObject\n   * @abstract\n   */\n  _afterKeyframePropertyInterpolate: noop\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/actor.js","import _ from 'lodash';\nimport { interpolate } from 'shifty';\nimport {\n  fireEvent\n} from './rekapi';\n\nconst DEFAULT_EASING = 'linear';\n\n/**\n * Represents an individual component of an {@link rekapi.Actor}'s keyframe\n * state.  In most cases you won't need to deal with this object directly, as\n * the {@link rekapi.Actor} APIs abstract a lot of what this Object does away\n * for you.\n * @param {number} millisecond Sets {@link\n * rekapi.KeyframeProperty#millisecond}.\n * @param {string} name Sets {@link rekapi.KeyframeProperty#name}.\n * @param {(number|string|boolean|rekapi.keyframeFunction)} value Sets {@link\n * rekapi.KeyframeProperty#value}.\n * @param {string} [easing=\"linear\"] Sets {@link\n * rekapi.KeyframeProperty#easing}.\n * @constructs rekapi.KeyframeProperty\n */\nexport class KeyframeProperty {\n  constructor (millisecond, name, value, easing = DEFAULT_EASING) {\n    /**\n     * @member {string} rekapi.KeyframeProperty#id The unique ID of this {@link\n     * rekapi.KeyframeProperty}.\n     */\n    this.id = _.uniqueId('keyframeProperty_');\n\n    /**\n     * @member {boolean} rekapi.KeyframeProperty#hasFired Flag to determine if\n     * this {@link rekapi.KeyframeProperty}'s {@link rekapi.keyframeFunction}\n     * should be invoked in the current animation loop.\n     */\n    this.hasFired = null;\n\n    /**\n     * @member {(rekapi.Actor|undefined)} rekapi.KeyframeProperty#actor The\n     * {@link rekapi.Actor} to which this {@link rekapi.KeyframeProperty}\n     * belongs, if any.\n     */\n\n    /**\n     * @member {(rekapi.KeyframeProperty|null)}\n     * rekapi.KeyframeProperty#nextProperty A reference to the {@link\n      * rekapi.KeyframeProperty} that follows this one in a {@link\n      * rekapi.Actor}'s property track.\n     */\n    this.nextProperty = null;\n\n    Object.assign(this, {\n      /**\n       * @member {number} rekapi.KeyframeProperty#millisecond Where on the\n       * animation timeline this {@link rekapi.KeyframeProperty} is.\n       */\n      millisecond,\n      /**\n       * @member {string} rekapi.KeyframeProperty#name This {@link\n       * rekapi.KeyframeProperty}'s name, such as `\"x\"` or `\"opacity\"`.\n       */\n      name,\n      /**\n       * @member {number|string|boolean|rekapi.keyframeFunction}\n       * rekapi.KeyframeProperty#value The value that this {@link\n       * rekapi.KeyframeProperty} represents.\n       */\n      value,\n      /**\n       * @member {string} rekapi.KeyframeProperty#easing The easing curve by\n       * which this {@link rekapi.KeyframeProperty} should be animated.\n       */\n      easing\n    });\n  }\n\n  /**\n   * Modify this {@link rekapi.KeyframeProperty}.\n   * @method rekapi.KeyframeProperty#modifyWith\n   * @param {Object} newProperties Valid values are:\n   * @param {number} [newProperties.millisecond] Sets {@link\n   * rekapi.KeyframeProperty#millisecond}.\n   * @param {string} [newProperties.name] Sets {@link rekapi.KeyframeProperty#name}.\n   * @param {(number|string|boolean|rekapi.keyframeFunction)} [newProperties.value] Sets {@link\n   * rekapi.KeyframeProperty#value}.\n   * @param {string} [newProperties.easing] Sets {@link\n   * rekapi.KeyframeProperty#easing}.\n   */\n  modifyWith (newProperties) {\n    Object.assign(this, newProperties);\n  }\n\n  /**\n   * Calculate the midpoint between this {@link rekapi.KeyframeProperty} and\n   * the next {@link rekapi.KeyframeProperty} in a {@link rekapi.Actor}'s\n   * property track.\n   *\n   * In just about all cases, `millisecond` should be between this {@link\n   * rekapi.KeyframeProperty}'s `millisecond` and the `millisecond` of the\n   * {@link rekapi.KeyframeProperty} that follows it in the animation\n   * timeline, but it is valid to specify a value outside of this range.\n   * @method rekapi.KeyframeProperty#getValueAt\n   * @param {number} millisecond The millisecond in the animation timeline to\n   * compute the state value for.\n   * @return {(number|string|boolean|rekapi.keyframeFunction|rekapi.KeyframeProperty#value)}\n   */\n  getValueAt (millisecond) {\n    const nextProperty = this.nextProperty;\n\n    if (typeof this.value === 'boolean') {\n      return this.value;\n    } else if (nextProperty) {\n      const boundedMillisecond = Math.min(\n        Math.max(millisecond, this.millisecond),\n        nextProperty.millisecond\n      );\n\n      const { name } = this;\n      const delta = nextProperty.millisecond - this.millisecond;\n      const interpolatePosition =\n        (boundedMillisecond - this.millisecond) / delta;\n\n      return interpolate(\n        { [name]: this.value },\n        { [name]: nextProperty.value },\n        interpolatePosition,\n        nextProperty.easing\n      )[name];\n    } else {\n      return this.value;\n    }\n  }\n\n  /**\n   * Create the reference to the {@link rekapi.KeyframeProperty} that follows\n   * this one on a {@link rekapi.Actor}'s property track.  Property tracks\n   * are just linked lists of {@link rekapi.KeyframeProperty}s.\n   * @method rekapi.KeyframeProperty#linkToNext\n   * @param {KeyframeProperty=} nextProperty The {@link\n   * rekapi.KeyframeProperty} that should immediately follow this one on the\n   * animation timeline.\n   */\n  linkToNext (nextProperty = null) {\n    this.nextProperty = nextProperty;\n  }\n\n  /**\n   * Disassociates this {@link rekapi.KeyframeProperty} from its {@link\n   * rekapi.Actor}.  This is called by various {@link rekapi.Actor} methods\n   * and triggers the [removeKeyframeProperty]{@link rekapi.Rekapi#on} event\n   * on the associated {@link rekapi.Rekapi} instance.\n   * @method rekapi.KeyframeProperty#detach\n   */\n  detach () {\n    const { actor } = this;\n\n    if (actor && actor.rekapi) {\n      fireEvent(actor.rekapi, 'removeKeyframeProperty', this);\n      delete actor._keyframeProperties[this.id];\n      this.actor = null;\n    }\n\n    return this;\n  }\n\n  /**\n   * Export this {@link rekapi.KeyframeProperty} to a `JSON.stringify`-friendly\n   * `Object`.\n   * @method rekapi.KeyframeProperty#exportPropertyData\n   * @return {Object}\n   */\n  exportPropertyData () {\n    return _.pick(this, ['millisecond', 'name', 'value', 'easing']);\n  }\n\n  /*!\n   * Whether or not this is a function keyframe and should be invoked for the\n   * current frame.  Helper method for Actor.\n   * @method rekapi.KeyframeProperty#shouldInvokeForMillisecond\n   * @return {boolean}\n   */\n  shouldInvokeForMillisecond (millisecond) {\n    return (millisecond >= this.millisecond &&\n      this.name === 'function' &&\n      !this.hasFired\n    );\n  }\n\n  /**\n   * Calls {@link rekapi.KeyframeProperty#value} if it is a {@link\n   * rekapi.keyframeFunction}.\n   * @method rekapi.KeyframeProperty#invoke\n   * @return {any} Whatever value is returned for this {@link\n   * rekapi.KeyframeProperty}'s {@link rekapi.keyframeFunction}.\n   */\n  invoke () {\n    const drift = this.actor.rekapi._loopPosition - this.millisecond;\n    const returnValue = this.value(this.actor, drift);\n    this.hasFired = true;\n\n    return returnValue;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/keyframe-property.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 7\n// module chunks = 0","import _ from 'lodash';\nimport Rekapi, {\n  rendererBootstrappers\n} from '../rekapi';\n\n// PRIVATE UTILITY FUNCTIONS\n//\n\n/*!\n * Gets (and optionally sets) height or width on a canvas.\n * @param {HTMLCanvas} canvas\n * @param {string} heightOrWidth The dimension (either \"height\" or \"width\")\n * to get or set.\n * @param {number=} newSize The new value to set for `dimension`.\n * @return {number}\n */\nconst dimension = (canvas, heightOrWidth, newSize = undefined) => {\n  if (newSize !== undefined) {\n    canvas[heightOrWidth] = newSize;\n    canvas.style[heightOrWidth] = `${newSize}px`;\n  }\n\n  return canvas[heightOrWidth];\n};\n\n// CANVAS RENDERER OBJECT\n//\n\n/**\n * You can use Rekapi to render animations to an HTML5 `<canvas>`.  To do so,\n * just provide a\n * [`CanvasRenderingContext2D`](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D)\n * instance to the {@link rekapi.Rekapi} constructor to\n * automatically set up the renderer:\n *\n *     const rekapi = new Rekapi(document.createElement('canvas').getContext('2d'));\n *\n *  To use this renderer's API, get a reference to the initialized object:\n *\n *     const canvasRenderer = rekapi.getRendererInstance(CanvasRenderer);\n *\n * __Note__: {@link rekapi.CanvasRenderer} is added to {@link\n * rekapi.Rekapi#renderers} automatically, there is no reason to call the\n * constructor yourself in most cases.\n * @param {rekapi.Rekapi} rekapi The {@link rekapi.Rekapi} instance to render for.\n * @param {CanvasRenderingContext2D=} context See [the canvas\n * docs](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D).\n * @constructor rekapi.CanvasRenderer\n * @extends {rekapi.renderer}\n */\nexport class CanvasRenderer {\n\n  constructor (rekapi, context = undefined) {\n    Object.assign(this, {\n      rekapi,\n      canvasContext: context || rekapi.context\n    });\n\n    rekapi.on('beforeUpdate', () => this.clear());\n  }\n\n  /**\n   * Get and optionally set the height of the associated `<canvas>` element.\n   * @method rekapi.CanvasRenderer#height\n   * @param {number} [height] The height to optionally set.\n   * @return {number}\n   */\n  height (height = undefined) {\n    return dimension(this.canvasContext.canvas, 'height', height);\n  }\n\n  /**\n   * Get and optionally set the width of the associated `<canvas>` element.\n   * @method rekapi.CanvasRenderer#width\n   * @param {number} [width] The width to optionally set.\n   * @return {number}\n   */\n  width (width = undefined) {\n    return dimension(this.canvasContext.canvas, 'width', width);\n  }\n\n  /**\n   * Erase the `<canvas>`.\n   * @method rekapi.CanvasRenderer#clear\n   * @return {rekapi.CanvasRenderer}\n   */\n  clear () {\n    this.canvasContext.clearRect(0, 0, this.width(), this.height());\n\n    return this;\n  }\n}\n\n/*!\n * Sets up an instance of CanvasRenderer and attaches it to a `Rekapi`\n * instance.  Also augments the Rekapi instance with canvas-specific\n * functions.\n * @param {Rekapi} rekapi\n */\nrendererBootstrappers.push(rekapi => {\n  if (typeof CanvasRenderingContext2D === 'undefined' ||\n    !(rekapi.context instanceof CanvasRenderingContext2D)) {\n\n    return;\n  }\n\n  return new CanvasRenderer(rekapi);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderers/canvas.js","import _ from 'lodash';\nimport { Tweenable } from 'shifty';\nimport Rekapi, {\n  rendererBootstrappers,\n  fireEvent\n} from '../rekapi';\n\nconst { now } = Tweenable;\n\nconst vendorTransforms = [\n  'transform',\n  'webkitTransform',\n  'MozTransform',\n  'oTransform',\n  'msTransform'\n];\n\nexport const transformFunctions = [\n  'translateX',\n  'translateY',\n  'translateZ',\n  'scale',\n  'scaleX',\n  'scaleY',\n  'perspective',\n  'rotate',\n  'rotateX',\n  'rotateY',\n  'rotateZ',\n  'skewX',\n  'skewY'\n];\n\nconst DEFAULT_FPS = 30;\nexport const TRANSFORM_TOKEN = 'TRANSFORM';\nexport const VENDOR_TOKEN = 'VENDOR';\nconst R_TRANSFORM_TOKEN = new RegExp(TRANSFORM_TOKEN, 'g');\nconst R_VENDOR_TOKEN = new RegExp(VENDOR_TOKEN, 'g');\nconst VENDOR_PREFIXES = {\n  microsoft: '-ms-',\n  mozilla: '-moz-',\n  opera: '-o-',\n  w3: '',\n  webkit: '-webkit-'\n};\nconst BEZIERS = {\n  linear: '.25,.25,.75,.75',\n  easeInQuad: '.55,.085,.68,.53',\n  easeInCubic: '.55,.055,.675,.19',\n  easeInQuart: '.895,.03,.685,.22',\n  easeInQuint: '.755,.05,.855,.06',\n  easeInSine: '.47,0,.745,.715',\n  easeInExpo: '.95,.05,.795,.035',\n  easeInCirc: '.6,.04,.98, .335',\n  easeOutQuad: '.25,.46,.45,.94',\n  easeOutCubic: '.215,.61,.355,1',\n  easeOutQuart: '.165,.84,.44,1',\n  easeOutQuint: '.23,1,.32,1',\n  easeOutSine: '.39,.575,.565,1',\n  easeOutExpo: '.19,1,.22,1',\n  easeOutCirc: '.075,.82,.165,1',\n  easeInOutQuad: '.455,.03,.515,.955',\n  easeInOutCubic: '.645,.045,.355,1',\n  easeInOutQuart: '.77,0,.175,1',\n  easeInOutQuint: '.86,0.07,1',\n  easeInOutSine: '.445,.05,.55,.95',\n  easeInOutExpo: '1,0,0,1',\n  easeInOutCirc: '.785,.135,.15,.86'\n};\n\n// The timer to remove an injected style isn't likely to match the actual\n// length of the CSS animation, so give it some extra time to complete so it\n// doesn't cut off the end.\nconst INJECTED_STYLE_REMOVAL_BUFFER_MS = 250;\n\nconst R_3D_RULE = /3d\\(/g;\nconst _3D_RULE = '3d(';\nconst _3D_TOKEN = '__THREED__';\n\n// PRIVATE UTILITY FUNCTIONS\n//\n\n/*!\n * http://stackoverflow.com/a/3886106\n *\n * @param {number} number\n */\nconst isInt = number => number % 1 === 0;\n\n/*!\n * @return {string}\n */\nconst vendorPrefix = (() => {\n  const { style } = document.body;\n\n  return (\n    '-webkit-animation' in style ? 'webkit'    :\n    '-moz-animation'    in style ? 'mozilla'   :\n    '-ms-animation'     in style ? 'microsoft' :\n    '-o-animation'      in style ? 'opera'     :\n    'animation'         in style ? 'w3'        :\n    ''\n  );\n})();\n\n/*!\n * @param {Actor} actor\n * @return {string} The default CSS class that is targeted by {@link\n * rekapi.DOMRenderer#getCss} if a custom class is not specified.  This may be\n * useful for getting a standard and consistent CSS class name for an actor's\n * DOM element.\n */\nconst getActorClassName = actor => `actor-${actor.id}`;\n\n/*!\n * Fixes a really bizarre issue that only seems to affect Presto and Blink.\n * In some situations, DOM nodes will not detect dynamically injected <style>\n * elements.  Explicitly re-inserting DOM nodes seems to fix the issue.  Not\n * sure what causes this issue.  Not sure why this fixes it.\n *\n * @param {Rekapi} rekapi\n */\nconst forceStyleReset = rekapi => {\n  const dummyDiv = document.createElement('div');\n\n  _.each(rekapi.getAllActors(), actor => {\n    if (actor.context.nodeType === 1) {\n      const { context } = actor;\n      const { parentElement } = context;\n\n      parentElement.replaceChild(dummyDiv, context);\n      parentElement.replaceChild(context, dummyDiv);\n    }\n  });\n};\n\nlet styleID = 0;\n/*!\n * @param {Rekapi} rekapi\n * @param {string} css The css content that the <style> element should have.\n * @return {HTMLStyleElement} The unique ID of the injected <style> element.\n */\nconst injectStyle = (rekapi, css) => {\n  const style = document.createElement('style');\n  const id = `rekapi-${styleID++}`;\n  style.id = id;\n  style.innerHTML = css;\n  document.head.appendChild(style);\n  forceStyleReset(rekapi);\n\n  return style;\n};\n\n/*!\n * @param {HTMLElement} element\n * @param {string} styleName\n * @param {string|number} styleValue\n */\nconst setStyle = (element, styleName, styleValue) =>\n  element.style[styleName] = styleValue;\n\n/*!\n * @param {string} name A transform function name\n * @return {boolean}\n */\nconst isTransformFunction = name => _.contains(transformFunctions, name);\n\n/*!\n * Builds a concatenated string of given transform property values in order.\n *\n * @param {Array.<string>} orderedTransforms Array of ordered transform\n *     function names\n * @param {Object} transformProperties Transform properties to build together\n * @return {string}\n */\nconst buildTransformValue = (orderedTransforms, transformProperties) => {\n  const transformComponents = [];\n\n  _.each(orderedTransforms, functionName => {\n    if (transformProperties[functionName] !== undefined) {\n      transformComponents.push(\n        `${functionName}(${transformProperties[functionName]})`\n      );\n    }\n  });\n\n  return transformComponents.join(' ');\n};\n\n/*!\n * Sets value for all vendor prefixed transform properties on an element\n *\n * @param {HTMLElement} element The actor's DOM element\n * @param {string} transformValue The transform style value\n */\nconst setTransformStyles = (element, transformValue) =>\n  vendorTransforms.forEach(prefixedTransform =>\n    setStyle(element, prefixedTransform, transformValue)\n  );\n\n/*!\n * @param {Actor} actor\n * @param {HTMLElement} element\n * @param {Object} state\n */\nconst actorRender = (actor, element, state) => {\n  const propertyNames = Object.keys(state);\n  // TODO:  Optimize the following code so that propertyNames is not looped\n  // over twice.\n  const transformFunctionNames = propertyNames.filter(isTransformFunction);\n  const otherProperties = _.pick(\n    state,\n    _.reject(propertyNames, isTransformFunction)\n  );\n\n  if (transformFunctionNames.length) {\n    setTransformStyles(element,\n      buildTransformValue(\n        actor._transformOrder,\n        _.pick(state, transformFunctionNames)\n      )\n    );\n  } else if (state.transform) {\n    setTransformStyles(element, state.transform);\n  }\n\n  _.each(otherProperties, (styleValue, styleName) =>\n    setStyle(element, styleName, styleValue)\n  );\n};\n\n/*!\n * @param {Actor} actor\n */\nconst actorTeardown = actor => {\n  const { context } = actor;\n  const classList = context.className.match(/\\S+/g);\n  const sanitizedClassList =\n    _.without(classList, getActorClassName(actor));\n  context.className = sanitizedClassList.join(' ');\n};\n\n/*!\n * transform properties like translate3d and rotate3d break the cardinality\n * of multi-ease easing strings, because the \"3\" gets treated like a\n * tweenable value.  Transform \"3d(\" to \"__THREED__\" to prevent this, and\n * transform it back in _afterKeyframePropertyInterpolate.\n *\n * @param {KeyframeProperty} keyframeProperty\n */\nconst _beforeKeyframePropertyInterpolate = keyframeProperty => {\n  if (keyframeProperty.name !== 'transform') {\n    return;\n  }\n\n  const { value, nextProperty } = keyframeProperty;\n\n  if (nextProperty && value.match(R_3D_RULE)) {\n    keyframeProperty.value = value.replace(R_3D_RULE, _3D_TOKEN);\n    nextProperty.value = nextProperty.value.replace(R_3D_RULE, _3D_TOKEN);\n  }\n};\n\n/*!\n * @param {KeyframeProperty} keyframeProperty\n * @param {Object} interpolatedObject\n */\nconst _afterKeyframePropertyInterpolate = (keyframeProperty, interpolatedObject) => {\n  if (keyframeProperty.name !== 'transform') {\n    return;\n  }\n\n  const { value, nextProperty, name } = keyframeProperty;\n\n  if (nextProperty && value.match(_3D_TOKEN)) {\n    keyframeProperty.value = value.replace(_3D_TOKEN, _3D_RULE);\n    nextProperty.value = nextProperty.value.replace(_3D_TOKEN, _3D_RULE);\n    interpolatedObject[name] =\n      interpolatedObject[name].replace(_3D_TOKEN, _3D_RULE);\n  }\n};\n\n/*!\n * @param {Rekapi} rekapi\n * @param {Actor} actor\n */\nconst onAddActor = (rekapi, actor) => {\n  const { context } = actor;\n\n  if (context.nodeType !== 1) {\n    return;\n  }\n\n  const className = getActorClassName(actor);\n\n  // Add the class if it's not already there.\n  // Using className instead of classList to make IE happy.\n  if (!context.className.match(className)) {\n    context.className += ` ${className}`;\n  }\n\n  Object.assign(actor, {\n    render: actorRender.bind(actor, actor),\n    teardown: actorTeardown.bind(actor, actor),\n    _transformOrder: transformFunctions.slice(0),\n    _beforeKeyframePropertyInterpolate,\n    _afterKeyframePropertyInterpolate\n  });\n};\n\n/*!\n * @param {string} keyframes\n * @param {vendor} vendor\n * @return {string}\n */\nexport const applyVendorPropertyPrefixes = (keyframes, vendor) =>\n  keyframes\n    .replace(\n      R_VENDOR_TOKEN,\n      VENDOR_PREFIXES[vendor]\n    )\n    .replace(\n      R_TRANSFORM_TOKEN,\n      `${VENDOR_PREFIXES[vendor]}transform`\n    );\n\n/*!\n * @param {string} toKeyframes Generated keyframes to wrap in boilerplates\n * @param {string} animName\n * @param {Array.<string>=} vendors Vendor boilerplates to be applied.\n *     Should be any of the values in Rekapi.util.VENDOR_PREFIXES.\n * @return {string}\n */\nexport const applyVendorBoilerplates = (toKeyframes, animName, vendors = ['w3']) =>\n  vendors.map(vendor =>\n    applyVendorPropertyPrefixes(\n      `@${VENDOR_PREFIXES[vendor]}keyframes ${animName}-keyframes {\n${''  }${toKeyframes}\n${''  }}`,\n      vendor)\n  ).join('\\n');\n\n/*!\n * @param {KeyframeProperty} property\n * @param {number} fromPercent\n * @param {number} toPercent\n * @return {string}\n */\nexport const generateOptimizedKeyframeSegment = (\n  property,\n  fromPercent,\n  toPercent\n) => {\n  const name = property.name === 'transform' ?\n    TRANSFORM_TOKEN :\n    property.name;\n\n  const { nextProperty, value } = property;\n  const from = isInt(fromPercent) ? fromPercent : fromPercent.toFixed(2);\n  const to = isInt(toPercent) ? toPercent : toPercent.toFixed(2);\n  const bezier = BEZIERS[nextProperty.easing.split(' ')[0]];\n\n  return (\n `  ${from}% {${name}:${value};${''\n  }${VENDOR_TOKEN}animation-timing-function: cubic-bezier(${bezier});${''\n  }}\n  ${to}% {${name}:${nextProperty.value};}`\n  );\n};\n\n/*!\n * @param {Object} propsToSerialize\n * @param {Array.<string>} transformNames\n * @return {Object}\n */\nexport const combineTranfromProperties = (propsToSerialize, transformNames) => {\n  if (_.isEmpty(\n    _.pick.apply(_, [propsToSerialize].concat(transformFunctions))\n    )\n  ) {\n    return propsToSerialize;\n  } else {\n    const serializedProps = _.clone(propsToSerialize);\n\n    serializedProps[TRANSFORM_TOKEN] = transformNames.reduce(\n      (combinedProperties, transformFunction) => {\n      if (_.has(serializedProps, transformFunction)) {\n        combinedProperties +=\n          ` ${transformFunction}(${serializedProps[transformFunction]})`;\n\n        delete serializedProps[transformFunction];\n      }\n\n      return combinedProperties;\n    }, '').slice(1);\n\n    return serializedProps;\n  }\n};\n\n/*!\n * @param {Actor} actor\n * @param {string=} targetProp\n * @return {string}\n */\nexport const serializeActorStep = (actor, targetProp = undefined) =>\n  _.reduce(\n    combineTranfromProperties(\n      targetProp ? { [targetProp]: actor.get()[targetProp] } : actor.get(),\n      actor._transformOrder\n    ),\n    (serializedProps, val, key) =>\n      `${serializedProps}${key === 'transform' ? TRANSFORM_TOKEN : key}:${val};`,\n    '{') + '}';\n\n/*!\n * @param {Actor} actor\n * @param {number} increments\n * @param {number} incrementSize\n * @param {number} actorStart\n * @param {number} fromPercent\n * @param {KeyframeProperty=} fromProp\n * @return {Array.<string>}\n */\nexport const generateActorTrackSegment = (\n  actor,\n  increments,\n  incrementSize,\n  actorStart,\n  fromPercent,\n  fromProp = undefined\n) => {\n\n  const accumulator = [];\n  const length = actor.getLength();\n\n  for (let i = 0; i < increments; i++) {\n    const percent = fromPercent + (i * incrementSize);\n\n    actor._updateState(\n      ((percent / 100) * length) + actorStart,\n      true\n    );\n\n    const step = serializeActorStep(actor, fromProp && fromProp.name);\n\n    accumulator.push(`  ${+percent.toFixed(2)}% ${step}`);\n  }\n\n  return accumulator;\n};\n\n/*!\n * @param {Actor} actor\n * @param {number} steps\n * @return {string}\n */\nconst generateCombinedActorKeyframes = (actor, steps) =>\n  generateActorTrackSegment(actor, steps + 1, 100 / steps, 0, 0).join('\\n');\n\n/*!\n * @param {Actor} actor\n * @param {string} track\n * @param {number} actorStart\n * @return {string|undefined}\n */\nexport const simulateLeadingWait = (actor, track, actorStart) => {\n  const firstProp = actor._propertyTracks[track][0];\n\n  if (firstProp !== undefined && firstProp.millisecond !== actorStart) {\n    return generateActorTrackSegment(\n      actor,\n      1,\n      1,\n      firstProp.millisecond,\n      0,\n      firstProp\n    ).join('\\n');\n  }\n};\n\n/*!\n * @param {Actor} actor\n * @param {string} track\n * @param {number} actorStart\n * @param {number} actorEnd\n * @return {string|undefined}\n */\nexport const simulateTrailingWait = (actor, track, actorStart, actorEnd) => {\n  const lastProp = _.last(actor._propertyTracks[track]);\n\n  if (lastProp !== undefined && lastProp.millisecond !== actorEnd) {\n    return generateActorTrackSegment(\n      actor,\n      1,\n      1,\n      actorStart,\n      100,\n      lastProp\n    ).join('\\n');\n  }\n};\n\n/*!\n * @param {KeyframeProperty} property\n * @param {number} actorStart\n * @param {number} actorLength\n * @return {number}\n */\nconst calculateStepPercent = (property, actorStart, actorLength) =>\n  ((property.millisecond - actorStart) / actorLength) * 100;\n\n/*!\n * @param {Actor} actor\n * @param {number} actorStart\n * @param {KeyframeProperty} fromProp\n * @param {KeyframeProperty} toProp\n * @param {number} fromPercent\n * @param {number} toPercent\n * @return {Array.<string>}\n */\nconst generateActorTrackWaitSegment = (\n  actor,\n  actorStart,\n  fromProp,\n  toProp,\n  fromPercent,\n  toPercent\n) =>\n  generateActorTrackSegment(\n    actor,\n    1,\n    toPercent - fromPercent,\n    actorStart,\n    fromPercent,\n    fromProp\n  );\n\n/*!\n * @param {KeyframeProperty} property\n * @param {KeyframeProperty} nextProperty\n * @return {boolean}\n */\nconst isSegmentAWait = (property, nextProperty) =>\n  property.name === nextProperty.name &&\n    property.value === nextProperty.value;\n\n/*!\n * @param {KeyframeProperty} property\n * @return {boolean}\n */\nexport const canOptimizeKeyframeProperty = property =>\n  !property.nextProperty ?\n    false :\n    isSegmentAWait(property, property.nextProperty) ?\n      true :\n      property.nextProperty.easing.split(' ').every((easing, i, easings) =>\n        !(!BEZIERS[easing] || (i > 0 && easings[i - 1] !== easing))\n      );\n\n/*!\n * @param {Actor} actor\n * @param {number} steps\n * @param {string} track\n * @return {string}\n */\nexport const generateActorKeyframes = (actor, steps, track) => {\n  // This function is completely crazy.  Simplify it?\n  const accumulator = [];\n  const end = actor.getEnd();\n  const start = actor.getStart();\n  const length = actor.getLength();\n  const leadingWait = simulateLeadingWait(actor, track, start);\n\n  if (leadingWait) {\n    accumulator.push(leadingWait);\n  }\n\n  let previousSegmentWasOptimized = false;\n  actor._propertyTracks[track].forEach(prop => {\n    const fromPercent = calculateStepPercent(prop, start, length);\n    const { nextProperty } = prop;\n\n    let toPercent, increments, incrementSize;\n\n    if (nextProperty) {\n      toPercent = calculateStepPercent(nextProperty, start, length);\n      const delta = toPercent - fromPercent;\n      increments = Math.floor((delta / 100) * steps) || 1;\n      incrementSize = delta / increments;\n    } else {\n      toPercent = 100;\n      increments = 1;\n      incrementSize = 1;\n    }\n\n    let trackSegment;\n    if (nextProperty && isSegmentAWait(prop, nextProperty)) {\n      trackSegment = generateActorTrackWaitSegment(\n        actor,\n        start,\n        prop,\n        nextProperty,\n        fromPercent,\n        toPercent\n      );\n\n      if (previousSegmentWasOptimized) {\n        trackSegment.shift();\n      }\n\n      previousSegmentWasOptimized = false;\n\n    } else if (canOptimizeKeyframeProperty(prop)) {\n      trackSegment = generateOptimizedKeyframeSegment(\n        prop,\n        fromPercent,\n        toPercent\n      );\n\n      // If this and the previous segment are optimized, remove the\n      // destination keyframe of the previous step.  The starting keyframe of\n      // the newest segment makes it redundant.\n      if (previousSegmentWasOptimized) {\n        accumulator[accumulator.length - 1] =\n          accumulator[accumulator.length - 1].split('\\n')[0];\n      }\n\n      previousSegmentWasOptimized = true;\n    } else {\n      trackSegment = generateActorTrackSegment(\n        actor,\n        increments,\n        incrementSize,\n        start,\n        fromPercent,\n        prop\n      );\n\n      if (previousSegmentWasOptimized) {\n        trackSegment.shift();\n      }\n\n      if (trackSegment.length) {\n        trackSegment = trackSegment.join('\\n');\n      }\n\n      previousSegmentWasOptimized = false;\n    }\n\n    if (trackSegment.length) {\n      accumulator.push(trackSegment);\n    }\n  });\n\n  const trailingWait = simulateTrailingWait(actor, track, start, end);\n\n  if (trailingWait) {\n    accumulator.push(trailingWait);\n  }\n\n  return accumulator.join('\\n');\n};\n\n/*!\n * @param {Actor} actor\n * @param {string} animName\n * @param {number} steps\n * @param {boolean} doCombineProperties\n * @param {Array.<string>=} vendors\n * @return {string}\n */\nexport const generateBoilerplatedKeyframes = (\n  actor,\n  animName,\n  steps,\n  doCombineProperties,\n  vendors = undefined\n) =>\n\n  doCombineProperties ?\n    applyVendorBoilerplates(\n      generateCombinedActorKeyframes(actor, steps),\n      animName,\n      vendors\n    ) :\n    actor.getTrackNames().map(trackName =>\n      applyVendorBoilerplates(\n        generateActorKeyframes(actor, steps, trackName),\n        `${animName}-${trackName}`,\n        vendors\n      )\n    ).join('\\n');\n\n/*!\n * @param {Actor} actor\n * @param {string} animName\n * @param {string} prefix\n * @param {boolean} doCombineProperties\n * @return {string}\n */\nexport const generateAnimationNameProperty = (\n  actor,\n  animationName,\n  prefix,\n  doCombineProperties\n) => {\n\n  let renderedName = `  ${prefix}animation-name:`;\n\n  if (doCombineProperties) {\n    renderedName += ` ${animationName}-keyframes;`;\n  } else {\n    const trackNames = actor.getTrackNames();\n\n    const trackNamesToPrint = _.intersection(trackNames, transformFunctions).length ?\n      _.difference(trackNames, transformFunctions).concat('transform') :\n      trackNames;\n\n    renderedName = trackNamesToPrint.reduce(\n      (renderedName, trackName) =>\n        `${renderedName} ${animationName}-${trackName}-keyframes,`,\n      renderedName\n    ).replace(/.$/, ';');\n  }\n\n  return renderedName;\n};\n\n/*!\n * @param {Rekapi} rekapi\n * @param {string} prefix\n * @param {number|string=} iterations\n * @return {string}\n */\nexport const generateAnimationIterationProperty = (\n  rekapi,\n  prefix,\n  iterations = undefined\n) =>\n  `  ${prefix}animation-iteration-count: ${iterations !== undefined ?\n    iterations :\n    rekapi._timesToIterate === -1 ?\n      'infinite' :\n      rekapi._timesToIterate\n   };`;\n\n/*!\n * @param {Actor} actor\n * @param {string} animName\n * @param {string} vendor\n * @param {boolean} doCombineProperties\n * @param {number|string=} iterations\n * @param {boolean=} isCentered\n * @return {string}\n */\nexport const generateCSSAnimationProperties = (\n  actor,\n  animName,\n  vendor,\n  doCombineProperties,\n  iterations = undefined,\n  isCentered = false\n) => {\n  const prefix = VENDOR_PREFIXES[vendor];\n  const start = actor.getStart();\n  const end = actor.getEnd();\n\n  const generatedProperties = [\n    generateAnimationNameProperty(actor, animName, prefix, doCombineProperties),\n    `  ${prefix}animation-duration: ${end - start}ms;`,\n    `  ${prefix}animation-delay: ${start}ms;`,\n    `  ${prefix}animation-fill-mode: forwards;`,\n    `  ${prefix}animation-timing-function: linear;`,\n    generateAnimationIterationProperty(actor.rekapi, prefix, iterations),\n  ];\n\n  if (isCentered) {\n    generatedProperties.push(`  ${prefix}transform-origin: 0 0;`);\n  }\n\n  return generatedProperties.join('\\n');\n};\n\n/*!\n * @param {Actor} actor\n * @param {string} animName\n * @param {boolean} doCombineProperties\n * @param {Array.<string>=} vendors\n * @param {number|string=} iterations\n * @param {boolean=} isCentered\n * @return {string}\n */\nexport const generateCSSClass = (\n    actor,\n    animName,\n    doCombineProperties,\n    vendors = ['w3'],\n    iterations = undefined,\n    isCentered = undefined\n  ) =>\n\n  `.${animName} {\n${  vendors.map(vendor =>\n      generateCSSAnimationProperties(\n        actor,\n        animName,\n        vendor,\n        doCombineProperties,\n        iterations,\n        isCentered\n      )\n    ).join('\\n')}\n}`;\n\n/*!\n * @param {Actor} actor\n * @return {boolean}\n */\nexport const canOptimizeAnyKeyframeProperties = (actor) =>\n  _.any(\n    actor._keyframeProperties,\n    canOptimizeKeyframeProperty\n  ) &&\n  !_.intersection(\n    Object.keys(actor._propertyTracks),\n    transformFunctions\n  ).length;\n\n/*!\n * Creates the CSS `@keyframes` for an individual actor.\n * @param {Actor} actor\n * @param {Object=} options Same as options for Rekapi.prototype.toCSS.\n * @return {string}\n */\nexport const getActorCSS = (actor, options = {}) => {\n  const { name, vendors, iterations, isCentered } = options;\n\n  const animName = name ?\n    (actor.rekapi.getActorCount() > 1 ?\n      `${name}-${actor.id}` :\n      name\n    ) :\n    getActorClassName(actor);\n\n  const steps = Math.ceil(\n    (actor.rekapi.getAnimationLength() / 1000) * (options.fps || DEFAULT_FPS)\n  );\n\n  const doCombineProperties = !canOptimizeAnyKeyframeProperties(actor);\n\n  return [\n    generateCSSClass(\n      actor,\n      animName,\n      doCombineProperties,\n      vendors,\n      iterations,\n      isCentered\n    ),\n    generateBoilerplatedKeyframes(\n      actor,\n      animName,\n      steps,\n      doCombineProperties,\n      vendors\n    )\n  ].join('\\n');\n};\n\n/**\n * {@link rekapi.DOMRenderer} allows you to animate DOM elements.  This is\n * achieved either by [CSS `@keyframe`\n * animations](https://developer.mozilla.org/en-US/docs/Web/CSS/@keyframes), or\n * by per-frame inline style updates  keyframes are defined with the same API\n * in either case.  To render animations with the DOM, just supply any DOM\n * element to the {@link rekapi.Rekapi} constructor.  You may use\n * `document.body`, since it is generally always available:\n *\n *     const rekapi = new Rekapi(document.body);\n *\n *  To use this renderer's API, get a reference to the initialized object:\n *\n *     const domRenderer = rekapi.getRendererInstance(DOMRenderer);\n *\n * There are separate APIs for playing inline style animations and CSS\n * `@keyframe` animations.  For a detailed breakdown of how to choose between\n * these two APIs and use {@link rekapi.DOMRenderer} effectively, check out the\n * {@tutorial dom-rendering-in-depth} tutorial.\n *\n * __Note__: {@link rekapi.DOMRenderer} is added to {@link\n * rekapi.Rekapi#renderers} automatically, there is no reason to call the\n * constructor yourself in most cases.\n * @param {rekapi.Rekapi} rekapi The {@link rekapi.Rekapi} instance to render for.\n * @constructor rekapi.DOMRenderer\n * @extends {rekapi.renderer}\n */\nexport class DOMRenderer {\n  constructor (rekapi) {\n\n    Object.assign(this, {\n      rekapi,\n\n      // @private {number}\n      _playTimestamp: null,\n\n      // @private {string}\n      _cachedCSS: null,\n\n      // The HTMLStyleElement that gets injected into the DOM.\n      // @private {HTMLStyleElement)\n      _styleElement: null,\n\n      // @private {number}\n      _stopSetTimeoutHandle: null\n    });\n\n    rekapi.on('timelineModified', () => this._cachedCSS = null);\n    rekapi.on('addActor', onAddActor);\n  }\n\n  /**\n   * @method rekapi.DOMRenderer#canAnimateWithCSS\n   * @return {boolean} Whether or not the browser supports CSS `@keyframe`\n   * animations.\n   */\n  canAnimateWithCSS () {\n    return !!vendorPrefix;\n  }\n\n  /**\n   * Play the Rekapi animation as a CSS `@keyframe` animation.\n   *\n   * Note that this is not the same as {@link rekapi.Rekapi#play}.  That method\n   * controls inline style animations, while this method controls CSS\n   * `@keyframe` animations.\n   * @method rekapi.DOMRenderer#play\n   * @param {number} [iterations] How many times the animation should loop.\n   * This can be `null` or `0` if you want to loop the animation endlessly but\n   * also specify a value for `fps`.\n   * @param {number} [fps] How many `@keyframes` to generate per second of the\n   * animation.  A higher value results in a more precise CSS animation, but it\n   * will take longer to generate.  The default value is `30`.  You should not\n   * need to go higher than `60`.\n   */\n  play (iterations = undefined, fps = undefined) {\n    if (this.isPlaying()) {\n      this.stop();\n    }\n\n    this._styleElement = injectStyle(\n      this.rekapi,\n      this._cachedCSS || this.prerender.apply(this, arguments)\n    );\n\n    this._playTimestamp = now();\n\n    if (iterations) {\n      const animationLength = (iterations * this.rekapi.getAnimationLength());\n      this._stopSetTimeoutHandle = setTimeout(\n        this.stop.bind(this, true),\n        animationLength + INJECTED_STYLE_REMOVAL_BUFFER_MS\n      );\n    }\n\n    fireEvent(this.rekapi, 'play');\n  }\n\n  /**\n   * Stop a CSS `@keyframe` animation.  This also removes any `<style>`\n   * elements that were dynamically injected into the DOM.\n   *\n   * Note that this is not the same as {@link rekapi.Rekapi#stop}.  That method\n   * controls inline style animations, while this method controls CSS\n   * `@keyframe` animations.\n   * @method rekapi.DOMRenderer#stop\n   * @param {boolean=} goToEnd If true, skip to the end of the animation.  If\n   * false or omitted, set inline styles on the {@link rekapi.Actor} elements\n   * to keep them in their current position.\n   */\n  stop (goToEnd = undefined) {\n    if (this.isPlaying()) {\n      clearTimeout(this._stopSetTimeoutHandle);\n\n      // Forces a style update in WebKit/Presto\n      this._styleElement.innerHTML = '';\n\n      document.head.removeChild(this._styleElement);\n      this._styleElement = null;\n      const animationLength = this.rekapi.getAnimationLength();\n\n      this.rekapi.update(\n        goToEnd ?\n          animationLength :\n          (now() - this._playTimestamp) % animationLength\n      );\n\n      fireEvent(this.rekapi, 'stop');\n    }\n  }\n\n  /**\n   * @method rekapi.DOMRenderer#isPlaying\n   * @return {boolean} Whether or not a CSS `@keyframe` animation is running.\n   */\n  isPlaying () {\n    return !!this._styleElement;\n  }\n\n  /**\n   * Prerender and cache the CSS animation so that it is immediately ready to\n   * be used when it is needed in the future.  The function signature is\n   * identical to {@link rekapi.DOMRenderer#play}.  This\n   * is necessary to play a CSS animation and will be automatically called for\n   * you if you don't call it manually, but calling it ahead of time (such as\n   * on page load) will prevent any perceived lag when a CSS `@keyframe`\n   * animation is started.  The prerendered animation is cached for reuse until\n   * the timeline or a keyframe is modified.\n   *\n   * @method rekapi.DOMRenderer#prerender\n   * @param {number=} iterations How many times the animation should loop.\n   * This can be `null` or `0` if you want to loop the animation endlessly but\n   * also specify a value for `fps`.\n   * @param {number=} fps How many `@keyframes` to generate per second of\n   * the animation.  A higher value results in a more precise CSS animation,\n   * but it will take longer to generate.  The default value is `30`.  You\n   * should not need to go higher than `60`.\n   * @return {string} The prerendered CSS string.  You likely won't need this,\n   * as it is also cached internally.\n   */\n  prerender (iterations = undefined, fps = undefined) {\n    return this._cachedCSS = this.getCss({\n      vendors: [vendorPrefix],\n      fps,\n      iterations\n    });\n  }\n\n  /**\n   * You can decouple transform components in order to animate each property\n   * with its own easing curve:\n   *\n   *     actor\n   *       .keyframe(0, {\n   *         translateX: '0px',\n   *         translateY: '0px',\n   *         rotate: '0deg'\n   *       })\n   *       .keyframe(1500, {\n   *         translateX: '200px',\n   *         translateY: '200px',\n   *         rotate: '90deg'\n   *       }, {\n   *         translateX: 'easeOutExpo',\n   *         translateY: 'easeInSine',\n   *         rotate: 'elastic'\n   *       });\n   *\n   * CSS transform string components are order-dependent, but JavaScript object\n   * properties have an unpredictable order.  Rekapi must combine transform\n   * properties supplied to {@link rekapi.Actor#keyframe} (as shown above) into\n   * a single string when it renders each frame.  This method lets you change\n   * that order from the default.\n   *\n   * However, if you prefer a more standards-oriented approach, Rekapi also\n   * supports combining the transform components yourself, obviating the need\n   * for {@link rekapi.DOMRenderer#setActorTransformOrder} entirely:\n   *\n   *     actor\n   *       .keyframe(0, {\n   *         transform: 'translateX(0px) translateY(0px) rotate(0deg)'\n   *       })\n   *       .keyframe(1500, {\n   *         transform: 'translateX(200px) translateY(200px) rotate(90deg)'\n   *       }, {\n   *         transform: 'easeOutExpo easeInSine elastic'\n   *       });\n   * @method rekapi.DOMRenderer#setActorTransformOrder\n   * @param {rekapi.Actor} actor The {@link rekapi.Actor} to apply the new\n   * transform order to.\n   * @param {Array.<string>} orderedTransforms The array of transform names.\n   * The supported array values (and default order) are:\n   *\n   * - `translateX`\n   * - `translateY`\n   * - `translateZ`\n   * - `scale`\n   * - `scaleX`\n   * - `scaleY`\n   * - `perspective`\n   * - `rotate`\n   * - `rotateX`\n   * - `rotateY`\n   * - `rotateZ`\n   * - `skewX`\n   * - `skewY`\n   * @return {rekapi.Rekapi}\n   */\n  setActorTransformOrder (actor, orderedTransforms) {\n    const unrecognizedTransforms = _.reject(orderedTransforms, isTransformFunction);\n\n    if (unrecognizedTransforms.length) {\n      throw `Unknown or unsupported transform functions: ${unrecognizedTransforms.join(', ')}`;\n    }\n\n    // Ignore duplicate transform function names in the array\n    actor._transformOrder = _.uniq(orderedTransforms);\n\n    return this.rekapi;\n  }\n\n  /**\n   * Convert the animation to CSS `@keyframes`.\n   * @method rekapi.DOMRenderer#getCss\n   * @param {Object} [options={}]\n   * @param {Array.<string>} [options.vendors=['w3']] The browser vendors you\n   * want to support. Valid values are:\n   *   * `'microsoft'`\n   *   * `'mozilla'`\n   *   * `'opera'`\n   *   * `'w3'`\n   *   * `'webkit'`\n   *\n   *\n   * @param {number} [options.fps=30]  Defines the number of CSS `@keyframe` frames\n   * rendered per second of an animation.  CSS `@keyframes` are comprised of a\n   * series of explicitly defined steps, and more steps will allow for a more\n   * complex animation.  More steps will also result in a larger CSS string,\n   * and more time needed to generate the string.\n   * @param {string} [options.name] Define a custom name for your animation.\n   * This becomes the class name targeted by the generated CSS.\n   * @param {boolean} [options.isCentered] If `true`, the generated CSS will\n   * contain `transform-origin: 0 0;`, which centers the DOM element along the\n   * path of motion.  If `false` or omitted, no `transform-origin` rule is\n   * specified and the element is aligned to the path of motion by its top-left\n   * corner.\n   * @param {number} [options.iterations] How many times the generated\n   * animation should repeat.  If omitted, the animation will loop\n   * indefinitely.\n   * @return {string}\n   */\n  getCss (options = {}) {\n    const animationCSS = [];\n\n    _.each(this.rekapi.getAllActors(), actor => {\n      if (actor.context.nodeType === 1) {\n        animationCSS.push(getActorCSS(actor, options));\n      }\n    });\n\n    return animationCSS.join('\\n');\n  }\n}\n\n/*!\n * @param {Rekapi} rekapi\n */\nrendererBootstrappers.push(rekapi =>\n  // Node.nodeType 1 is an ELEMENT_NODE.\n  // https://developer.mozilla.org/en-US/docs/Web/API/Node.nodeType\n  rekapi.context.nodeType === 1 && new DOMRenderer(rekapi)\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderers/dom.js","/**\n * @namespace rekapi\n */\n\n/**\n * An Object that provides utilities for rendering a {@link rekapi.Actor}.\n * @typedef {Object} rekapi.renderer\n * @property {rekapi.render} render A function that renders a {@link\n * rekapi.Actor}.\n */\n\n/**\n * A function that is called when an event is fired.  See {@link\n * rekapi.Rekapi#on} for a list of valid events.\n * @callback rekapi.eventHandler\n * @param {rekapi.Rekapi} rekapi A {@link rekapi.Rekapi} instance.\n * @param {Object} data Data provided from the event (see {@link\n * rekapi.Rekapi#on} for details).\n */\n\n/**\n * A function that gets called every time the actor's state is updated (once\n * every frame). This function should do something meaningful with the state of\n * the actor (for example, visually rendering to the screen).\n * @callback rekapi.render\n * @param {Object} context An actor's {@link rekapi.Actor#context} Object.\n * @param {Object} state An actor's current state properties.\n */\n\n/**\n * @callback rekapi.keyframeFunction\n * @param {rekapi.Actor} actor The {@link rekapi.Actor} to which this\n * {@link rekapi.keyframeFunction} was provided.\n * @param {number} drift A number that represents the delay between when the\n * function is called and when it was scheduled. There is typically some amount\n * of delay due to the nature of JavaScript timers.\n */\n\n/**\n * @callback rekapi.actorSortFunction\n * @param {rekapi.Actor} actor A {@link rekapi.Actor} that should expose a\n * `number` value to sort by.\n * @return {number}\n */\n\nexport { Rekapi } from './rekapi';\nexport { Actor } from './actor';\nexport { KeyframeProperty } from './keyframe-property';\nexport { CanvasRenderer } from './renderers/canvas';\nexport { DOMRenderer } from './renderers/dom';\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n// WEBPACK FOOTER //\n// ../shifty/~/object-assign/index.js","/*!\n * All equations are adapted from Thomas Fuchs'\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).\n *\n * Based on Easing Equations (c) 2003 [Robert\n * Penner](http://www.robertpenner.com/), all rights reserved. This work is\n * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).\n */\n\n/*!\n *  TERMS OF USE - EASING EQUATIONS\n *  Open source under the BSD License.\n *  Easing Equations (c) 2003 Robert Penner, all rights reserved.\n */\nexport const linear = pos => pos;\n\nexport const easeInQuad = pos => Math.pow(pos, 2);\n\nexport const easeOutQuad = pos => -(Math.pow((pos - 1), 2) - 1);\n\nexport const easeInOutQuad = pos =>\n  (pos /= 0.5) < 1 ?\n    0.5 * Math.pow(pos,2) :\n    -0.5 * ((pos -= 2) * pos - 2);\n\nexport const easeInCubic = pos => Math.pow(pos, 3);\n\nexport const easeOutCubic = pos => Math.pow((pos - 1), 3) + 1;\n\nexport const easeInOutCubic = pos =>\n  (pos /= 0.5) < 1 ?\n    0.5 * Math.pow(pos,3) :\n    0.5 * (Math.pow((pos - 2),3) + 2);\n\nexport const easeInQuart = pos => Math.pow(pos, 4);\n\nexport const easeOutQuart = pos => -(Math.pow((pos - 1), 4) - 1);\n\nexport const easeInOutQuart = pos =>\n  (pos /= 0.5) < 1 ?\n    0.5 * Math.pow(pos,4) :\n    -0.5 * ((pos -= 2) * Math.pow(pos,3) - 2);\n\nexport const easeInQuint = pos => Math.pow(pos, 5);\n\nexport const easeOutQuint = pos => Math.pow((pos - 1), 5) + 1;\n\nexport const easeInOutQuint = pos =>\n  (pos /= 0.5) < 1 ?\n    0.5 * Math.pow(pos,5) :\n    0.5 * (Math.pow((pos - 2),5) + 2);\n\nexport const easeInSine = pos => -Math.cos(pos * (Math.PI / 2)) + 1;\n\nexport const easeOutSine = pos => Math.sin(pos * (Math.PI / 2));\n\nexport const easeInOutSine = pos => -0.5 * (Math.cos(Math.PI * pos) - 1);\n\nexport const easeInExpo = pos => (pos === 0) ? 0 : Math.pow(2, 10 * (pos - 1));\n\nexport const easeOutExpo = pos => (pos === 1) ? 1 : -Math.pow(2, -10 * pos) + 1;\n\nexport const easeInOutExpo = pos => {\n  if (pos === 0) {\n    return 0;\n  }\n\n  if (pos === 1) {\n    return 1;\n  }\n\n  if ((pos /= 0.5) < 1) {\n    return 0.5 * Math.pow(2,10 * (pos - 1));\n  }\n\n  return 0.5 * (-Math.pow(2, -10 * --pos) + 2);\n};\n\nexport const easeInCirc = pos => -(Math.sqrt(1 - (pos * pos)) - 1);\n\nexport const easeOutCirc = pos => Math.sqrt(1 - Math.pow((pos - 1), 2));\n\nexport const easeInOutCirc = pos =>\n  ((pos /= 0.5) < 1) ?\n    -0.5 * (Math.sqrt(1 - pos * pos) - 1) :\n    0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1);\n\nexport const easeOutBounce = pos => {\n  if (pos < (1 / 2.75)) {\n    return (7.5625 * pos * pos);\n  } else if (pos < (2 / 2.75)) {\n    return (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);\n  } else if (pos < (2.5 / 2.75)) {\n    return (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);\n  } else {\n    return (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);\n  }\n};\n\nexport const easeInBack = pos => {\n  const s = 1.70158;\n  return pos * pos * ((s + 1) * pos - s);\n};\n\nexport const easeOutBack = pos => {\n  const s = 1.70158;\n  return (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1;\n};\n\nexport const easeInOutBack = pos => {\n  let s = 1.70158;\n  if ((pos /= 0.5) < 1) {\n    return 0.5 * (pos * pos * (((s *= (1.525)) + 1) * pos - s));\n  }\n  return 0.5 * ((pos -= 2) * pos * (((s *= (1.525)) + 1) * pos + s) + 2);\n};\n\nexport const elastic = pos =>\n  -1 * Math.pow(4,-8 * pos) * Math.sin((pos * 6 - 1) * (2 * Math.PI) / 2) + 1;\n\nexport const swingFromTo = pos => {\n  let s = 1.70158;\n  return ((pos /= 0.5) < 1) ?\n      0.5 * (pos * pos * (((s *= (1.525)) + 1) * pos - s)) :\n      0.5 * ((pos -= 2) * pos * (((s *= (1.525)) + 1) * pos + s) + 2);\n};\n\nexport const swingFrom = pos => {\n  const s = 1.70158;\n  return pos * pos * ((s + 1) * pos - s);\n};\n\nexport const swingTo = pos => {\n  const s = 1.70158;\n  return (pos -= 1) * pos * ((s + 1) * pos + s) + 1;\n};\n\nexport const bounce = pos => {\n  if (pos < (1 / 2.75)) {\n    return (7.5625 * pos * pos);\n  } else if (pos < (2 / 2.75)) {\n    return (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);\n  } else if (pos < (2.5 / 2.75)) {\n    return (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);\n  } else {\n    return (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);\n  }\n};\n\nexport const bouncePast = pos => {\n  if (pos < (1 / 2.75)) {\n    return (7.5625 * pos * pos);\n  } else if (pos < (2 / 2.75)) {\n    return 2 - (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);\n  } else if (pos < (2.5 / 2.75)) {\n    return 2 - (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);\n  } else {\n    return 2 - (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);\n  }\n};\n\nexport const easeFromTo = pos =>\n  ((pos /= 0.5) < 1) ?\n    0.5 * Math.pow(pos,4) :\n    -0.5 * ((pos -= 2) * Math.pow(pos,3) - 2);\n\nexport const easeFrom = pos => Math.pow(pos, 4);\n\nexport const easeTo = pos => Math.pow(pos, 0.25);\n\n\n\n// WEBPACK FOOTER //\n// ../shifty/src/easing-functions.js","import * as easingFunctions from './easing-functions';\nimport assign from 'object-assign';\n\n// CONSTANTS\nconst DEFAULT_EASING = 'linear';\nconst DEFAULT_DURATION = 500;\nconst UPDATE_TIME = 1000 / 60;\nconst root = typeof window !== 'undefined' ? window : global;\n\n// requestAnimationFrame() shim by Paul Irish (modified for Shifty)\n// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\nconst DEFAULT_SCHEDULE_FUNCTION = (\n  root.requestAnimationFrame\n  || root.webkitRequestAnimationFrame\n  || root.oRequestAnimationFrame\n  || root.msRequestAnimationFrame\n  || (root.mozCancelRequestAnimationFrame && root.mozRequestAnimationFrame)\n  || setTimeout\n);\n\nconst noop = () => {};\n\n/**\n * Handy shortcut for doing a for-in loop. This is not a \"normal\" each\n * function, it is optimized for Shifty.  The iterator function only receives\n * the property name, not the value.\n * @param {Object} obj\n * @param {Function(string)} fn\n * @private\n */\nexport const each = (obj, fn) => {\n  Object.keys(obj).forEach(fn);\n};\n\n/**\n * @param {Object} obj\n * @return {Object}\n * @private\n */\nexport const clone = obj => assign({}, obj);\n\n/**\n * This object contains all of the tweens available to Shifty.  It is\n * extensible - simply attach properties to the `Tweenable.formulas`\n * Object following the same format as `linear`.\n *\n * `pos` should be a normalized `number` (between 0 and 1).\n * @type {Object(function)}\n * @private\n */\nconst formulas = clone(easingFunctions);\n\n/**\n * Tweens a single property.\n * @param {number} start The value that the tween started from.\n * @param {number} end The value that the tween should end at.\n * @param {Function} easingFunc The easing curve to apply to the tween.\n * @param {number} position The normalized position (between 0.0 and 1.0) to\n * calculate the midpoint of 'start' and 'end' against.\n * @return {number} The tweened value.\n * @private\n */\nconst tweenProp = (start, end, easingFunc, position) =>\n  start + (end - start) * easingFunc(position);\n\n/**\n * Calculates the interpolated tween values of an Object for a given\n * timestamp.\n * @param {Number} forPosition The position to compute the state for.\n * @param {Object} currentState Current state properties.\n * @param {Object} originalState: The original state properties the Object is\n * tweening from.\n * @param {Object} targetState: The destination state properties the Object\n * is tweening to.\n * @param {number} duration: The length of the tween in milliseconds.\n * @param {number} timestamp: The UNIX epoch time at which the tween began.\n * @param {Object} easing: This Object's keys must correspond to the keys in\n * targetState.\n * @private\n */\nexport const tweenProps = (\n  forPosition,\n  currentState,\n  originalState,\n  targetState,\n  duration,\n  timestamp,\n  easing\n) => {\n  const normalizedPosition = forPosition < timestamp ?\n    0 :\n    (forPosition - timestamp) / duration;\n\n  each(currentState, key => {\n    const easingObjectProp = easing[key];\n    const easingFn = typeof easingObjectProp === 'function' ?\n      easingObjectProp :\n      formulas[easingObjectProp];\n\n    currentState[key] = tweenProp(\n      originalState[key],\n      targetState[key],\n      easingFn,\n      normalizedPosition\n    );\n  });\n\n  return currentState;\n};\n\n\n/**\n * Creates a usable easing Object from a string, a function or another easing\n * Object.  If `easing` is an Object, then this function clones it and fills\n * in the missing properties with `\"linear\"`.\n * @param {Object.<string|Function>} fromTweenParams\n * @param {Object|string|Function} easing\n * @return {Object.<string|Function>}\n * @private\n */\nexport const composeEasingObject = (fromTweenParams, easing = DEFAULT_EASING) => {\n  const composedEasing = {};\n  let typeofEasing = typeof easing;\n\n  if (typeofEasing === 'string' || typeofEasing === 'function') {\n    each(fromTweenParams, prop => composedEasing[prop] = easing);\n  } else {\n    each(fromTweenParams, prop =>\n      composedEasing[prop] =\n        composedEasing[prop] || easing[prop] || DEFAULT_EASING\n    );\n  }\n\n  return composedEasing;\n};\n\nexport class Tweenable {\n  /**\n   * @constructs shifty.Tweenable\n   * @param {Object=} initialState The values that the initial tween should\n   * start at if a `from` object is not provided to `tween` or `setConfig`.\n   * @param {Object=} config Configuration object to be passed to\n   * [`setConfig`]{@link shifty.Tweenable#setConfig}.\n   */\n  constructor (initialState = {}, config = undefined) {\n    this._currentState = initialState;\n    this._configured = false;\n    this._scheduleFunction = DEFAULT_SCHEDULE_FUNCTION;\n\n    // To prevent unnecessary calls to setConfig do not set default\n    // configuration here.  Only set default configuration immediately before\n    // tweening if none has been set.\n    if (config !== undefined) {\n      this.setConfig(config);\n    }\n  }\n\n  /**\n   * Applies a filter to Tweenable instance.\n   * @param {Tweenable} tweenable The `Tweenable` instance to call the filter\n   * upon.\n   * @param {String} filterName The name of the filter to apply.\n   * @private\n   */\n  _applyFilter (filterName) {\n    let filters = Tweenable.filters;\n    let args = this._filterArgs;\n\n    each(filters, name => {\n      let filter = filters[name][filterName];\n\n      if (typeof filter !== 'undefined') {\n        filter.apply(this, args);\n      }\n    });\n  }\n\n  /**\n   * Handles the update logic for one step of a tween.\n   * @param {number=} currentTimeOverride Needed for accurate timestamp in\n   * shifty.Tweenable#seek.\n   * @private\n   */\n  _timeoutHandler (currentTimeOverride) {\n    const delay = this._delay;\n    const currentState = this._currentState;\n    let timestamp = this._timestamp;\n    let duration = this._duration;\n    let targetState = this._targetState;\n    let step = this._step;\n\n    const endTime = timestamp + delay + duration;\n    let currentTime =\n      Math.min(currentTimeOverride || Tweenable.now(), endTime);\n    const hasEnded = currentTime >= endTime;\n    const offset = duration - (endTime - currentTime);\n\n    if (this.isPlaying()) {\n      if (hasEnded) {\n        step(targetState, this._attachment, offset);\n        this.stop(true);\n      } else {\n        // This function needs to be .call-ed because it is a native method in\n        // some environments:\n        // http://stackoverflow.com/a/9678166\n        this._scheduleId = this._scheduleFunction.call(\n          root,\n          () => this._timeoutHandler(...arguments),\n          UPDATE_TIME\n        );\n\n        this._applyFilter('beforeTween');\n\n        // If the animation has not yet reached the start point (e.g., there was\n        // delay that has not yet completed), just interpolate the starting\n        // position of the tween.\n        if (currentTime < (timestamp + delay)) {\n          currentTime = 1;\n          duration = 1;\n          timestamp = 1;\n        } else {\n          timestamp += delay;\n        }\n\n        tweenProps(\n          currentTime,\n          currentState,\n          this._originalState,\n          targetState,\n          duration,\n          timestamp,\n          this._easing\n        );\n\n        this._applyFilter('afterTween');\n        step(currentState, this._attachment, offset);\n      }\n    }\n  }\n\n  /**\n   * Configure and start a tween.\n   * @method shifty.Tweenable#tween\n   * @param {Object=} config See `config` options for `{@link\n   * shifty.Tweenable#setConfig}`\n   * @return {Promise}\n   */\n  tween (config = undefined) {\n    if (this._isTweening) {\n      return this;\n    }\n\n    // Only set default config if no configuration has been set previously and\n    // none is provided now.\n    if (config !== undefined || !this._configured) {\n      this.setConfig(config);\n    }\n\n    this._timestamp = Tweenable.now();\n    this._start(this.get(), this._attachment);\n    return this.resume();\n  }\n\n  /**\n   * Configure a tween that will start at some point in the future.\n   *\n   * @method shifty.Tweenable#setConfig\n   * @param {Object} config See below\n   * @property {Object=} config.from Starting position.  If omitted, `{@link\n   * shifty.Tweenable#get}` is used.\n   * @property {Object=} config.to Ending position.\n   * @property {number=} config.duration How many milliseconds to animate for.\n   * @property {number=} config.delay  How many milliseconds to wait before\n   * starting\n   * the tween.\n   * @property {Function(Object, *)=} config.start Function to execute when the\n   * tween begins.  Receives the state of the tween as the first parameter and\n   * `attachment` as the second parameter.\n   * @property {Function(Object, *, number)=} config.step Function to execute\n   * on every tick.  Receives `get` as the first parameter, `attachment` as the\n   * second parameter, and the time elapsed since the start of the tween as the\n   * third.  This function is not called on the final step of the animation.\n   * @property {Object.<string|Function|string|Function>=} config.easing Easing\n   * curve name(s) or function(s) to use for the tween.\n   * @property {*=} config.attachment Cached value that is passed to the\n   * `step`/`start` functions.\n   * @property {Function} config.promise Promise constructor for when you want\n   * to use Promise library or polyfill Promises in unsupported environments.\n   * @return {Tweenable}\n   */\n  setConfig (config = {}) {\n    this._configured = true;\n\n    // Attach something to this Tweenable instance (e.g.: a DOM element, an\n    // object, a string, etc.);\n    this._attachment = config.attachment;\n\n    // Init the internal state\n    assign(this, {\n      _pausedAtTime: null,\n      _scheduleId: null,\n      _delay: config.delay || 0,\n      _start: config.start || noop,\n      _step: config.step || noop,\n      _duration: config.duration || DEFAULT_DURATION,\n      _currentState: clone(config.from || this.get()),\n    });\n\n    // Separate Object.assign here; it depends on _currentState being set above\n    assign(this, {\n      _originalState: this.get(),\n      _targetState: clone(config.to || this.get())\n    });\n\n    let currentState = this._currentState;\n    // Ensure that there is always something to tween to.\n    this._targetState = assign({}, currentState, this._targetState);\n\n    this._easing = composeEasingObject(currentState, config.easing);\n    this._filterArgs =\n      [currentState, this._originalState, this._targetState, this._easing];\n    this._applyFilter('tweenCreated');\n\n    const Promised = config.promise || Promise;\n    this._promise = new Promised(\n      (resolve, reject) => {\n        this._resolve = resolve;\n        this._reject = reject;\n      }\n    );\n\n    // Needed to silence (harmless) logged errors when a .catch handler is not\n    // added by downsteam code\n    this._promise.catch(noop);\n\n    return this;\n  }\n\n  /**\n   * @method shifty.Tweenable#get\n   * @return {Object} The current state.\n   */\n  get () {\n    return clone(this._currentState);\n  }\n\n  /**\n   * @method shifty.Tweenable#set\n   * @param {Object} state The state to set.\n   * @description Set the current state.\n   */\n  set (state) {\n    this._currentState = state;\n  }\n\n  /**\n   * Pause a tween.  Paused tweens can be resumed from the point at which they\n   * were paused.  This is different from `stop`, as that method causes a tween\n   * to start over when it is resumed.\n   * @method shifty.Tweenable#pause\n   * @return {Tweenable}\n   */\n  pause () {\n    this._pausedAtTime = Tweenable.now();\n    this._isPaused = true;\n\n    return this;\n  }\n\n  /**\n   * Resume a paused tween.\n   * @method shifty.Tweenable#resume\n   * @return {Promise}\n   */\n  resume () {\n    if (this._isPaused) {\n      this._timestamp += Tweenable.now() - this._pausedAtTime;\n    }\n\n    this._isPaused = false;\n    this._isTweening = true;\n    this._timeoutHandler();\n\n    return this._promise;\n  }\n\n  /**\n   * Move the state of the animation to a specific point in the tween's\n   * timeline.  If the animation is not running, this will cause the `step`\n   * handlers to be called.\n   * @method shifty.Tweenable#seek\n   * @param {millisecond} millisecond The millisecond of the animation to seek\n   * to.  This must not be less than `0`.\n   * @return {Tweenable}\n   */\n  seek (millisecond) {\n    millisecond = Math.max(millisecond, 0);\n    const currentTime = Tweenable.now();\n\n    if ((this._timestamp + millisecond) === 0) {\n      return this;\n    }\n\n    this._timestamp = currentTime - millisecond;\n\n    if (!this.isPlaying()) {\n      this._isTweening = true;\n      this._isPaused = false;\n\n      // If the animation is not running, call _timeoutHandler to make sure that\n      // any step handlers are run.\n      this._timeoutHandler(currentTime);\n\n      this.pause();\n    }\n\n    return this;\n  }\n\n  /**\n   * Stops and cancels a tween.\n   * @param {boolean=} gotoEnd If `false` or omitted, the tween just stops at\n   * its current state, and the tween promise is not resolved.  If `true`, the\n   * tweened object's values are instantly set to the target values, and the\n   * promise is resolved.\n   * @method shifty.Tweenable#stop\n   * @return {Tweenable}\n   */\n  stop (gotoEnd) {\n    this._isTweening = false;\n    this._isPaused = false;\n\n    (\n      root.cancelAnimationFrame           ||\n      root.webkitCancelAnimationFrame     ||\n      root.oCancelAnimationFrame          ||\n      root.msCancelAnimationFrame         ||\n      root.mozCancelRequestAnimationFrame ||\n      root.clearTimeout\n    )(this._scheduleId);\n\n    if (gotoEnd) {\n      this._applyFilter('beforeTween');\n      tweenProps(\n        1,\n        this._currentState,\n        this._originalState,\n        this._targetState,\n        1,\n        0,\n        this._easing\n      );\n      this._applyFilter('afterTween');\n      this._applyFilter('afterTweenEnd');\n      this._resolve(this._currentState, this._attachment);\n    } else {\n      this._reject(this._currentState, this._attachment);\n    }\n\n    return this;\n  }\n\n  /**\n   * Whether or not a tween is running.\n   * @method shifty.Tweenable#isPlaying\n   * @return {boolean}\n   */\n  isPlaying () {\n    return this._isTweening && !this._isPaused;\n  }\n\n  /**\n   * Set a custom schedule function.\n   *\n   * If a custom function is not set,\n   * [`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame)\n   * is used if available, otherwise\n   * [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout)\n   * is used.\n   * @method shifty.Tweenable#setScheduleFunction\n   * @param {Function(Function,number)} scheduleFunction The function to be\n   * used to schedule the next frame to be rendered.\n   */\n  setScheduleFunction (scheduleFunction) {\n    this._scheduleFunction = scheduleFunction;\n  }\n\n  /**\n   * `delete` all \"own\" properties.  Call this when the `Tweenable` instance\n   * is no longer needed to free memory.\n   * @method shifty.Tweenable#dispose\n   */\n  dispose () {\n    each(this, prop => delete this[prop]);\n  }\n}\n\nassign(Tweenable, {\n  /**\n   * @memberof shifty.Tweenable\n   * @type {Object.<Function(number)>}\n   * @static\n   * @description A static Object of easing functions that can by used by\n   * Shifty.\n   */\n  formulas,\n  filters: {},\n\n  /**\n   * @memberof shifty.Tweenable\n   * @function\n   * @static\n   * @description Returns the current timestamp\n   * @returns {number}\n   */\n  now: (Date.now || (_ => +new Date()))\n});\n\n/**\n * @method shifty.tween\n * @param {Object=} config See `config` options for `{@link\n * shifty.Tweenable#setConfig}`\n * @description Standalone convenience method that functions identically to\n * [`shifty.Tweenable#tween`]{@link shifty.Tweenable#tween}.  You can use this to create\n * tweens without needing to set up a `{@link shifty.Tweenable}` instance.\n *\n *     import { tween } from 'shifty';\n *\n *     tween({ from: { x: 0 }, to: { x: 10 } }).then(\n *       () => console.log('All done!')\n *     );\n *\n * @returns {Promise}\n */\nexport function tween (config = {}) {\n  const tweenable = new Tweenable();\n  const promise = tweenable.tween(config);\n  promise.tweenable = tweenable;\n\n  return promise;\n}\n\n\n\n// WEBPACK FOOTER //\n// ../shifty/src/tweenable.js"],"sourceRoot":""}